{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\FacebookLoginButton\\\\FacebookLoginButton.js\";\nimport React, { Component } from 'react';\nimport './FacebookLoginButton.scss';\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { loginByFaceGoogle, storeInfoForRegister } from '../../actions/user_action';\n\nclass FacebookLoginButton extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      authFailed: false,\n      name: \"\",\n      email: \"\",\n      picture: \"\"\n    };\n\n    this.componentClicked = () => {\n      console.log(\"Facebook Authentication\");\n    };\n\n    this.responseFacebook = response => {\n      if (response) {\n        console.log(response);\n        this.props.dispatch(loginByFaceGoogle(response.email)).then(res => {\n          if (res.payload.loginSuccess) {\n            this.props.history.push('/newfeed');\n          } else {\n            console.log(response); // let data = {\n            //     name: response.name,\n            //     email: response.email,\n            //     picture: response.image.url,\n            // }\n            // this.props.dispatch(storeInfoForRegister(data));\n            // this.props.history.push('/register');\n          }\n        });\n      } else {\n        console.log(response);\n      }\n    };\n\n    this.responseGoogle = response => {\n      console.log(response);\n    };\n  }\n\n  render() {\n    let template;\n    this.state.authFailed ? template = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }) : template = /*#__PURE__*/React.createElement(FacebookLogin, {\n      appId: \"413244283385621\",\n      fields: \"name,email,picture\",\n      callback: this.responseFacebook,\n      render: renderProps => /*#__PURE__*/React.createElement(\"button\", {\n        className: \"facebook_signin_button\",\n        onClick: renderProps.onClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: require('../../asset/login-page/fb_Icon2x.png'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }\n      }), \"\\u0110\\u0103ng nh\\u1EADp b\\u1EB1ng Facebook\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, template);\n  }\n\n}\n\nexport default connect()(withRouter(FacebookLoginButton));","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/FacebookLoginButton/FacebookLoginButton.js"],"names":["React","Component","FacebookLogin","withRouter","connect","loginByFaceGoogle","storeInfoForRegister","FacebookLoginButton","state","authFailed","name","email","picture","componentClicked","console","log","responseFacebook","response","props","dispatch","then","res","payload","loginSuccess","history","push","responseGoogle","render","template","renderProps","onClick","require"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,4BAAP;AACA,OAAOC,aAAP,MAA0B,uDAA1B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,iBAAT,EAA4BC,oBAA5B,QAAwD,2BAAxD;;AAEA,MAAMC,mBAAN,SAAkCN,SAAlC,CAA4C;AAAA;AAAA;AAAA,SAExCO,KAFwC,GAEhC;AACJC,MAAAA,UAAU,EAAE,KADR;AAEJC,MAAAA,IAAI,EAAE,EAFF;AAGJC,MAAAA,KAAK,EAAE,EAHH;AAIJC,MAAAA,OAAO,EAAE;AAJL,KAFgC;;AAAA,SASxCC,gBATwC,GASrB,MAAK;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACH,KAXuC;;AAAA,SAaxCC,gBAbwC,GAapBC,QAAD,IAAa;AAC5B,UAAIA,QAAJ,EAAc;AACVH,QAAAA,OAAO,CAACC,GAAR,CAAYE,QAAZ;AACA,aAAKC,KAAL,CAAWC,QAAX,CAAoBd,iBAAiB,CAACY,QAAQ,CAACN,KAAV,CAArC,EACCS,IADD,CACMC,GAAG,IAAI;AACT,cAAIA,GAAG,CAACC,OAAJ,CAAYC,YAAhB,EAA8B;AAC1B,iBAAKL,KAAL,CAAWM,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB;AACH,WAFD,MAEM;AACFX,YAAAA,OAAO,CAACC,GAAR,CAAYE,QAAZ,EADE,CAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ,SAdD;AAeH,OAjBD,MAkBK;AACDH,QAAAA,OAAO,CAACC,GAAR,CAAYE,QAAZ;AACH;AACJ,KAnCuC;;AAAA,SAqCxCS,cArCwC,GAqCtBT,QAAD,IAAe;AAC5BH,MAAAA,OAAO,CAACC,GAAR,CAAYE,QAAZ;AACH,KAvCuC;AAAA;;AAyCxCU,EAAAA,MAAM,GAAG;AACL,QAAIC,QAAJ;AACA,SAAKpB,KAAL,CAAWC,UAAX,GACImB,QAAQ,gBACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFR,GAKEA,QAAQ,gBACN,oBAAC,aAAD;AACI,MAAA,KAAK,EAAC,iBADV;AAEI,MAAA,MAAM,EAAC,oBAFX;AAGI,MAAA,QAAQ,EAAE,KAAKZ,gBAHnB;AAII,MAAA,MAAM,EAAEa,WAAW,iBACf;AAAQ,QAAA,SAAS,EAAC,wBAAlB;AAA2C,QAAA,OAAO,EAAEA,WAAW,CAACC,OAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,GAAG,EAAEC,OAAO,CAAC,sCAAD,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,gDALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANJ;AAiBA,wBACG,0CACMH,QADN,CADH;AAKH;;AAjEuC;;AAoE5C,eAAexB,OAAO,GAAGD,UAAU,CAACI,mBAAD,CAAb,CAAtB","sourcesContent":["import React, { Component } from 'react';\r\nimport './FacebookLoginButton.scss'\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { loginByFaceGoogle, storeInfoForRegister } from '../../actions/user_action'\r\n\r\nclass FacebookLoginButton extends Component {\r\n\r\n    state = {\r\n        authFailed: false,\r\n        name: \"\",\r\n        email: \"\",\r\n        picture: \"\",\r\n    }\r\n\r\n    componentClicked = () =>{\r\n        console.log(\"Facebook Authentication\");\r\n    }\r\n\r\n    responseFacebook = (response) =>{\r\n        if (response) {\r\n            console.log(response);\r\n            this.props.dispatch(loginByFaceGoogle(response.email))\r\n            .then(res => {\r\n                if (res.payload.loginSuccess) {\r\n                    this.props.history.push('/newfeed')\r\n                }else {\r\n                    console.log(response)\r\n                    // let data = {\r\n                    //     name: response.name,\r\n                    //     email: response.email,\r\n                    //     picture: response.image.url,\r\n                    // }\r\n                    // this.props.dispatch(storeInfoForRegister(data));\r\n                    // this.props.history.push('/register');\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            console.log(response)\r\n        }\r\n    }\r\n\r\n    responseGoogle = (response) =>  {\r\n        console.log(response)\r\n    }\r\n\r\n    render() {\r\n        let template;\r\n        this.state.authFailed?\r\n            template =(\r\n                <div>\r\n                </div>\r\n            )\r\n        : template = (\r\n            <FacebookLogin\r\n                appId=\"413244283385621\"\r\n                fields=\"name,email,picture\"\r\n                callback={this.responseFacebook}\r\n                render={renderProps => (\r\n                    <button className='facebook_signin_button' onClick={renderProps.onClick}>\r\n                        <img src={require('../../asset/login-page/fb_Icon2x.png')} />Đăng nhập bằng Facebook\r\n                    </button>\r\n                )}\r\n            />\r\n        );\r\n        return (\r\n           <>\r\n                {template}\r\n           </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect()(withRouter(FacebookLoginButton));"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\ultils\\\\card.js\";\nimport React, { Component } from \"react\";\nimport \"./card.scss\";\nimport ImageLightBox from \"./ImageLightBox\";\nimport { connect } from \"react-redux\";\nimport { likePost, unlikePost, makeComment, hidePost, deletePost, savePost, unSavePost } from \"../../actions/product_actions\";\nimport { unfollow, follow } from \"../../actions/user_action\";\nimport { getTagId } from \"../../actions/tag_actions\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport AvatarGroup from \"@material-ui/lab/AvatarGroup\";\nimport NativeClickListener from \"../ultils/NativeClickListener\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Report from \"../Report/Report\";\nimport { getPolicy } from \"../../actions/policy_actions\";\nimport Slide from \"@material-ui/core/Slide\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport PostEdit from \"../PostEdit/index\";\nimport { Button } from \"@material-ui/core\";\nimport { CircleX } from \"tabler-icons-react\";\nimport moment from \"moment\";\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return /*#__PURE__*/React.createElement(Slide, Object.assign({\n    direction: \"up\",\n    ref: ref\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 10\n    }\n  }));\n});\n\nclass Card extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      buttons: [{\n        name: \"Like\",\n        linkTo: \"/\"\n      }, {\n        name: \"Comment\",\n        linkTo: \"/postDetail\"\n      }, {\n        name: \"Pin\",\n        linkTo: \"\"\n      }],\n      lightbox: false,\n      lightboxImages: [],\n      dropdown: false,\n      reportData: {},\n      tags: [],\n      DialogShowing: false,\n      dialogType: \"\",\n      showEditor: false,\n      reportData: {},\n      setSnack: false,\n      setfollowerDiaglog: false,\n      alertFunctionIsRestricted: false,\n      restrictedFunction: {}\n    };\n\n    this.handlelightBox = () => {\n      if (this.props.images) {\n        this.setState({\n          lightbox: true\n        });\n      }\n    };\n\n    this.handlelightBoxClose = () => {\n      this.setState({\n        lightbox: false\n      });\n    };\n\n    this.showUser = users => {\n      return users.map((item, i) => /*#__PURE__*/React.createElement(Avatar, {\n        className: \"userlike_avt\",\n        alt: item.userName,\n        src: item.avt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 7\n        }\n      }));\n    };\n\n    this.showComments = comments => {\n      let commentsToShow = [];\n      commentsToShow.push(comments[0]);\n      commentsToShow.push(comments[1]);\n      return commentsToShow.map((item, i) => item ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"comment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        onClick: () => {\n          this.props.history.push(`/user/${item.postedBy[0]._id}`);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }\n      }, item.postedBy[0].userName), \" \", item.content) : null);\n    };\n\n    this.makeComment = (postId, event) => {\n      event.preventDefault();\n      event.persist();\n      console.log(postId, event.target[0].value);\n      this.props.dispatch(makeComment(postId, event.target[0].value)).then(response => {\n        if (response.payload.restricted) {\n          console.log(response.payload);\n          this.setState({\n            alertFunctionIsRestricted: true,\n            restrictedFunction: response.payload.restrictedFunction\n          });\n        } else {\n          console.log(event.target[0].value);\n          event.target[0].value = \"\";\n        }\n      });\n    };\n\n    this.openEditor = () => {\n      this.setState({\n        showEditor: !this.state.showEditor\n      });\n      this.toggleDropdown();\n    };\n\n    this.closeEditor = () => {\n      let hashtag = this.findHashtags(this.props.description);\n      getTagId(hashtag).then(response => {\n        this.setState({\n          tags: [...response]\n        });\n      });\n      this.setState({\n        showEditor: !this.state.showEditor\n      });\n    };\n\n    this.handleClickunfollow = async id => {\n      await this.props.dispatch(unfollow(id));\n      this.props.handleSnackBar(\"Đã bỏ theo dõi\");\n    };\n\n    this.handleClickfollow = async id => {\n      await this.props.dispatch(follow(id));\n      this.props.handleSnackBar(\"Đã theo dõi\");\n    };\n\n    this.defaultLink = (item, i) => {\n      switch (item.name) {\n        case \"Like\":\n          const liked = this.props.likes.filter(item => item._id === this.props.user.userData._id);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 11\n            }\n          }, liked[0] ? /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(unlikePost(this.props._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require(\"../../asset/newfeed_page/active_like_icon2x.png\"),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }\n          }) : /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(likePost(this.props._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require(\"../../asset/newfeed_page/like_icon2x.png\"),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }\n          }));\n\n        case \"Comment\":\n          return /*#__PURE__*/React.createElement(\"div\", {\n            onClick: () => {\n              this.props.history.push(`/postDetail/${this.props._id}`);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            src: require(\"../../asset/newfeed_page/comment_icon2x.png\"),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 13\n            }\n          }));\n\n        case \"Pin\":\n          const saved = this.props.user.userData.saved.filter(item => item == this.props._id);\n          console.log(saved);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 11\n            }\n          }, saved[0] ? /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(unSavePost(this.props._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require(\"../../asset/newfeed_page/stored_icon2x.png\"),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }\n          }) : /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(savePost(this.props._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require(\"../../asset/newfeed_page/store_icon2x.png\"),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }\n          }));\n      }\n    };\n\n    this.showLinks = () => {\n      let list = [];\n      return this.state.buttons.map((item, i) => {\n        return this.defaultLink(item, i);\n      });\n    };\n\n    this.toggleDropdown = syntheticEvent => {\n      console.log(\"toggle dropdown\");\n      this.setState(prevState => ({\n        dropdown: !prevState.dropdown\n      }));\n    };\n\n    this.handleBodyClick = syntheticEvent => {\n      console.log(\"body click\");\n    };\n\n    this.findTagId = tag => {\n      alert(\"tag\");\n    };\n\n    this.setSnack = () => {\n      this.setState({\n        setSnack: true\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.images) {\n      let lightboxImages = [];\n      this.props.images.forEach(item => {\n        lightboxImages.push(item.url);\n      });\n      this.setState({\n        lightboxImages\n      });\n    }\n\n    let hashtag = this.findHashtags(this.props.description);\n    getTagId(hashtag).then(response => {\n      this.setState({\n        tags: [...response]\n      });\n    });\n    this.props.dispatch(getPolicy());\n  }\n\n  renderCardImage(images) {\n    if (images.length > 0) {\n      return images[0].url;\n    } else {\n      return \"https://cdn.shopify.com/s/files/1/0013/3529/6118/products/Terracotta-Pot-6_Sansevieria-Zeylanica-6.jpg?v=1544979697\";\n    }\n  }\n\n  postedDate(day) {\n    console.log(day);\n    day = parseInt(day);\n    console.log(typeof day);\n\n    if (day == 0) {\n      return \"Hôm nay\";\n    } else if (day < 30) {\n      return day + \" ngày\";\n    } else if (day > 30) {\n      console.log(day);\n      return Math.floor(day / 7) + \"tuần\";\n    } else if (day > 365) {\n      console.log(day);\n      return Math.floor(day / 365) + \"năm\";\n    }\n  }\n\n  findHashtags(Text) {\n    var regexp = /\\B\\#\\w\\w+\\b/g;\n    let result = Text.match(regexp);\n\n    if (result) {\n      let tags = [];\n      result.forEach(item => {\n        tags.push(item.slice(1));\n      });\n      return tags;\n    } else {\n      return false;\n    }\n  }\n\n  handleDescription(description, userTag, locationName) {\n    console.log(this.state.tags);\n    let hashtag = [];\n    this.state.tags.forEach(item => description = description.replace(\"#\" + item.name, `<a href=\"tag/${item._id}\">${\"#\" + item.name}</a>`));\n\n    if (userTag.length > 0) {\n      description = description + \"<b>- cùng với </b>\";\n    }\n\n    userTag.forEach(item => {\n      if (!this.props.user.userData.blockedUsers.includes(item._id)) description += `<a href=\"/user/${item._id}\"}>@${item.userName}</a> `;\n    });\n\n    if (locationName) {\n      description += ` <b>- tại <b> <a href=\"/location/${locationName}\"> ${locationName} </a>`;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: description\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 12\n      }\n    });\n  }\n\n  closeReportForm() {\n    this.setState({\n      DialogShowing: false,\n      reportData: {}\n    });\n  }\n\n  confirmDialog(type) {\n    switch (type) {\n      case \"report\":\n        {\n          return /*#__PURE__*/React.createElement(Report, {\n            isReportFormShow: this.state.DialogShowing,\n            reportData: this.state.reportData,\n            list: this.props.policies.policyList,\n            handleSnackBar: mess => {\n              this.props.handleSnackBar(mess);\n            },\n            closeReportForm: () => this.closeReportForm(),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 11\n            }\n          });\n        }\n\n      case \"delete\":\n        {\n          return /*#__PURE__*/React.createElement(Dialog, {\n            open: this.state.DialogShowing,\n            TransitionComponent: Transition,\n            keepMounted: true,\n            onClose: () => {\n              this.setState({\n                DialogShowing: false\n              });\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"deleteConfirm\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 13\n            }\n          }, /*#__PURE__*/React.createElement(\"h5\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }\n          }, \" B\\u1EA1n ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a b\\xE0i vi\\u1EBFt n\\xE0y?\"), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"btn_wrapper\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"p\", {\n            className: \"cancel_btn\",\n            onClick: () => this.setState({\n              DialogShowing: false\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }\n          }, \"H\\u1EE7y\"), /*#__PURE__*/React.createElement(\"p\", {\n            className: \"confirm_btn\",\n            onClick: () => this.props.dispatch(deletePost(this.props._id)).then(response => {\n              console.log(response);\n\n              if (response.payload.success) {\n                this.props.handleSnackBar(\"Đã xóa bài viết\");\n                this.closeReportForm();\n              } else {\n                this.closeReportForm();\n                alert(\"đã xãy ra lỗi\");\n              }\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }\n          }, \"X\\xF3a\"))));\n        }\n\n      default:\n        {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 16\n            }\n          });\n        }\n    }\n  }\n\n  render() {\n    const props = this.props;\n    const userProfile = this.props.likes;\n    const yourProfile = this.props.user.userData;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: `${props.grid}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_item_wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_action_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user_info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: props.postedBy[0].avt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"userName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/user/${props.postedBy[0]._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 19\n      }\n    }, props.postedBy[0].userName), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 19\n      }\n    }, this.postedDate(props.dateDifference)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: `advance_button ${this.state.dropdown ? \"active_dropbox\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: this.toggleDropdown,\n      src: require(\"../../asset/headerIcon/advance_button2x.png\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 17\n      }\n    }), this.state.dropdown ? /*#__PURE__*/React.createElement(NativeClickListener, {\n      onClick: () => this.setState({\n        dropdown: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown\",\n      onClick: this.handleBodyClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: () => this.props.dispatch(hidePost(this.props._id)).then(() => {\n        this.props.handleSnackBar(\"Đã ẩn bài viết\");\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 25\n      }\n    }, \"\\u1EA8n\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/postDetail/${this.props._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 25\n      }\n    }, \"chi ti\\u1EBFt b\\xE0i vi\\u1EBFt\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 23\n      }\n    }), props.postedBy[0]._id === this.props.user.userData._id ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 27\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: this.openEditor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 29\n      }\n    }, \"Ch\\u1EC9nh s\\u1EEDa\"))) : \"\", /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 23\n      }\n    }), props.postedBy[0]._id === this.props.user.userData._id ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"delete_button\",\n      onClick: () => {\n        this.setState({\n          DialogShowing: true,\n          dialogType: \"delete\"\n        });\n        console.log(this.state.DialogShowing);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 27\n      }\n    }, \"X\\xF3a\")) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"report_button\",\n      onClick: () => {\n        this.setState({\n          DialogShowing: true,\n          dialogType: \"report\",\n          reportData: {\n            reportType: \"post\",\n            post: props._id\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 27\n      }\n    }, \"B\\xE1o c\\xE1o\")))) : null)), this.state.showEditor ? /*#__PURE__*/React.createElement(PostEdit, {\n      locationName: props.locationName,\n      description: props.description,\n      close: this.closeEditor,\n      handleSnackBar: mess => {\n        this.props.handleSnackBar(mess);\n      },\n      ActionType: \"newFeed\",\n      userTag: props.userTag,\n      postId: props._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 15\n      }\n    }, this.handleDescription(props.description, props.userTag, props.locationName)), /*#__PURE__*/React.createElement(\"img\", {\n      onClick: () => this.handlelightBox(),\n      className: \"item_image\",\n      src: this.renderCardImage(props.images),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button_wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 13\n      }\n    }, this.showLinks()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"likes\",\n      onClick: () => {\n        this.setState({\n          setfollowerDiaglog: true\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AvatarGroup, {\n      max: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 15\n      }\n    }, this.showUser(props.likes)), props.likes.length ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 37\n      }\n    }, \" \\u0110\\xE3 th\\xEDch b\\xE0i vi\\u1EBFt \") : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment_list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 13\n      }\n    }, props.comments.length > 2 ? /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: () => {\n        this.props.history.push(`/postDetail/${this.props._id}`);\n      },\n      className: \"view_more_cmt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 17\n      }\n    }, `Xem thêm bình luận`) : null, props.comments[0].content ? this.showComments(props.comments) : null), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"comment_form\",\n      onSubmit: event => this.makeComment(props._id, event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: props.user.userData.avt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment_input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Nh\\u1EADp h\\xECnh lu\\u1EADn....\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"send_button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(Dialog, {\n      className: \"dialog_cont\",\n      onClose: () => {\n        this.setState({\n          setfollowerDiaglog: false\n        });\n      },\n      open: this.state.setfollowerDiaglog,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dialog_header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 13\n      }\n    }, \"Danh s\\xE1ch \\u0111ang theo d\\xF5i\"), /*#__PURE__*/React.createElement(CircleX, {\n      size: 24,\n      strokeWidth: 0.5,\n      color: \"black\",\n      onClick: () => {\n        this.setState({\n          setfollowerDiaglog: false\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 13\n      }\n    })), userProfile ? userProfile.map(item => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"follow_list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list_info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: item.avt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(Link, {\n        to: `/user/${item._id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 23\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 25\n        }\n      }, item.userName))), yourProfile ? yourProfile.followings.includes(item._id) ? /*#__PURE__*/React.createElement(Button, {\n        className: \"minibtn\",\n        onClick: () => this.handleClickunfollow(item._id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 25\n        }\n      }, \" \", \"\\u0110ang theo d\\xF5i\") : /*#__PURE__*/React.createElement(Button, {\n        className: \"minibtn\",\n        onClick: () => this.handleClickfollow(item._id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 25\n        }\n      }, \"Theo d\\xF5i\") : null);\n    }) : \"\"), /*#__PURE__*/React.createElement(Dialog, {\n      className: \"dialog_cont\",\n      onClose: () => {\n        this.setState({\n          alertFunctionIsRestricted: false\n        });\n      },\n      open: this.state.alertFunctionIsRestricted,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dialog_header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 13\n      }\n    }, \"Ba\\u0323n \\u0111a\\u0303 bi\\u0323 ha\\u0323n ch\\xEA\\u0301 ch\\u01B0\\u0301c n\\u0103ng na\\u0300y cho \\u0111\\xEA\\u0301n\", \" \", moment(this.state.restrictedFunction.amountOfTime).format(\"L\")))), this.state.lightbox ? /*#__PURE__*/React.createElement(ImageLightBox, {\n      id: props._id,\n      images: this.state.lightboxImages,\n      open: this.state.lightbox,\n      pos: 0,\n      onclose: () => this.handlelightBoxClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 11\n      }\n    }) : null, this.confirmDialog(this.state.dialogType));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    policies: state.policies\n  };\n};\n\nexport default connect(mapStateToProps)(withRouter(Card));","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/ultils/card.js"],"names":["React","Component","ImageLightBox","connect","likePost","unlikePost","makeComment","hidePost","deletePost","savePost","unSavePost","unfollow","follow","getTagId","Avatar","AvatarGroup","NativeClickListener","Link","withRouter","Report","getPolicy","Slide","Dialog","PostEdit","Button","CircleX","moment","Transition","forwardRef","props","ref","Card","state","buttons","name","linkTo","lightbox","lightboxImages","dropdown","reportData","tags","DialogShowing","dialogType","showEditor","setSnack","setfollowerDiaglog","alertFunctionIsRestricted","restrictedFunction","handlelightBox","images","setState","handlelightBoxClose","showUser","users","map","item","i","userName","avt","showComments","comments","commentsToShow","push","history","postedBy","_id","content","postId","event","preventDefault","persist","console","log","target","value","dispatch","then","response","payload","restricted","openEditor","toggleDropdown","closeEditor","hashtag","findHashtags","description","handleClickunfollow","id","handleSnackBar","handleClickfollow","defaultLink","liked","likes","filter","user","userData","require","saved","showLinks","list","syntheticEvent","prevState","handleBodyClick","findTagId","tag","alert","componentDidMount","forEach","url","renderCardImage","length","postedDate","day","parseInt","Math","floor","Text","regexp","result","match","slice","handleDescription","userTag","locationName","replace","blockedUsers","includes","__html","closeReportForm","confirmDialog","type","policies","policyList","mess","success","render","userProfile","yourProfile","grid","dateDifference","reportType","post","followings","amountOfTime","format","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./card.scss\";\r\nimport ImageLightBox from \"./ImageLightBox\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  likePost,\r\n  unlikePost,\r\n  makeComment,\r\n  hidePost,\r\n  deletePost,\r\n  savePost,\r\n  unSavePost,\r\n} from \"../../actions/product_actions\";\r\nimport { unfollow, follow } from \"../../actions/user_action\";\r\nimport { getTagId } from \"../../actions/tag_actions\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport AvatarGroup from \"@material-ui/lab/AvatarGroup\";\r\nimport NativeClickListener from \"../ultils/NativeClickListener\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport Report from \"../Report/Report\";\r\nimport { getPolicy } from \"../../actions/policy_actions\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport PostEdit from \"../PostEdit/index\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { CircleX } from \"tabler-icons-react\";\r\nimport moment from \"moment\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nclass Card extends Component {\r\n  state = {\r\n    buttons: [\r\n      {\r\n        name: \"Like\",\r\n        linkTo: \"/\",\r\n      },\r\n      {\r\n        name: \"Comment\",\r\n        linkTo: \"/postDetail\",\r\n      },\r\n      {\r\n        name: \"Pin\",\r\n        linkTo: \"\",\r\n      },\r\n    ],\r\n\r\n    lightbox: false,\r\n    lightboxImages: [],\r\n    dropdown: false,\r\n\r\n    reportData: {},\r\n\r\n    tags: [],\r\n\r\n    DialogShowing: false,\r\n    dialogType: \"\",\r\n\r\n    showEditor: false,\r\n\r\n    reportData: {},\r\n    setSnack: false,\r\n\r\n    setfollowerDiaglog: false,\r\n    alertFunctionIsRestricted: false,\r\n\r\n    restrictedFunction: {},\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.images) {\r\n      let lightboxImages = [];\r\n\r\n      this.props.images.forEach((item) => {\r\n        lightboxImages.push(item.url);\r\n      });\r\n      this.setState({\r\n        lightboxImages,\r\n      });\r\n    }\r\n    let hashtag = this.findHashtags(this.props.description);\r\n    getTagId(hashtag).then((response) => {\r\n      this.setState({ tags: [...response] });\r\n    });\r\n    this.props.dispatch(getPolicy());\r\n  }\r\n\r\n  handlelightBox = () => {\r\n    if (this.props.images) {\r\n      this.setState({\r\n        lightbox: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  handlelightBoxClose = () => {\r\n    this.setState({\r\n      lightbox: false,\r\n    });\r\n  };\r\n\r\n  renderCardImage(images) {\r\n    if (images.length > 0) {\r\n      return images[0].url;\r\n    } else {\r\n      return \"https://cdn.shopify.com/s/files/1/0013/3529/6118/products/Terracotta-Pot-6_Sansevieria-Zeylanica-6.jpg?v=1544979697\";\r\n    }\r\n  }\r\n\r\n  showUser = (users) => {\r\n    return users.map((item, i) => (\r\n      <Avatar className=\"userlike_avt\" alt={item.userName} src={item.avt} />\r\n    ));\r\n  };\r\n\r\n  showComments = (comments) => {\r\n    let commentsToShow = [];\r\n    commentsToShow.push(comments[0]);\r\n    commentsToShow.push(comments[1]);\r\n    return commentsToShow.map((item, i) =>\r\n      item ? (\r\n        <div className=\"comment\">\r\n          <h6\r\n            onClick={() => {\r\n              this.props.history.push(`/user/${item.postedBy[0]._id}`);\r\n            }}\r\n          >\r\n            {item.postedBy[0].userName}\r\n          </h6>{\" \"}\r\n          {item.content}\r\n        </div>\r\n      ) : null\r\n    );\r\n  };\r\n\r\n  makeComment = (postId, event) => {\r\n    event.preventDefault();\r\n    event.persist();\r\n    console.log(postId, event.target[0].value);\r\n    this.props\r\n      .dispatch(makeComment(postId, event.target[0].value))\r\n      .then((response) => {\r\n        if (response.payload.restricted) {\r\n          console.log(response.payload);\r\n          this.setState({\r\n            alertFunctionIsRestricted: true,\r\n            restrictedFunction: response.payload.restrictedFunction,\r\n          });\r\n        } else {\r\n          console.log(event.target[0].value);\r\n          event.target[0].value = \"\";\r\n        }\r\n      });\r\n  };\r\n\r\n  openEditor = () => {\r\n    this.setState({ showEditor: !this.state.showEditor });\r\n    this.toggleDropdown();\r\n  };\r\n\r\n  closeEditor = () => {\r\n    let hashtag = this.findHashtags(this.props.description);\r\n    getTagId(hashtag).then((response) => {\r\n      this.setState({ tags: [...response] });\r\n    });\r\n    this.setState({ showEditor: !this.state.showEditor });\r\n  };\r\n\r\n  handleClickunfollow = async (id) => {\r\n    await this.props.dispatch(unfollow(id));\r\n    this.props.handleSnackBar(\"Đã bỏ theo dõi\");\r\n  };\r\n\r\n  handleClickfollow = async (id) => {\r\n    await this.props.dispatch(follow(id));\r\n    this.props.handleSnackBar(\"Đã theo dõi\");\r\n  };\r\n\r\n  defaultLink = (item, i) => {\r\n    switch (item.name) {\r\n      case \"Like\":\r\n        const liked = this.props.likes.filter(\r\n          (item) => item._id === this.props.user.userData._id\r\n        );\r\n        return (\r\n          <div>\r\n            {liked[0] ? (\r\n              <img\r\n                onClick={() =>\r\n                  this.props\r\n                    .dispatch(unlikePost(this.props._id))\r\n                    .then((response) => {\r\n                      if (response.payload.restricted) {\r\n                        console.log(response.payload);\r\n                        this.setState({\r\n                          alertFunctionIsRestricted: true,\r\n                          restrictedFunction:\r\n                            response.payload.restrictedFunction,\r\n                        });\r\n                      }\r\n                    })\r\n                }\r\n                src={require(\"../../asset/newfeed_page/active_like_icon2x.png\")}\r\n              />\r\n            ) : (\r\n              <img\r\n                onClick={() =>\r\n                  this.props\r\n                    .dispatch(likePost(this.props._id))\r\n                    .then((response) => {\r\n                      if (response.payload.restricted) {\r\n                        console.log(response.payload);\r\n                        this.setState({\r\n                          alertFunctionIsRestricted: true,\r\n                          restrictedFunction:\r\n                            response.payload.restrictedFunction,\r\n                        });\r\n                      }\r\n                    })\r\n                }\r\n                src={require(\"../../asset/newfeed_page/like_icon2x.png\")}\r\n              />\r\n            )}\r\n          </div>\r\n        );\r\n      case \"Comment\":\r\n        return (\r\n          <div\r\n            onClick={() => {\r\n              this.props.history.push(`/postDetail/${this.props._id}`);\r\n            }}\r\n          >\r\n            <img src={require(\"../../asset/newfeed_page/comment_icon2x.png\")} />\r\n          </div>\r\n        );\r\n      case \"Pin\":\r\n        const saved = this.props.user.userData.saved.filter(\r\n          (item) => item == this.props._id\r\n        );\r\n        console.log(saved);\r\n        return (\r\n          <div>\r\n            {saved[0] ? (\r\n              <img\r\n                onClick={() =>\r\n                  this.props\r\n                    .dispatch(unSavePost(this.props._id))\r\n                    .then((response) => {\r\n                      if (response.payload.restricted) {\r\n                        console.log(response.payload);\r\n                        this.setState({\r\n                          alertFunctionIsRestricted: true,\r\n                          restrictedFunction:\r\n                            response.payload.restrictedFunction,\r\n                        });\r\n                      }\r\n                    })\r\n                }\r\n                src={require(\"../../asset/newfeed_page/stored_icon2x.png\")}\r\n              />\r\n            ) : (\r\n              <img\r\n                onClick={() =>\r\n                  this.props\r\n                    .dispatch(savePost(this.props._id))\r\n                    .then((response) => {\r\n                      if (response.payload.restricted) {\r\n                        console.log(response.payload);\r\n                        this.setState({\r\n                          alertFunctionIsRestricted: true,\r\n                          restrictedFunction:\r\n                            response.payload.restrictedFunction,\r\n                        });\r\n                      }\r\n                    })\r\n                }\r\n                src={require(\"../../asset/newfeed_page/store_icon2x.png\")}\r\n              />\r\n            )}\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  showLinks = () => {\r\n    let list = [];\r\n    return this.state.buttons.map((item, i) => {\r\n      return this.defaultLink(item, i);\r\n    });\r\n  };\r\n\r\n  toggleDropdown = (syntheticEvent) => {\r\n    console.log(\"toggle dropdown\");\r\n    this.setState((prevState) => ({ dropdown: !prevState.dropdown }));\r\n  };\r\n\r\n  handleBodyClick = (syntheticEvent) => {\r\n    console.log(\"body click\");\r\n  };\r\n\r\n  postedDate(day) {\r\n    console.log(day);\r\n    day = parseInt(day);\r\n    console.log(typeof day);\r\n    if (day == 0) {\r\n      return \"Hôm nay\";\r\n    } else if (day < 30) {\r\n      return day + \" ngày\";\r\n    } else if (day > 30) {\r\n      console.log(day);\r\n      return Math.floor(day / 7) + \"tuần\";\r\n    } else if (day > 365) {\r\n      console.log(day);\r\n      return Math.floor(day / 365) + \"năm\";\r\n    }\r\n  }\r\n\r\n  findHashtags(Text) {\r\n    var regexp = /\\B\\#\\w\\w+\\b/g;\r\n    let result = Text.match(regexp);\r\n    if (result) {\r\n      let tags = [];\r\n      result.forEach((item) => {\r\n        tags.push(item.slice(1));\r\n      });\r\n      return tags;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  findTagId = (tag) => {\r\n    alert(\"tag\");\r\n  };\r\n\r\n  handleDescription(description, userTag, locationName) {\r\n    console.log(this.state.tags);\r\n    let hashtag = [];\r\n\r\n    this.state.tags.forEach(\r\n      (item) =>\r\n        (description = description.replace(\r\n          \"#\" + item.name,\r\n          `<a href=\"tag/${item._id}\">${\"#\" + item.name}</a>`\r\n        ))\r\n    );\r\n    if (userTag.length > 0) {\r\n      description = description + \"<b>- cùng với </b>\";\r\n    }\r\n    userTag.forEach((item) => {\r\n      if (!this.props.user.userData.blockedUsers.includes(item._id))\r\n        description += `<a href=\"/user/${item._id}\"}>@${item.userName}</a> `;\r\n    });\r\n    if (locationName) {\r\n      description += ` <b>- tại <b> <a href=\"/location/${locationName}\"> ${locationName} </a>`;\r\n    }\r\n    return <div dangerouslySetInnerHTML={{ __html: description }} />;\r\n  }\r\n\r\n  closeReportForm() {\r\n    this.setState({\r\n      DialogShowing: false,\r\n      reportData: {},\r\n    });\r\n  }\r\n\r\n  confirmDialog(type) {\r\n    switch (type) {\r\n      case \"report\": {\r\n        return (\r\n          <Report\r\n            isReportFormShow={this.state.DialogShowing}\r\n            reportData={this.state.reportData}\r\n            list={this.props.policies.policyList}\r\n            handleSnackBar={(mess) => {\r\n              this.props.handleSnackBar(mess);\r\n            }}\r\n            closeReportForm={() => this.closeReportForm()}\r\n          />\r\n        );\r\n      }\r\n      case \"delete\": {\r\n        return (\r\n          <Dialog\r\n            open={this.state.DialogShowing}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={() => {\r\n              this.setState({ DialogShowing: false });\r\n            }}\r\n          >\r\n            <div className=\"deleteConfirm\">\r\n              <h5> Bạn chắc chắn muốn xóa bài viết này?</h5>\r\n              <div className=\"btn_wrapper\">\r\n                <p\r\n                  className=\"cancel_btn\"\r\n                  onClick={() => this.setState({ DialogShowing: false })}\r\n                >\r\n                  Hủy\r\n                </p>\r\n                <p\r\n                  className=\"confirm_btn\"\r\n                  onClick={() =>\r\n                    this.props\r\n                      .dispatch(deletePost(this.props._id))\r\n                      .then((response) => {\r\n                        console.log(response);\r\n                        if (response.payload.success) {\r\n                          this.props.handleSnackBar(\"Đã xóa bài viết\");\r\n                          this.closeReportForm();\r\n                        } else {\r\n                          this.closeReportForm();\r\n                          alert(\"đã xãy ra lỗi\");\r\n                        }\r\n                      })\r\n                  }\r\n                >\r\n                  Xóa\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </Dialog>\r\n        );\r\n      }\r\n      default: {\r\n        return <div></div>;\r\n      }\r\n    }\r\n  }\r\n\r\n  setSnack = () => {\r\n    this.setState({ setSnack: true });\r\n  };\r\n\r\n  render() {\r\n    const props = this.props;\r\n    const userProfile = this.props.likes;\r\n    const yourProfile = this.props.user.userData;\r\n    return (\r\n      <div className={`${props.grid}`}>\r\n        <div className=\"card_item_wrapper\">\r\n          <div className=\"card_action_container\">\r\n            <div className=\"card_row\">\r\n              <div className=\"user_info\">\r\n                <div className=\"avt\">\r\n                  <img src={props.postedBy[0].avt} />\r\n                </div>\r\n                <div className=\"userName\">\r\n                  <Link to={`/user/${props.postedBy[0]._id}`}>\r\n                    {props.postedBy[0].userName}\r\n                  </Link>\r\n                  <p>{this.postedDate(props.dateDifference)}</p>\r\n                </div>\r\n              </div>\r\n              <div\r\n                className={`advance_button ${\r\n                  this.state.dropdown ? \"active_dropbox\" : \"\"\r\n                }`}\r\n              >\r\n                <img\r\n                  onClick={this.toggleDropdown}\r\n                  src={require(\"../../asset/headerIcon/advance_button2x.png\")}\r\n                />\r\n                {this.state.dropdown ? (\r\n                  <NativeClickListener\r\n                    onClick={() => this.setState({ dropdown: false })}\r\n                  >\r\n                    <div className=\"dropdown\" onClick={this.handleBodyClick}>\r\n                      <div>\r\n                        <p\r\n                          onClick={() =>\r\n                            this.props\r\n                              .dispatch(hidePost(this.props._id))\r\n                              .then(() => {\r\n                                this.props.handleSnackBar(\"Đã ẩn bài viết\");\r\n                              })\r\n                          }\r\n                        >\r\n                          Ẩn\r\n                        </p>\r\n                      </div>\r\n                      <hr />\r\n                      <div>\r\n                        <Link to={`/postDetail/${this.props._id}`}>\r\n                          chi tiết bài viết\r\n                        </Link>\r\n                      </div>\r\n                      <hr />\r\n                      {props.postedBy[0]._id ===\r\n                      this.props.user.userData._id ? (\r\n                        <>\r\n                          <hr />\r\n                          <div>\r\n                            <p onClick={this.openEditor}>Chỉnh sửa</p>\r\n                          </div>\r\n                        </>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                      <hr />\r\n                      {props.postedBy[0]._id ===\r\n                      this.props.user.userData._id ? (\r\n                        <div>\r\n                          <p\r\n                            className=\"delete_button\"\r\n                            onClick={() => {\r\n                              this.setState({\r\n                                DialogShowing: true,\r\n                                dialogType: \"delete\",\r\n                              });\r\n                              console.log(this.state.DialogShowing);\r\n                            }}\r\n                          >\r\n                            Xóa\r\n                          </p>\r\n                        </div>\r\n                      ) : (\r\n                        <div>\r\n                          <p\r\n                            className=\"report_button\"\r\n                            onClick={() => {\r\n                              this.setState({\r\n                                DialogShowing: true,\r\n                                dialogType: \"report\",\r\n                                reportData: {\r\n                                  reportType: \"post\",\r\n                                  post: props._id,\r\n                                },\r\n                              });\r\n                            }}\r\n                          >\r\n                            Báo cáo\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </NativeClickListener>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n            {this.state.showEditor ? (\r\n              <PostEdit\r\n                locationName={props.locationName}\r\n                description={props.description}\r\n                close={this.closeEditor}\r\n                handleSnackBar={(mess) => {\r\n                  this.props.handleSnackBar(mess);\r\n                }}\r\n                ActionType=\"newFeed\"\r\n                userTag={props.userTag}\r\n                postId={props._id}\r\n              />\r\n            ) : (\r\n              <div className=\"description\">\r\n                {this.handleDescription(\r\n                  props.description,\r\n                  props.userTag,\r\n                  props.locationName\r\n                )}\r\n              </div>\r\n            )}\r\n            <img\r\n              onClick={() => this.handlelightBox()}\r\n              className=\"item_image\"\r\n              src={this.renderCardImage(props.images)}\r\n            />\r\n            <div className=\"button_wrapper\">{this.showLinks()}</div>\r\n            <div\r\n              className=\"likes\"\r\n              onClick={() => {\r\n                this.setState({ setfollowerDiaglog: true });\r\n              }}\r\n            >\r\n              <AvatarGroup max={3}>{this.showUser(props.likes)}</AvatarGroup>\r\n              {props.likes.length ? <p> Đã thích bài viết </p> : null}\r\n            </div>\r\n            <div className=\"comment_list\">\r\n              {props.comments.length > 2 ? (\r\n                <h6\r\n                  onClick={() => {\r\n                    this.props.history.push(`/postDetail/${this.props._id}`);\r\n                  }}\r\n                  className=\"view_more_cmt\"\r\n                >{`Xem thêm bình luận`}</h6>\r\n              ) : null}\r\n              {props.comments[0].content\r\n                ? this.showComments(props.comments)\r\n                : null}\r\n            </div>\r\n            <form\r\n              className=\"comment_form\"\r\n              onSubmit={(event) => this.makeComment(props._id, event)}\r\n            >\r\n              <div className=\"avt\">\r\n                <img src={props.user.userData.avt} />\r\n              </div>\r\n              <div className=\"comment_input\">\r\n                <input placeholder=\"Nhập hình luận....\" />\r\n              </div>\r\n              <div className=\"send_button\"></div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n        <Dialog\r\n          className=\"dialog_cont\"\r\n          onClose={() => {\r\n            this.setState({ setfollowerDiaglog: false });\r\n          }}\r\n          open={this.state.setfollowerDiaglog}\r\n        >\r\n          <div className=\"dialog_header\">\r\n            <h5>Danh sách đang theo dõi</h5>\r\n            <CircleX\r\n              size={24}\r\n              strokeWidth={0.5}\r\n              color=\"black\"\r\n              onClick={() => {\r\n                this.setState({ setfollowerDiaglog: false });\r\n              }}\r\n            ></CircleX>\r\n          </div>\r\n          {userProfile\r\n            ? userProfile.map((item) => {\r\n                return (\r\n                  <div className=\"follow_list\">\r\n                    <div className=\"list_info\">\r\n                      <img src={item.avt}></img>\r\n                      <Link to={`/user/${item._id}`}>\r\n                        {\" \"}\r\n                        <h2>{item.userName}</h2>\r\n                      </Link>\r\n                    </div>\r\n                    {yourProfile ? (\r\n                      yourProfile.followings.includes(item._id) ? (\r\n                        <Button\r\n                          className=\"minibtn\"\r\n                          onClick={() => this.handleClickunfollow(item._id)}\r\n                        >\r\n                          {\" \"}\r\n                          Đang theo dõi\r\n                        </Button>\r\n                      ) : (\r\n                        <Button\r\n                          className=\"minibtn\"\r\n                          onClick={() => this.handleClickfollow(item._id)}\r\n                        >\r\n                          Theo dõi\r\n                        </Button>\r\n                      )\r\n                    ) : null}\r\n                  </div>\r\n                );\r\n              })\r\n            : \"\"}\r\n        </Dialog>\r\n\r\n        <Dialog\r\n          className=\"dialog_cont\"\r\n          onClose={() => {\r\n            this.setState({ alertFunctionIsRestricted: false });\r\n          }}\r\n          open={this.state.alertFunctionIsRestricted}\r\n        >\r\n          <div className=\"dialog_header\">\r\n            <h5>\r\n              Bạn đã bị hạn chế chức năng này cho đến{\" \"}\r\n              {moment(this.state.restrictedFunction.amountOfTime).format(\"L\")}\r\n            </h5>\r\n          </div>\r\n        </Dialog>\r\n\r\n        {this.state.lightbox ? (\r\n          <ImageLightBox\r\n            id={props._id}\r\n            images={this.state.lightboxImages}\r\n            open={this.state.lightbox}\r\n            pos={0}\r\n            onclose={() => this.handlelightBoxClose()}\r\n          />\r\n        ) : null}\r\n        {this.confirmDialog(this.state.dialogType)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n    policies: state.policies,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(withRouter(Card));\r\n"]},"metadata":{},"sourceType":"module"}
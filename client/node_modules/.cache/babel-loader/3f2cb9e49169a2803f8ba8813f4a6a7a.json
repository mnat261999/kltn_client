{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\Header_Footer\\\\Header\\\\index.js\";\nimport React, { Component } from 'react';\nimport './header.scss';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { logoutUser, auth, acceptfollow, declinefollow } from '../../../actions/user_action';\nimport NativeClickListener from '../../ultils/NativeClickListener';\nimport { getConversation } from '../../../actions/message_action';\nimport { getNotification, seenNotification, seenAllNotification, disablenotification } from '../../../actions/notification_action';\nimport NotificationDetail from './notification';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Send, Notification, BrandSafari, User, Settings, Point } from 'tabler-icons-react';\nimport faUser from '@fortawesome/fontawesome-free-solid/faUser';\nimport faCog from '@fortawesome/fontawesome-free-solid/faCog';\nimport SearchBar from '../../Search';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport Pusher from 'pusher-js';\nimport Badge from '@material-ui/core/Badge';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport moment from 'moment';\nimport { Button } from '@material-ui/core';\n\nclass Header extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: [{\n        name: 'Explore',\n        linkTo: '/explore'\n      }, {\n        name: 'Direct',\n        linkTo: '/users/direct'\n      }, {\n        name: 'Notification',\n        linkTo: '/users/Notification'\n      }, {\n        name: 'avt'\n      }, {\n        name: 'Log in',\n        linkTo: '/register_login'\n      }],\n      dropdown: false,\n      notifydropdown: false,\n      setSnack: false,\n      notifycontent: '',\n      notifylink: '',\n      notifyimg: ''\n    };\n\n    this.logoutHandler = () => {\n      this.props.dispatch(logoutUser()).then(response => {\n        if (response.payload.success) {\n          this.props.history.push('/');\n        }\n      });\n    };\n\n    this.handleSeenall = () => {\n      this.props.dispatch(seenAllNotification());\n      this.props.dispatch(getNotification());\n    };\n\n    this.defaultLink = (item, i) => {\n      if (item.name === 'Log out') {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          to: item.linkTo,\n          key: i,\n          onClick: this.logoutHandler,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 21\n          }\n        }, item.name));\n      } else if (item.name === 'avt') {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"menu\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }\n        }, this.props.user.userData.avt ? /*#__PURE__*/React.createElement(\"img\", {\n          onClick: this.toggleDropdown,\n          className: \"avt\",\n          alt: \"photo\",\n          src: this.props.user.userData.avt,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 29\n          }\n        }) : /*#__PURE__*/React.createElement(Skeleton, {\n          variant: \"circle\",\n          width: 40,\n          height: 40,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 31\n          }\n        }), this.state.dropdown ? /*#__PURE__*/React.createElement(NativeClickListener, {\n          onClick: () => this.setState({\n            dropdown: false\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"dropdown\",\n          onClick: this.handleBodyClick,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"user_navigation\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(User, {\n          size: 22,\n          strokeWidth: 1.5,\n          color: \"grey\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 45\n          }\n        }), /*#__PURE__*/React.createElement(Link, {\n          to: `/user/${this.props.user.userData._id}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 45\n          }\n        }, \"Profile\")), /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(Settings, {\n          size: 22,\n          strokeWidth: 1.5,\n          color: \"grey\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 45\n          }\n        }), /*#__PURE__*/React.createElement(Link, {\n          to: `/profilesettings`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 45\n          }\n        }, \"Setting\"))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"logout\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          key: i,\n          onClick: this.logoutHandler,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 41\n          }\n        }, \"Log out\")))) : null);\n      } else if (item.name === 'Explore') {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          to: \"/explore\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(BrandSafari, {\n          size: 30,\n          color: \"grey\",\n          strokeWidth: 1,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }\n        })));\n      } else if (item.name === 'Notification') {\n        var notinumber = 0;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"notify\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 21\n          }\n        }, this.props.notification ? this.props.notification.notifylist ? this.props.notification.notifylist.length > 0 ? this.props.notification.notifylist.forEach(item => {\n          console.log(item.seenStatus);\n\n          if (!item.seenStatus) {\n            notinumber = notinumber + 1;\n          }\n        }) : '' : '' : '', /*#__PURE__*/React.createElement(Badge, {\n          badgeContent: notinumber,\n          overlap: \"circle\",\n          color: \"secondary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(Notification, {\n          onClick: this.toggleNofifyDropdown,\n          size: 34,\n          color: \"grey\",\n          strokeWidth: 1,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 29\n          }\n        }))), this.state.notifydropdown ? /*#__PURE__*/React.createElement(NativeClickListener, {\n          onClick: () => this.setState({\n            notifydropdown: false\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"notifydropdown\",\n          onClick: this.handleBodyClick,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"notifyheader\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 37\n          }\n        }, \" \", /*#__PURE__*/React.createElement(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 69\n          }\n        }, \"Th\\xF4ng b\\xE1o\"), \" \", /*#__PURE__*/React.createElement(\"h6\", {\n          onClick: this.handleSeenall,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 88\n          }\n        }, \"\\u0110\\xE1nh d\\u1EA5u t\\u1EA5t c\\u1EA3 \\u0111\\xE3 \\u0111\\u1ECDc\")), console.log(this.props.user), this.props.notification ? this.props.notification.notifylist ? this.props.notification.notifylist.map(data => {\n          return /*#__PURE__*/React.createElement(NotificationDetail, {\n            handleSeenNoti: this.handleSeenNoti,\n            handleDeleteNoti: this.handleDeleteNoti,\n            data: data,\n            acceptfollow: this.acceptfollow,\n            declinefollow: this.declinefollow,\n            handleNotiClick: this.handleNotiClick,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 49\n            }\n          });\n        }) : '' : '')) : null, /*#__PURE__*/React.createElement(Snackbar, {\n          anchorOrigin: {\n            vertical: 'bottom',\n            horizontal: 'right'\n          },\n          open: this.state.setSnack,\n          onClose: () => this.setState({\n            setSnack: false\n          }),\n          autoHideDuration: 10000,\n          direction: \"up\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 21\n          }\n        }, this.props.notification ? this.props.notification.notifylist ? this.props.notification.notifylist[0] ? /*#__PURE__*/React.createElement(\"div\", {\n          className: \"snack_noti\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"noti_wrapper\",\n          onClick: () => this.handleNotiClick(this.props.notification.notifylist[0]._id, this.props.notification.notifylist[0].type, this.props.notification.notifylist[0].link),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"user_avt\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: this.props.notification.notifylist[0].sentFrom.role == 0 ? this.props.notification.notifylist[0].sentFrom.avt : \"https://res.cloudinary.com/dlikyyfd1/image/upload/v1610771639/logo2x_lzjmtn.png\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 45\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"content\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 45\n          }\n        }, /*#__PURE__*/React.createElement(\"h6\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 49\n          }\n        }, this.props.notification.notifylist[0].sentFrom.userName), this.props.notification.notifylist[0].type == \"follow\" ? ' đã theo dõi bạn nè' : this.props.notification.notifylist[0].type == \"likepost\" ? ' đã thích bài viết của bạn' : this.props.notification.notifylist[0].type == \"comment\" ? ' đã bình luận về bài viết của bạn' : this.props.notification.notifylist[0].type == \"likecomment\" ? 'đã thích bình luận của bạn' : this.props.notification.notifylist[0].type == \"discardReport\" ? 'Báo cáo của bạn chưa phù hợp' : this.props.notification.notifylist[0].type == \"deletePost\" ? 'Bài viết của bạn đã vi phạm chính sách' : this.props.notification.notifylist[0].type == \"deleteComment\" ? 'Báo cáo của bạn đã vi phạm chính sách' : this.props.notification.notifylist[0].type == \"askfollow\" ? ' đã yêu cầu theo dõi bạn' : this.props.notification.notifylist[0].type == 'acceptfollow' ? ' đã chấp nhập lời theo dõi của bạn' : this.props.notification.notifylist[0].type == 'restrictUserFunction' ? ' đã hạn chế tính năng của bạn' : \"\"), /*#__PURE__*/React.createElement(\"h6\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 45\n          }\n        }, /*#__PURE__*/React.createElement(\"h6\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 49\n          }\n        }, moment(this.props.notification.notifylist[0].createdAt).fromNow(), \" \"))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"status\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(Point, {\n          visibility: \"hidden\",\n          size: 24,\n          strokeWidth: 5,\n          color: \"#7166F9\",\n          fill: \"#7166F9\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 45\n          }\n        })))) : '' : '' : ''));\n      } else if (item.name === 'Direct') {\n        var messnumber = 0;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 17\n          }\n        }, this.props.messages ? this.props.messages.grouplist ? this.props.messages.grouplist.forEach(con => {\n          //console.log(con.seenBy)\n          if (con.seenBy.includes(this.props.user.userData._id) == false) {\n            messnumber = messnumber + 1;\n          }\n        }) : '' : '', /*#__PURE__*/React.createElement(Badge, {\n          badgeContent: messnumber,\n          overlap: \"circle\",\n          color: \"secondary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          to: \"/message/inbox\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(Send, {\n          size: 30,\n          color: \"grey\",\n          strokeWidth: 1,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 51\n          }\n        }))));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          to: item.linkTo,\n          key: i,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 17\n          }\n        }));\n      }\n    };\n\n    this.componentDidMount = () => {\n      this.props.dispatch(auth());\n      this.props.dispatch(getConversation());\n      console.log(this.props.user.userData);\n      console.log(this.props.messages ? this.props.messages.conlist : '');\n      this.props.dispatch(getNotification());\n      console.log(this.props.notification ? this.props.notification.notifylist : '');\n      const pusher = new Pusher('c0e96b0fff8d0edac17d', {\n        cluster: 'mt1'\n      });\n      const channel = pusher.subscribe('notifications');\n      channel.bind('newNoti', data => {\n        if (data.change.operationType == \"insert\") {\n          if (data.change.fullDocument.sentTo == this.props.user.userData._id) {\n            this.props.dispatch(getNotification());\n            this.setState({\n              setSnack: true\n            });\n          }\n        }\n\n        if (data.change.operationType == \"update\") {\n          this.props.notification.notifylist.map(noti => {\n            if (noti._id == data.change ? data.change.fullDocument ? data.change.fullDocument._id : '' : '') {\n              this.props.dispatch(getNotification());\n              this.setState({\n                setSnack: true\n              });\n            }\n          });\n        }\n      });\n      const channel2 = pusher.subscribe('messages');\n      channel2.bind('newMessage', data => {\n        if (data.change.operationType == \"insert\") {\n          if (data.change.fullDocument.sentTo == this.props.user.userData._id || data.change.fullDocument.sentBy == this.props.user.userData._id) {\n            this.props.dispatch(getConversation());\n          }\n        }\n      });\n    };\n\n    this.toggleDropdown = syntheticEvent => {\n      console.log('toggle dropdown');\n      this.setState(prevState => ({\n        dropdown: !prevState.dropdown\n      }));\n    };\n\n    this.handleBodyClick = syntheticEvent => {\n      console.log('body click');\n    };\n\n    this.toggleNofifyDropdown = syntheticEvent => {\n      console.log('toggle dropdown');\n      this.setState(prevState => ({\n        notifydropdown: !prevState.notifydropdown\n      }));\n      this.props.dispatch(getNotification());\n      console.log(this.props.notification);\n    };\n\n    this.acceptfollow = async id => {\n      await this.props.dispatch(acceptfollow(id));\n      await this.props.dispatch(getNotification());\n    };\n\n    this.declinefollow = async id => {\n      await this.props.dispatch(declinefollow(id));\n      await this.props.dispatch(getNotification());\n    };\n\n    this.handleNotiClick = (id, type, link) => {\n      this.props.dispatch(seenNotification(id));\n      console.log('Đã xem thông báo', id);\n\n      if (type == 'follow') {\n        this.props.history.push(`/user/${link}`);\n      }\n\n      if (type == 'acceptfollow') {\n        this.props.history.push(`/user/${link}`);\n      }\n\n      if (type == 'likepost') {\n        this.props.history.push(`/postDetail/${link}`);\n      }\n\n      if (type == 'comment') {\n        this.props.history.push(`/postDetail/${link}`);\n      }\n\n      if (type == 'likecomment') {\n        this.props.history.push(`/postDetail/${link}`);\n      }\n\n      this.props.dispatch(getNotification());\n    };\n\n    this.handleDeleteNoti = async id => {\n      await this.props.dispatch(disablenotification(id));\n      await this.props.dispatch(getNotification());\n    };\n\n    this.handleSeenNoti = async id => {\n      await this.props.dispatch(seenNotification(id));\n      await this.props.dispatch(getNotification());\n    };\n\n    this.showLinks = type => {\n      let list = [];\n\n      if (this.props.user.userData) {\n        type.forEach(item => {\n          if (!this.props.user.userData.isAuth) {\n            if (item.name === 'Log in') {\n              list.push(item);\n            }\n          } else {\n            if (item.name !== 'Log in') {\n              list.push(item);\n            }\n          }\n        });\n      }\n\n      return list.map((item, i) => {\n        return this.defaultLink(item, i);\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"header\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header__container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-4 col-sm-4 col-4 no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header__logo\",\n      onClick: () => {\n        this.props.history.push('/newfeed');\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: require('../../../asset/logo/logo2x.png'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      class: \"Logo_stunn\",\n      src: require('../../../asset/logo/stunn2x.png'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-4 col-sm-4 col-1  no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header__nav-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(SearchBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-4 col-sm-4 col-7  no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header__nav-user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 29\n      }\n    }, this.showLinks(this.state.user))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    notification: state.notification,\n    messages: state.messages\n  };\n}\n\nexport default connect(mapStateToProps)(withRouter(Header));","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/Header_Footer/Header/index.js"],"names":["React","Component","Link","withRouter","connect","logoutUser","auth","acceptfollow","declinefollow","NativeClickListener","getConversation","getNotification","seenNotification","seenAllNotification","disablenotification","NotificationDetail","FontAwesomeIcon","Send","Notification","BrandSafari","User","Settings","Point","faUser","faCog","SearchBar","Skeleton","Pusher","Badge","Snackbar","moment","Button","Header","state","user","name","linkTo","dropdown","notifydropdown","setSnack","notifycontent","notifylink","notifyimg","logoutHandler","props","dispatch","then","response","payload","success","history","push","handleSeenall","defaultLink","item","i","userData","avt","toggleDropdown","setState","handleBodyClick","_id","notinumber","notification","notifylist","length","forEach","console","log","seenStatus","toggleNofifyDropdown","map","data","handleSeenNoti","handleDeleteNoti","handleNotiClick","vertical","horizontal","type","link","sentFrom","role","userName","createdAt","fromNow","messnumber","messages","grouplist","con","seenBy","includes","componentDidMount","conlist","pusher","cluster","channel","subscribe","bind","change","operationType","fullDocument","sentTo","noti","channel2","sentBy","syntheticEvent","prevState","id","showLinks","list","isAuth","render","require","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './header.scss'\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { logoutUser, auth, acceptfollow, declinefollow} from '../../../actions/user_action'\r\nimport NativeClickListener from '../../ultils/NativeClickListener';\r\nimport { getConversation } from '../../../actions/message_action'\r\nimport { getNotification, seenNotification, seenAllNotification,disablenotification } from '../../../actions/notification_action'\r\nimport NotificationDetail from './notification';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Send, Notification, BrandSafari, User, Settings, Point } from 'tabler-icons-react'\r\nimport faUser from '@fortawesome/fontawesome-free-solid/faUser';\r\nimport faCog from '@fortawesome/fontawesome-free-solid/faCog';\r\nimport SearchBar from '../../Search';\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\nimport Pusher from 'pusher-js';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport moment from 'moment'\r\nimport { Button } from '@material-ui/core';\r\nclass Header extends Component {\r\n\r\n    state = {\r\n        user: [\r\n            {\r\n                name: 'Explore',\r\n                linkTo: '/explore',\r\n            },\r\n            {\r\n                name: 'Direct',\r\n                linkTo: '/users/direct',\r\n            },\r\n            {\r\n                name: 'Notification',\r\n                linkTo: '/users/Notification',\r\n            },\r\n            {\r\n                name: 'avt'\r\n            },\r\n            {\r\n                name: 'Log in',\r\n                linkTo: '/register_login',\r\n            },\r\n        ],\r\n        dropdown: false,\r\n        notifydropdown: false,\r\n        setSnack: false,\r\n        notifycontent: '',\r\n        notifylink: '',\r\n        notifyimg: '',\r\n    }\r\n\r\n    logoutHandler = () => {\r\n        this.props.dispatch(logoutUser())\r\n            .then(response => {\r\n                if (response.payload.success) {\r\n                    this.props.history.push('/')\r\n                }\r\n            })\r\n    }\r\n\r\n    // handleDropdown = () => {\r\n    //     console.log(!this.state.dropdown)\r\n    //     this.setState({\r\n    //         dropdown: !this.state.dropdown\r\n    //     })\r\n    // }\r\n\r\n    handleSeenall = () => {\r\n        this.props.dispatch(seenAllNotification());\r\n        this.props.dispatch(getNotification())\r\n    }\r\n\r\n    defaultLink = (item, i) => {\r\n        if (item.name === 'Log out') {\r\n            return (\r\n                <div>\r\n                    <Link to={item.linkTo} key={i}\r\n                        onClick={this.logoutHandler}>{item.name}</Link>\r\n                </div>)\r\n        } else if (item.name === 'avt') {\r\n            return (\r\n                <div className=\"menu\">\r\n                    {\r\n                        this.props.user.userData.avt ?\r\n                            <img onClick={this.toggleDropdown} className=\"avt\" alt=\"photo\" src={this.props.user.userData.avt} />\r\n                            : <Skeleton variant=\"circle\" width={40} height={40} />\r\n                    }\r\n                    {\r\n                        this.state.dropdown ?\r\n                            <NativeClickListener onClick={() => this.setState({ dropdown: false })}>\r\n                                <div className=\"dropdown\" onClick={this.handleBodyClick}>\r\n                                    <div className=\"user_navigation\">\r\n                                        <div>\r\n                                            <User size={22} strokeWidth={1.5} color=\"grey\"></User>\r\n                                            <Link to={`/user/${this.props.user.userData._id}`}>Profile</Link>\r\n                                        </div>\r\n                                        <div>\r\n                                            <Settings size={22} strokeWidth={1.5} color=\"grey\"></Settings>\r\n                                            <Link to={`/profilesettings`}>Setting</Link>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"logout\">\r\n                                        <Link key={i} onClick={this.logoutHandler}>Log out</Link>\r\n                                    </div>\r\n                                </div>\r\n                            </NativeClickListener>\r\n                            : null\r\n                    }\r\n                </div>\r\n            )\r\n        } else if (item.name === 'Explore') {\r\n            return (\r\n                <div>\r\n                    <Link to=\"/explore\">\r\n                        <BrandSafari size={30} color=\"grey\" strokeWidth={1} />\r\n                    </Link>\r\n                </div>\r\n            )\r\n        } else if (item.name === 'Notification') {\r\n            var notinumber = 0;\r\n            return (\r\n                <div className=\"notify\">\r\n                    <div>\r\n                        {\r\n                            this.props.notification ? this.props.notification.notifylist ? this.props.notification.notifylist.length>0 ?\r\n                                this.props.notification.notifylist.forEach(\r\n                                    (item) => {\r\n                                        console.log(item.seenStatus)\r\n                                        if (!item.seenStatus) {\r\n                                            notinumber = notinumber + 1;\r\n                                        }\r\n                                    }\r\n                                ) : '' : '':''\r\n                        }\r\n                        <Badge badgeContent={notinumber} overlap=\"circle\" color=\"secondary\">\r\n                            <Notification onClick={this.toggleNofifyDropdown} size={34} color=\"grey\" strokeWidth={1} />\r\n                        </Badge>\r\n\r\n                    </div>\r\n                    {\r\n                        this.state.notifydropdown ?\r\n                            <NativeClickListener onClick={() => this.setState({ notifydropdown: false })}>\r\n                                <div className=\"notifydropdown\" onClick={this.handleBodyClick}>\r\n                                    <div className=\"notifyheader\" > <h2>Thông báo</h2> <h6 onClick={this.handleSeenall}>Đánh dấu tất cả đã đọc</h6></div>\r\n                                    {\r\n                                        console.log(this.props.user)\r\n                                    }\r\n                \r\n                                    {/* {\r\n                                        this.props.notification ? this.props.notification.notifylist ? this.props.notification.notifylist.map(data => {\r\n                                            return (\r\n                                                <NotificationDetail handleSeenNoti={this.handleSeenNoti} handleDeleteNoti={this.handleDeleteNoti} data={data} acceptfollow={this.acceptfollow} declinefollow={this.declinefollow} handleNotiClick={this.handleNotiClick}></NotificationDetail>\r\n                                            )\r\n                                        }) : null : null\r\n                                    } */}\r\n                                    {\r\n                                        this.props.notification ? this.props.notification.notifylist ? this.props.notification.notifylist.map(data => {\r\n                                            return(\r\n                                                <NotificationDetail handleSeenNoti={this.handleSeenNoti} handleDeleteNoti={this.handleDeleteNoti} data={data} acceptfollow={this.acceptfollow} declinefollow={this.declinefollow} handleNotiClick={this.handleNotiClick}></NotificationDetail>\r\n                                            )\r\n                                \r\n                                        }) : '' : ''\r\n                                    }\r\n                                </div>\r\n                            </NativeClickListener>\r\n                            : null\r\n                    }\r\n                    <Snackbar\r\n                        anchorOrigin={{\r\n                            vertical: 'bottom',\r\n                            horizontal: 'right'\r\n                        }}\r\n                        open={this.state.setSnack}\r\n                        onClose={() => this.setState({ setSnack: false })}\r\n                        autoHideDuration={10000}\r\n                        direction=\"up\"\r\n                    >\r\n                        {\r\n                            this.props.notification ? this.props.notification.notifylist ? this.props.notification.notifylist[0] ?\r\n                            \r\n                                <div className=\"snack_noti\">\r\n                                    <div className=\"noti_wrapper\" onClick={() => this.handleNotiClick(this.props.notification.notifylist[0]._id, this.props.notification.notifylist[0].type, this.props.notification.notifylist[0].link)}>\r\n                                        <div className=\"user_avt\">\r\n                                            <img src={this.props.notification.notifylist[0].sentFrom.role == 0 ?\r\n                                                this.props.notification.notifylist[0].sentFrom.avt : \"https://res.cloudinary.com/dlikyyfd1/image/upload/v1610771639/logo2x_lzjmtn.png\"}></img>\r\n                                        </div>\r\n\r\n                                        <div className=\"content\">\r\n                                            <p>\r\n                                                <h6>{this.props.notification.notifylist[0].sentFrom.userName}</h6>\r\n                                                {\r\n                                                    this.props.notification.notifylist[0].type == \"follow\" ? ' đã theo dõi bạn nè' :\r\n                                                        this.props.notification.notifylist[0].type == \"likepost\" ? ' đã thích bài viết của bạn' :\r\n                                                            this.props.notification.notifylist[0].type == \"comment\" ? ' đã bình luận về bài viết của bạn' :\r\n                                                                this.props.notification.notifylist[0].type == \"likecomment\" ? 'đã thích bình luận của bạn' :\r\n                                                                    this.props.notification.notifylist[0].type == \"discardReport\" ? 'Báo cáo của bạn chưa phù hợp' :\r\n                                                                        this.props.notification.notifylist[0].type == \"deletePost\" ? 'Bài viết của bạn đã vi phạm chính sách' :\r\n                                                                            this.props.notification.notifylist[0].type == \"deleteComment\" ? 'Báo cáo của bạn đã vi phạm chính sách' :\r\n                                                                                this.props.notification.notifylist[0].type == \"askfollow\" ? ' đã yêu cầu theo dõi bạn' : \r\n                                                                                this.props.notification.notifylist[0].type == 'acceptfollow' ? ' đã chấp nhập lời theo dõi của bạn' :\r\n                                                                                this.props.notification.notifylist[0].type == 'restrictUserFunction' ? ' đã hạn chế tính năng của bạn' : \"\"\r\n                                                                            \r\n\r\n                                                }\r\n                                            </p>\r\n                                            <h6>\r\n                                                <h6>{moment(this.props.notification.notifylist[0].createdAt).fromNow()} </h6>\r\n                                            </h6>\r\n                                        </div>\r\n                                        <div className=\"status\">\r\n                                            <Point visibility=\"hidden\" size={24} strokeWidth={5} color=\"#7166F9\" fill=\"#7166F9\"></Point>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                : '' : '' : ''\r\n                                \r\n                        }\r\n                    </Snackbar>\r\n                </div>\r\n            )\r\n        } else if (item.name === 'Direct') {\r\n            var messnumber = 0;\r\n            return (\r\n                <div>\r\n                    {\r\n                        this.props.messages ? this.props.messages.grouplist ? this.props.messages.grouplist.forEach(\r\n\r\n                            (con) => {\r\n                                //console.log(con.seenBy)\r\n                                if (con.seenBy.includes(this.props.user.userData._id) == false) {\r\n                                    messnumber = messnumber + 1;\r\n                                }\r\n                            }\r\n                        ) : '' : ''\r\n                    }\r\n                    <Badge badgeContent={messnumber} overlap=\"circle\" color=\"secondary\">\r\n                        <Link to=\"/message/inbox\"><Send size={30} color=\"grey\" strokeWidth={1} /></Link>\r\n                    </Badge>\r\n\r\n                </div>)\r\n        } else {\r\n            return <div>\r\n                <Link to={item.linkTo} key={i}></Link>\r\n            </div>\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.props.dispatch(auth())\r\n        this.props.dispatch(getConversation())\r\n        console.log(this.props.user.userData)\r\n        console.log(this.props.messages ? this.props.messages.conlist : '')\r\n        this.props.dispatch(getNotification())\r\n        console.log(this.props.notification ? this.props.notification.notifylist : '')\r\n        const pusher = new Pusher('c0e96b0fff8d0edac17d', {\r\n            cluster: 'mt1'\r\n        });\r\n        const channel = pusher.subscribe('notifications');\r\n        channel.bind('newNoti', data => {\r\n            if (data.change.operationType == \"insert\") {\r\n                if (data.change.fullDocument.sentTo == this.props.user.userData._id) {\r\n                    this.props.dispatch(getNotification())\r\n                    this.setState({ setSnack: true })\r\n                }\r\n            }\r\n            if (data.change.operationType ==\"update\")\r\n            {\r\n                this.props.notification.notifylist.map(noti=>{\r\n                    if(noti._id==data.change?data.change.fullDocument?data.change.fullDocument._id:'':'')\r\n                    {\r\n                        this.props.dispatch(getNotification())\r\n                        this.setState({ setSnack: true })\r\n                    }\r\n                })\r\n            }\r\n        });\r\n        const channel2 = pusher.subscribe('messages');\r\n        channel2.bind('newMessage', data => {\r\n            if (data.change.operationType == \"insert\") {\r\n                if (data.change.fullDocument.sentTo == this.props.user.userData._id || data.change.fullDocument.sentBy == this.props.user.userData._id) {\r\n                    this.props.dispatch(getConversation())\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    toggleDropdown = (syntheticEvent) => {\r\n        console.log('toggle dropdown')\r\n        this.setState(prevState => ({ dropdown: !prevState.dropdown }))\r\n    }\r\n\r\n    handleBodyClick = (syntheticEvent) => {\r\n        console.log('body click')\r\n    }\r\n\r\n    toggleNofifyDropdown = (syntheticEvent) => {\r\n        console.log('toggle dropdown')\r\n        this.setState(prevState => ({ notifydropdown: !prevState.notifydropdown }))\r\n        this.props.dispatch(getNotification());\r\n        console.log(this.props.notification)\r\n    }\r\n\r\n    acceptfollow = async(id)=>{\r\n        await this.props.dispatch(acceptfollow(id));\r\n        await this.props.dispatch(getNotification())\r\n    }\r\n\r\n    declinefollow = async(id)=>{\r\n        await this.props.dispatch(declinefollow(id)); \r\n        await this.props.dispatch(getNotification());\r\n    }\r\n\r\n    handleNotiClick = (id, type, link) => {\r\n        this.props.dispatch(seenNotification(id))\r\n        console.log('Đã xem thông báo', id)\r\n        if (type == 'follow') {\r\n            this.props.history.push(`/user/${link}`)\r\n        }\r\n        if (type == 'acceptfollow') {\r\n            this.props.history.push(`/user/${link}`)\r\n        }\r\n        if (type == 'likepost') {\r\n            this.props.history.push(`/postDetail/${link}`)\r\n        }\r\n        if (type == 'comment') {\r\n            this.props.history.push(`/postDetail/${link}`)\r\n        }\r\n        if (type == 'likecomment') {\r\n            this.props.history.push(`/postDetail/${link}`)\r\n        }\r\n        this.props.dispatch(getNotification())\r\n    }\r\n\r\n    handleDeleteNoti = async (id)=>{\r\n        await this.props.dispatch(disablenotification(id))\r\n        await  this.props.dispatch(getNotification())\r\n    }\r\n    handleSeenNoti = async (id)=>{\r\n        await this.props.dispatch(seenNotification(id))\r\n        await  this.props.dispatch(getNotification())\r\n    }\r\n\r\n    showLinks = (type) => {\r\n        let list = [];\r\n\r\n        if (this.props.user.userData) {\r\n            type.forEach((item) => {\r\n                if (!this.props.user.userData.isAuth) {\r\n                    if (item.name === 'Log in') {\r\n                        list.push(item)\r\n                    }\r\n                } else {\r\n                    if (item.name !== 'Log in') {\r\n                        list.push(item)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        return list.map((item, i) => {\r\n            return this.defaultLink(item, i)\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <header className=\"header\">\r\n                <div className=\"header__container\">\r\n                    <div className=\"row no-gutters\">\r\n                        <div className=\"col-xl-4 col-sm-4 col-4 no-gutters\">\r\n                            <div className=\"header__logo\" onClick={() => { this.props.history.push('/newfeed') }}>\r\n                                <img src={require('../../../asset/logo/logo2x.png')} />\r\n                                <img class=\"Logo_stunn\" src={require('../../../asset/logo/stunn2x.png')} />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-xl-4 col-sm-4 col-1  no-gutters\">\r\n                            <div className=\"header__nav-page\">\r\n                                <SearchBar />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-xl-4 col-sm-4 col-7  no-gutters\">\r\n                            <div className=\"header__nav-user\">\r\n                                {this.showLinks(this.state.user)}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </header>\r\n        );\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        user: state.user,\r\n        notification: state.notification,\r\n        messages: state.messages\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(withRouter(Header));"]},"metadata":{},"sourceType":"module"}
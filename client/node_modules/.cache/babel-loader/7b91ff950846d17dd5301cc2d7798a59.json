{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\Product\\\\PostDetailCard.js\";\nimport React, { Component } from 'react';\nimport MyButton from '../ultils/button';\nimport './postDetailCard.scss';\nimport ImageLightBox from '../ultils/ImageLightBox';\nimport { connect } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport faEllipsisH from '@fortawesome/fontawesome-free-solid/faEllipsisH';\nimport { likePost, unlikePost, makeComment, hidePost, likeComment, unLikeComment, deleteComment, deletePost, clearPostDetail, unSavePost, savePost } from '../../actions/product_actions';\nimport Avatar from '@material-ui/core/Avatar';\nimport { getTagId } from '../../actions/tag_actions';\nimport AvatarGroup from '@material-ui/lab/AvatarGroup';\nimport NativeClickListener from '../ultils/NativeClickListener';\nimport { Link, withRouter } from 'react-router-dom';\nimport Slide from '@material-ui/core/Slide';\nimport Dialog from '@material-ui/core/Dialog';\nimport Report from '../Report/Report';\nimport { getPolicy } from '../../actions/policy_actions';\nimport PostEdit from '../PostEdit/index';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport moment from 'moment';\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return /*#__PURE__*/React.createElement(Slide, Object.assign({\n    direction: \"up\",\n    ref: ref\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 12\n    }\n  }));\n});\n\nclass PostDetailCard extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      buttons: [{\n        name: 'Like',\n        linkTo: '/'\n      }, {\n        name: 'Comment',\n        linkTo: '/postDetail'\n      }, {\n        name: 'Pin',\n        linkTo: ''\n      }],\n      lightbox: false,\n      lightboxImages: [],\n      dropdown: false,\n      commentAdvancedBtn: false,\n      limit: 3,\n      skip: 0,\n      isReportFormShow: false,\n      reportData: {},\n      DialogShowing: false,\n      dialogType: \"\",\n      commentSelected: \"\",\n      showEditor: false,\n      setSnack: false,\n      SnackMess: \"\",\n      reportSuccess: false,\n      tags: [],\n      setfollowerDiaglog: false,\n      alertFunctionIsRestricted: false,\n      restrictedFunction: {}\n    };\n\n    this.handlelightBox = () => {\n      if (this.props.post.images) {\n        this.setState({\n          lightbox: true\n        });\n      }\n    };\n\n    this.handlelightBoxClose = () => {\n      this.setState({\n        lightbox: false\n      });\n    };\n\n    this.showUser = users => {\n      return users.map((item, i) => /*#__PURE__*/React.createElement(Avatar, {\n        className: \"userlike_avt\",\n        alt: item.userName,\n        src: item.avt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      }));\n    };\n\n    this.showComments = comments => {\n      let commentsToShow = [];\n\n      if (comments[0].content) {\n        for (let i = 0; i < this.state.limit; i++) {\n          if (this.props.post.comments[i] && this.props.post.comments[i].content) {\n            commentsToShow.push(this.props.post.comments[i]);\n          } else {\n            break;\n          }\n        }\n      }\n\n      return commentsToShow.map((item, i) => item ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"comment\",\n        onMouseEnter: () => this.setState({\n          commentAdvancedBtn: item._id\n        }),\n        onMouseLeave: () => this.setState({\n          commentAdvancedBtn: \"\"\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"user_avt\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: item.postedBy[0].avt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        onClick: () => {\n          this.props.history.push(`/user/${item.postedBy[0]._id}`);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }\n      }, item.postedBy[0].userName), \" \", item.content, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 25\n        }\n      }, item.likes.length, \" l\\u01B0\\u1EE3t th\\xEDch\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"like_button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }\n      }, item.likes[0] ? /*#__PURE__*/React.createElement(\"img\", {\n        onClick: () => this.props.dispatch(unLikeComment(this.props.post._id, item._id)),\n        src: require('../../asset/newfeed_page/active_like_icon2x.png'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 45\n        }\n      }) : /*#__PURE__*/React.createElement(\"img\", {\n        onClick: () => this.props.dispatch(likeComment(this.props.post._id, item._id)),\n        src: require('../../asset/newfeed_page/like_icon2x.png'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 25\n        }\n      }, this.state.commentAdvancedBtn == item._id ? /*#__PURE__*/React.createElement(\"img\", {\n        onClick: () => {\n          this.setState({\n            DialogShowing: true,\n            dialogType: \"commentHandle\",\n            commentSelected: item._id\n          });\n        },\n        src: require('../../asset/headerIcon/advance_button2x.png'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 29\n        }\n      }) : \"\"))) : null);\n    };\n\n    this.makeComment = (postId, event) => {\n      event.preventDefault();\n      event.persist();\n      console.log(postId, event.target[0].value);\n      this.props.dispatch(makeComment(postId, event.target[0].value, \"detail\")).then(response => {\n        if (response.payload.restricted) {\n          console.log(response.payload);\n          this.setState({\n            alertFunctionIsRestricted: true,\n            restrictedFunction: response.payload.restrictedFunction\n          });\n        } else {\n          console.log(event.target[0].value);\n          event.target[0].value = \"\";\n        }\n      }); // event.preventDefault();\n      // event.persist();\n      // console.log(postId, event.target[0].value);\n      // this.props.dispatch(makeComment(postId, event.target[0].value,)).then(\n      //     event.target[0].value = \"\"\n      // )\n    };\n\n    this.defaultLink = (item, i) => {\n      switch (item.name) {\n        case 'Like':\n          const liked = this.props.post.likes.filter(item => item._id === this.props.user.userData._id);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 21\n            }\n          }, liked[0] ? /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(unlikePost(this.props.post._id, \"detail\")).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require('../../asset/newfeed_page/active_like_icon2x.png'),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 40\n            }\n          }) : /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(likePost(this.props.post._id, \"detail\")).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require('../../asset/newfeed_page/like_icon2x.png'),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 29\n            }\n          }));\n\n        case 'Pin':\n          const saved = this.props.user.userData.saved.filter(item => item == this.props.post._id);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 21\n            }\n          }, saved[0] ? /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(unSavePost(this.props.post._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require('../../asset/newfeed_page/stored_icon2x.png'),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 33\n            }\n          }) : /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(savePost(this.props.post._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require('../../asset/newfeed_page/store_icon2x.png'),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 35\n            }\n          }));\n      }\n    };\n\n    this.showLinks = () => {\n      let list = [];\n      return this.state.buttons.map((item, i) => {\n        return this.defaultLink(item, i);\n      });\n    };\n\n    this.toggleDropdown = syntheticEvent => {\n      console.log('toggle dropdown');\n      this.setState(prevState => ({\n        dropdown: !prevState.dropdown\n      }));\n    };\n\n    this.handleBodyClick = syntheticEvent => {\n      console.log('body click');\n    };\n\n    this.closeReportForm = () => {\n      this.setState({\n        isReportFormShow: false,\n        reportData: {},\n        DialogShowing: false\n      });\n    };\n\n    this.closeEditor = () => {\n      this.setState({\n        showEditor: !this.state.showEditor\n      });\n    };\n\n    this.handleSnackBar = (mess, res) => {\n      this.setState({\n        setSnack: true,\n        SnackMess: mess,\n        reportSuccess: res\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.post.images) {\n      let lightboxImages = [];\n      this.props.post.images.forEach(item => {\n        lightboxImages.push(item.url);\n      });\n      this.setState({\n        lightboxImages\n      });\n    }\n\n    let hashtag = this.findHashtags(this.props.post.description);\n    getTagId(hashtag).then(response => {\n      this.setState({\n        tags: [...response]\n      });\n    });\n    this.props.dispatch(getPolicy());\n  }\n\n  componentDidUpdate() {\n    if (this.props.post.images) {\n      let lightboxImages = [];\n      this.props.post.images.forEach(item => {\n        lightboxImages.push(item.url);\n      });\n      this.state.lightboxImages = lightboxImages;\n    }\n\n    let hashtag = this.findHashtags(this.props.post.description);\n    getTagId(hashtag).then(response => {\n      this.state.tags = [...response];\n    });\n  }\n\n  renderCardImage(images) {\n    if (images.length > 0) {\n      return images[0].url;\n    } else {\n      return 'https://cdn.shopify.com/s/files/1/0013/3529/6118/products/Terracotta-Pot-6_Sansevieria-Zeylanica-6.jpg?v=1544979697';\n    }\n  }\n\n  postedDate(day) {\n    console.log(day);\n    day = parseInt(day);\n    console.log(typeof day);\n\n    if (day < 30) {\n      return day + \" ngày\";\n    } else if (day <= 1 && day > 0.0417) {\n      console.log(day);\n      return day * 24 + \" giờ\";\n    } else if (day <= 0.0417) {\n      console.log(day);\n      return day * 24 * 60 + \" phút\";\n    }\n  }\n\n  findHashtags(Text) {\n    var regexp = /\\B\\#\\w\\w+\\b/g;\n    let result = Text.match(regexp);\n\n    if (result) {\n      let tags = [];\n      result.forEach(item => {\n        tags.push(item.slice(1));\n      });\n      return tags;\n    } else {\n      return false;\n    }\n  }\n\n  handleDescription(description, userTag, locationName) {\n    //let hashtag = this.findHashtags(description)\n    this.state.tags.forEach(item => description = description.replace('#' + item.name, `<a href=\"/tag/${item._id}\">${\"#\" + item.name}</a>`));\n\n    if (userTag.length > 0) {\n      description = description + \"<b>- cùng với </b>\";\n    }\n\n    userTag.forEach(item => {\n      description += `<a href=\"/user/${item._id}\"}>@${item.userName}</a> `;\n    });\n\n    if (locationName) {\n      description += ` <b>- tại <b> <a href=\"/location/${locationName}\"> ${locationName} </a>`;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: description\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 16\n      }\n    });\n  }\n\n  confirmDialog(type) {\n    let template = \"\";\n\n    switch (type) {\n      case \"commentHandle\":\n        template = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"commentHandle\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 29\n          }\n        }, this.props.post.postedBy[0]._id === this.props.user.userData._id ? /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"delete_button\",\n          onClick: () => {\n            this.props.dispatch(deleteComment(this.props.post._id, this.state.commentSelected)).then(() => {\n              this.setState({\n                DialogShowing: false,\n                commentSelected: \"\"\n              });\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 33\n          }\n        }, \"X\\xF3a\"), /*#__PURE__*/React.createElement(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 33\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"report_button\",\n          onClick: () => {\n            this.setState({\n              isReportFormShow: true,\n              reportData: {\n                reportType: \"comment\",\n                post: this.props.post._id,\n                comment: this.state.commentSelected\n              }\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 33\n          }\n        }, \"B\\xE1o c\\xE1o\")) : /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"report_button\",\n          onClick: () => {\n            this.setState({\n              isReportFormShow: true,\n              reportData: {\n                reportType: \"comment\",\n                post: this.props.post._id,\n                comment: this.state.commentSelected\n              }\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 29\n          }\n        }, \"B\\xE1o c\\xE1o\")));\n        break;\n\n      case \"deleteConfirm\":\n        template = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"deleteConfirm\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"h5\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 25\n          }\n        }, \" B\\u1EA1n ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a b\\xE0i vi\\u1EBFt n\\xE0y?\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"btn_wrapper\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"cancel_btn\",\n          onClick: () => this.setState({\n            DialogShowing: false\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 29\n          }\n        }, \"H\\u1EE7y\"), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"confirm_btn\",\n          onClick: () => this.props.dispatch(deletePost(this.props.post._id)).then(() => {\n            this.props.history.push('/newfeed');\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 29\n          }\n        }, \"X\\xF3a\")));\n        break;\n\n      default:\n        template = /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 29\n          }\n        });\n        break;\n    }\n\n    return /*#__PURE__*/React.createElement(Dialog, {\n      open: this.state.DialogShowing,\n      TransitionComponent: Transition,\n      keepMounted: true,\n      onClose: () => {\n        this.setState({\n          DialogShowing: false\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 16\n      }\n    }, template);\n  }\n\n  showReportForm(type) {\n    return /*#__PURE__*/React.createElement(Report, {\n      isReportFormShow: this.state.isReportFormShow,\n      reportData: this.state.reportData,\n      handleSnackBar: (mess, res) => {\n        this.handleSnackBar(mess, res);\n      },\n      list: this.props.policies.policyList,\n      closeReportForm: () => this.closeReportForm(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 16\n      }\n    });\n  }\n\n  deletePost() {}\n\n  render() {\n    const props = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail_card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_item_wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: () => this.handlelightBox(),\n      className: \"item_image\",\n      src: this.renderCardImage(props.post.images),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user_info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: props.post.postedBy[0].avt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"userName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/user/${props.post.postedBy[0]._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 41\n      }\n    }, props.post.postedBy[0].userName), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 41\n      }\n    }, this.postedDate(props.post.dateDifference)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: `advance_button ${this.state.dropdown ? \"active_dropbox\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: this.toggleDropdown,\n      src: require('../../asset/headerIcon/advance_button2x.png'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 37\n      }\n    }), this.state.dropdown ? /*#__PURE__*/React.createElement(NativeClickListener, {\n      onClick: () => this.setState({\n        dropdown: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown\",\n      onClick: this.handleBodyClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: () => this.props.dispatch(hidePost(this.props.post._id, \"detail\")).then(() => {\n        this.props.history.push('/newfeed');\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 57\n      }\n    }, \"\\u1EA8n\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 53\n      }\n    }), props.post.postedBy[0]._id === this.props.user.userData._id ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 61\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"delete_button\",\n      onClick: () => {\n        this.setState({\n          DialogShowing: true,\n          dialogType: \"deleteConfirm\"\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 65\n      }\n    }, \"X\\xF3a\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 65\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 65\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"edit_button\",\n      onClick: () => {\n        this.setState({\n          showEditor: true,\n          dropdown: false\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 65\n      }\n    }, \"S\\u1EEDa\"))) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 63\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"report_button\",\n      onClick: () => {\n        this.setState({\n          isReportFormShow: true,\n          reportData: {\n            reportType: \"post\",\n            post: props.post._id\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 65\n      }\n    }, \"B\\xE1o c\\xE1o\")))) : null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 29\n      }\n    }, this.state.showEditor ? /*#__PURE__*/React.createElement(PostEdit, {\n      description: props.post.description,\n      close: this.closeEditor,\n      handleSnackBar: (mess, res) => {\n        this.handleSnackBar(mess, res);\n      },\n      ActionType: \"detail\",\n      userTag: props.post.userTag,\n      locationName: props.post.locationName,\n      postId: props.post._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 37\n      }\n    }) : this.handleDescription(props.post.description, props.post.userTag, props.post.locationName)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment_list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 29\n      }\n    }, this.showComments(props.post.comments), this.state.limit < props.post.comments.length ? /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: () => {\n        this.setState({\n          limit: this.state.limit + 3\n        });\n      },\n      className: \"view_more_cmt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 41\n      }\n    }, `Xem thêm`) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_function\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button_wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 33\n      }\n    }, this.showLinks()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"likes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(AvatarGroup, {\n      max: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 37\n      }\n    }, this.showUser(props.post.likes)), props.post.likes.length ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 45\n      }\n    }, \" \\u0110\\xE3 th\\xEDch b\\xE0i vi\\u1EBFt \") : null), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"comment_form\",\n      onSubmit: event => this.makeComment(props.post._id, event, \"Detail\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment_input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Nh\\u1EADp h\\xECnh lu\\u1EADn....\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 41\n      }\n    })))))), this.state.lightbox ? /*#__PURE__*/React.createElement(ImageLightBox, {\n      id: props.post._id,\n      images: this.state.lightboxImages,\n      open: this.state.lightbox,\n      pos: 0,\n      onclose: () => this.handlelightBoxClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 21\n      }\n    }) : null, this.confirmDialog(this.state.dialogType), this.showReportForm(), /*#__PURE__*/React.createElement(Dialog, {\n      className: \"dialog_cont\",\n      onClose: () => {\n        this.setState({\n          alertFunctionIsRestricted: false\n        });\n      },\n      open: this.state.alertFunctionIsRestricted,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dialog_header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 25\n      }\n    }, \"Ba\\u0323n \\u0111a\\u0303 bi\\u0323 ha\\u0323n ch\\xEA\\u0301 ch\\u01B0\\u0301c n\\u0103ng na\\u0300y cho \\u0111\\xEA\\u0301n \", moment(this.state.restrictedFunction.amountOfTime).format(\"L\")))), /*#__PURE__*/React.createElement(Snackbar, {\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'left'\n      },\n      open: this.state.setSnack,\n      onClose: () => this.setState({\n        setSnack: false\n      }),\n      autoHideDuration: 3000,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MuiAlert, {\n      elevation: 6,\n      variant: \"filled\",\n      severity: this.state.reportSuccess ? \"success\" : \"warning\",\n      message: this.state.SnackMess,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 21\n      }\n    }, this.state.SnackMess)));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    policies: state.policies\n  };\n};\n\nexport default connect(mapStateToProps)(withRouter(PostDetailCard));","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/Product/PostDetailCard.js"],"names":["React","Component","MyButton","ImageLightBox","connect","FontAwesomeIcon","faEllipsisH","likePost","unlikePost","makeComment","hidePost","likeComment","unLikeComment","deleteComment","deletePost","clearPostDetail","unSavePost","savePost","Avatar","getTagId","AvatarGroup","NativeClickListener","Link","withRouter","Slide","Dialog","Report","getPolicy","PostEdit","Snackbar","MuiAlert","moment","Transition","forwardRef","props","ref","PostDetailCard","state","buttons","name","linkTo","lightbox","lightboxImages","dropdown","commentAdvancedBtn","limit","skip","isReportFormShow","reportData","DialogShowing","dialogType","commentSelected","showEditor","setSnack","SnackMess","reportSuccess","tags","setfollowerDiaglog","alertFunctionIsRestricted","restrictedFunction","handlelightBox","post","images","setState","handlelightBoxClose","showUser","users","map","item","i","userName","avt","showComments","comments","commentsToShow","content","push","_id","postedBy","history","likes","length","dispatch","require","postId","event","preventDefault","persist","console","log","target","value","then","response","payload","restricted","defaultLink","liked","filter","user","userData","saved","showLinks","list","toggleDropdown","syntheticEvent","prevState","handleBodyClick","closeReportForm","closeEditor","handleSnackBar","mess","res","componentDidMount","forEach","url","hashtag","findHashtags","description","componentDidUpdate","renderCardImage","postedDate","day","parseInt","Text","regexp","result","match","slice","handleDescription","userTag","locationName","replace","__html","confirmDialog","type","template","reportType","comment","showReportForm","policies","policyList","render","dateDifference","amountOfTime","format","vertical","horizontal","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAO,uBAAP;AACA,OAAOC,aAAP,MAA0B,yBAA1B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,OAAOC,WAAP,MAAwB,iDAAxB;AACA,SAASC,QAAT,EACQC,UADR,EAEQC,WAFR,EAGQC,QAHR,EAIQC,WAJR,EAKQC,aALR,EAMQC,aANR,EAOQC,UAPR,EAQQC,eARR,EASQC,UATR,EAUQC,QAVR,QAWa,+BAXb;AAYA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,QAAT,QAAyB,2BAAzB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,mBAAP,MAAgC,+BAAhC;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,SAASC,SAAT,QAA0B,8BAA1B;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,MAAMC,UAAU,GAAGhC,KAAK,CAACiC,UAAN,CAAiB,SAASD,UAAT,CAAoBE,KAApB,EAA2BC,GAA3B,EAAgC;AAChE,sBAAO,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAC,IAAjB;AAAsB,IAAA,GAAG,EAAEA;AAA3B,KAAoCD,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AACH,CAFkB,CAAnB;;AAKA,MAAME,cAAN,SAA6BnC,SAA7B,CAAuC;AAAA;AAAA;AAAA,SAEnCoC,KAFmC,GAE3B;AACJC,MAAAA,OAAO,EAAE,CACL;AACIC,QAAAA,IAAI,EAAE,MADV;AAEIC,QAAAA,MAAM,EAAE;AAFZ,OADK,EAKL;AACID,QAAAA,IAAI,EAAE,SADV;AAEIC,QAAAA,MAAM,EAAE;AAFZ,OALK,EASL;AACID,QAAAA,IAAI,EAAE,KADV;AAEIC,QAAAA,MAAM,EAAE;AAFZ,OATK,CADL;AAgBJC,MAAAA,QAAQ,EAAE,KAhBN;AAiBJC,MAAAA,cAAc,EAAE,EAjBZ;AAmBJC,MAAAA,QAAQ,EAAE,KAnBN;AAoBJC,MAAAA,kBAAkB,EAAE,KApBhB;AAsBJC,MAAAA,KAAK,EAAE,CAtBH;AAuBJC,MAAAA,IAAI,EAAE,CAvBF;AAyBJC,MAAAA,gBAAgB,EAAE,KAzBd;AA0BJC,MAAAA,UAAU,EAAE,EA1BR;AA4BJC,MAAAA,aAAa,EAAE,KA5BX;AA6BJC,MAAAA,UAAU,EAAG,EA7BT;AA+BJC,MAAAA,eAAe,EAAE,EA/Bb;AAiCJC,MAAAA,UAAU,EAAE,KAjCR;AAkCJC,MAAAA,QAAQ,EAAE,KAlCN;AAmCJC,MAAAA,SAAS,EAAE,EAnCP;AAoCJC,MAAAA,aAAa,EAAE,KApCX;AAsCJC,MAAAA,IAAI,EAAE,EAtCF;AAwCJC,MAAAA,kBAAkB,EAAE,KAxChB;AAyCJC,MAAAA,yBAAyB,EAAE,KAzCvB;AA2CJC,MAAAA,kBAAkB,EAAE;AA3ChB,KAF2B;;AAAA,SAsFnCC,cAtFmC,GAsFlB,MAAM;AACnB,UAAI,KAAK1B,KAAL,CAAW2B,IAAX,CAAgBC,MAApB,EAA4B;AACxB,aAAKC,QAAL,CAAc;AACVtB,UAAAA,QAAQ,EAAE;AADA,SAAd;AAGH;AACJ,KA5FkC;;AAAA,SA8FnCuB,mBA9FmC,GA8Fb,MAAM;AACxB,WAAKD,QAAL,CAAc;AACVtB,QAAAA,QAAQ,EAAE;AADA,OAAd;AAGH,KAlGkC;;AAAA,SA4GnCwB,QA5GmC,GA4GvBC,KAAD,IAAW;AAClB,aAAOA,KAAK,CAACC,GAAN,CAAU,CAACC,IAAD,EAAOC,CAAP,kBACb,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAC,cAAlB;AAAiC,QAAA,GAAG,EAAED,IAAI,CAACE,QAA3C;AAAqD,QAAA,GAAG,EAAEF,IAAI,CAACG,GAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADG,CAAP;AAGH,KAhHkC;;AAAA,SAkHnCC,YAlHmC,GAkHnBC,QAAD,IAAc;AACzB,UAAIC,cAAc,GAAG,EAArB;;AACA,UAAID,QAAQ,CAAC,CAAD,CAAR,CAAYE,OAAhB,EAAyB;AACrB,aAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhC,KAAL,CAAWQ,KAA/B,EAAsCwB,CAAC,EAAvC,EAA2C;AACvC,cAAI,KAAKnC,KAAL,CAAW2B,IAAX,CAAgBY,QAAhB,CAAyBJ,CAAzB,KAA+B,KAAKnC,KAAL,CAAW2B,IAAX,CAAgBY,QAAhB,CAAyBJ,CAAzB,EAA4BM,OAA/D,EAAwE;AACpED,YAAAA,cAAc,CAACE,IAAf,CAAoB,KAAK1C,KAAL,CAAW2B,IAAX,CAAgBY,QAAhB,CAAyBJ,CAAzB,CAApB;AACH,WAFD,MAGI;AACA;AACH;AACJ;AACJ;;AACD,aAAOK,cAAc,CAACP,GAAf,CAAmB,CAACC,IAAD,EAAOC,CAAP,KACtBD,IAAI,gBACA;AAAK,QAAA,SAAS,EAAC,SAAf;AACI,QAAA,YAAY,EAAE,MAAM,KAAKL,QAAL,CAAc;AAAEnB,UAAAA,kBAAkB,EAAEwB,IAAI,CAACS;AAA3B,SAAd,CADxB;AAEI,QAAA,YAAY,EAAE,MAAM,KAAKd,QAAL,CAAc;AAAEnB,UAAAA,kBAAkB,EAAE;AAAtB,SAAd,CAFxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAII;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,GAAG,EAAEwB,IAAI,CAACU,QAAL,CAAc,CAAd,EAAiBP,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAJJ,eAOI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAG,QAAA,OAAO,EAAE,MAAM;AACd,eAAKrC,KAAL,CAAW6C,OAAX,CAAmBH,IAAnB,CAAyB,SAAQR,IAAI,CAACU,QAAL,CAAc,CAAd,EAAiBD,GAAI,EAAtD;AACH,SAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEIT,IAAI,CAACU,QAAL,CAAc,CAAd,EAAiBR,QAFrB,CADJ,OAGwCF,IAAI,CAACO,OAH7C,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKP,IAAI,CAACY,KAAL,CAAWC,MADhB,6BAJJ,CAPJ,eAeI;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEQb,IAAI,CAACY,KAAL,CAAW,CAAX,iBAAgB;AAAK,QAAA,OAAO,EAAE,MAAM,KAAK9C,KAAL,CAAWgD,QAAX,CAAoBtE,aAAa,CAAC,KAAKsB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAqBT,IAAI,CAACS,GAA1B,CAAjC,CAApB;AAChB,QAAA,GAAG,EAAEM,OAAO,CAAC,iDAAD,CADI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAhB,gBAGA;AAAK,QAAA,OAAO,EAAE,MAAM,KAAKjD,KAAL,CAAWgD,QAAX,CAAoBvE,WAAW,CAAC,KAAKuB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAsBT,IAAI,CAACS,GAA3B,CAA/B,CAApB;AACA,QAAA,GAAG,EAAEM,OAAO,CAAC,0CAAD,CADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALR,eAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI,KAAK9C,KAAL,CAAWO,kBAAX,IAAiCwB,IAAI,CAACS,GAAtC,gBACA;AAAK,QAAA,OAAO,EAAE,MAAM;AAAE,eAAKd,QAAL,CAClB;AACId,YAAAA,aAAa,EAAE,IADnB;AAEIC,YAAAA,UAAU,EAAE,eAFhB;AAGIC,YAAAA,eAAe,EAAEiB,IAAI,CAACS;AAH1B,WADkB;AAIc,SAJpC;AAKI,QAAA,GAAG,EAAEM,OAAO,CAAC,6CAAD,CALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,GAOC,EATL,CARJ,CAfJ,CADA,GAsCF,IAvCC,CAAP;AAyCH,KAvKkC;;AAAA,SAyKnC1E,WAzKmC,GAyKrB,CAAC2E,MAAD,EAASC,KAAT,KAAmB;AAE7BA,MAAAA,KAAK,CAACC,cAAN;AACAD,MAAAA,KAAK,CAACE,OAAN;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,MAAZ,EAAoBC,KAAK,CAACK,MAAN,CAAa,CAAb,EAAgBC,KAApC;AACA,WAAKzD,KAAL,CAAWgD,QAAX,CAAoBzE,WAAW,CAAC2E,MAAD,EAASC,KAAK,CAACK,MAAN,CAAa,CAAb,EAAgBC,KAAzB,EAAgC,QAAhC,CAA/B,EAA0EC,IAA1E,CAA+EC,QAAQ,IAAI;AACvF,YAAGA,QAAQ,CAACC,OAAT,CAAiBC,UAApB,EAA+B;AAC3BP,UAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,OAArB;AACA,eAAK/B,QAAL,CAAc;AAACL,YAAAA,yBAAyB,EAAE,IAA5B;AAAkCC,YAAAA,kBAAkB,EAAEkC,QAAQ,CAACC,OAAT,CAAiBnC;AAAvE,WAAd;AACH,SAHD,MAGK;AACD6B,UAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAK,CAACK,MAAN,CAAa,CAAb,EAAgBC,KAA5B;AACAN,UAAAA,KAAK,CAACK,MAAN,CAAa,CAAb,EAAgBC,KAAhB,GAAwB,EAAxB;AACH;AACJ,OARD,EAL6B,CAc7B;AACA;AACA;AACA;AACA;AACA;AACH,KA7LkC;;AAAA,SA+LnCK,WA/LmC,GA+LrB,CAAC5B,IAAD,EAAOC,CAAP,KAAa;AACvB,cAAQD,IAAI,CAAC7B,IAAb;AACI,aAAK,MAAL;AACI,gBAAM0D,KAAK,GAAG,KAAK/D,KAAL,CAAW2B,IAAX,CAAgBmB,KAAhB,CAAsBkB,MAAtB,CAA6B9B,IAAI,IAAIA,IAAI,CAACS,GAAL,KAAa,KAAK3C,KAAL,CAAWiE,IAAX,CAAgBC,QAAhB,CAAyBvB,GAA3E,CAAd;AACA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAEQoB,KAAK,CAAC,CAAD,CAAL,gBAAW;AAAK,YAAA,OAAO,EAAE,MAAM,KAAK/D,KAAL,CAAWgD,QAAX,CAAoB1E,UAAU,CAAC,KAAK0B,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAqB,QAArB,CAA9B,EAA8De,IAA9D,CAAmEC,QAAQ,IAAG;AACzG,kBAAGA,QAAQ,CAACC,OAAT,CAAiBC,UAApB,EAA+B;AAC3BP,gBAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,OAArB;AACA,qBAAK/B,QAAL,CAAc;AAACL,kBAAAA,yBAAyB,EAAE,IAA5B;AAAkCC,kBAAAA,kBAAkB,EAAEkC,QAAQ,CAACC,OAAT,CAAiBnC;AAAvE,iBAAd;AACH;AACJ,aAL8B,CAApB;AAMX,YAAA,GAAG,EAAEwB,OAAO,CAAC,iDAAD,CAND;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAX,gBAQA;AAAK,YAAA,OAAO,EAAE,MAAM,KAAKjD,KAAL,CAAWgD,QAAX,CAAoB3E,QAAQ,CAAC,KAAK2B,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAsB,QAAtB,CAA5B,EAA6De,IAA7D,CAAkEC,QAAQ,IAAG;AAC7F,kBAAGA,QAAQ,CAACC,OAAT,CAAiBC,UAApB,EAA+B;AAC3BP,gBAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,OAArB;AACA,qBAAK/B,QAAL,CAAc;AAACL,kBAAAA,yBAAyB,EAAE,IAA5B;AAAkCC,kBAAAA,kBAAkB,EAAEkC,QAAQ,CAACC,OAAT,CAAiBnC;AAAvE,iBAAd;AACH;AACJ,aALmB,CAApB;AAMA,YAAA,GAAG,EAAEwB,OAAO,CAAC,0CAAD,CANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAVR,CADJ;;AAqBJ,aAAK,KAAL;AACI,gBAAMkB,KAAK,GAAG,KAAKnE,KAAL,CAAWiE,IAAX,CAAgBC,QAAhB,CAAyBC,KAAzB,CAA+BH,MAA/B,CAAsC9B,IAAI,IAAIA,IAAI,IAAI,KAAKlC,KAAL,CAAW2B,IAAX,CAAgBgB,GAAtE,CAAd;AACA,8BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAEQwB,KAAK,CAAC,CAAD,CAAL,gBACI;AAAK,YAAA,OAAO,EAAE,MAAM,KAAKnE,KAAL,CAAWgD,QAAX,CAAoBlE,UAAU,CAAC,KAAKkB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,CAA9B,EAAqDe,IAArD,CAA0DC,QAAQ,IAAG;AACrF,kBAAGA,QAAQ,CAACC,OAAT,CAAiBC,UAApB,EAA+B;AAC3BP,gBAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,OAArB;AACA,qBAAK/B,QAAL,CAAc;AAACL,kBAAAA,yBAAyB,EAAE,IAA5B;AAAkCC,kBAAAA,kBAAkB,EAAEkC,QAAQ,CAACC,OAAT,CAAiBnC;AAAvE,iBAAd;AACH;AACJ,aALmB,CAApB;AAMI,YAAA,GAAG,EAAEwB,OAAO,CAAC,4CAAD,CANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,gBAQM;AAAK,YAAA,OAAO,EAAE,MAAM,KAAKjD,KAAL,CAAWgD,QAAX,CAAoBjE,QAAQ,CAAC,KAAKiB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,CAA5B,EAAmDe,IAAnD,CAAwDC,QAAQ,IAAG;AACrF,kBAAGA,QAAQ,CAACC,OAAT,CAAiBC,UAApB,EAA+B;AAC3BP,gBAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,OAArB;AACA,qBAAK/B,QAAL,CAAc;AAACL,kBAAAA,yBAAyB,EAAE,IAA5B;AAAkCC,kBAAAA,kBAAkB,EAAEkC,QAAQ,CAACC,OAAT,CAAiBnC;AAAvE,iBAAd;AACH;AACJ,aALqB,CAApB;AAMF,YAAA,GAAG,EAAEwB,OAAO,CAAC,2CAAD,CANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAVd,CADJ;AA1BR;AAgDH,KAhPkC;;AAAA,SAkPnCmB,SAlPmC,GAkPvB,MAAM;AACd,UAAIC,IAAI,GAAG,EAAX;AACA,aAAO,KAAKlE,KAAL,CAAWC,OAAX,CAAmB6B,GAAnB,CAAuB,CAACC,IAAD,EAAOC,CAAP,KAAa;AACvC,eAAO,KAAK2B,WAAL,CAAiB5B,IAAjB,EAAuBC,CAAvB,CAAP;AACH,OAFM,CAAP;AAGH,KAvPkC;;AAAA,SAyPnCmC,cAzPmC,GAyPjBC,cAAD,IAAoB;AACjCjB,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,WAAK1B,QAAL,CAAc2C,SAAS,KAAK;AAAE/D,QAAAA,QAAQ,EAAE,CAAC+D,SAAS,CAAC/D;AAAvB,OAAL,CAAvB;AACH,KA5PkC;;AAAA,SA8PnCgE,eA9PmC,GA8PhBF,cAAD,IAAoB;AAClCjB,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACH,KAhQkC;;AAAA,SAgYnCmB,eAhYmC,GAgYjB,MAAK;AACnB,WAAK7C,QAAL,CAAc;AACVhB,QAAAA,gBAAgB,EAAE,KADR;AAEVC,QAAAA,UAAU,EAAE,EAFF;AAGVC,QAAAA,aAAa,EAAE;AAHL,OAAd;AAKH,KAtYkC;;AAAA,SAsZnC4D,WAtZmC,GAsZrB,MAAM;AAChB,WAAK9C,QAAL,CAAc;AAAEX,QAAAA,UAAU,EAAE,CAAC,KAAKf,KAAL,CAAWe;AAA1B,OAAd;AACH,KAxZkC;;AAAA,SA0ZnC0D,cA1ZmC,GA0ZlB,CAACC,IAAD,EAAOC,GAAP,KAAe;AAC5B,WAAKjD,QAAL,CAAc;AAAEV,QAAAA,QAAQ,EAAE,IAAZ;AAAkBC,QAAAA,SAAS,EAAEyD,IAA7B;AAAmCxD,QAAAA,aAAa,EAAEyD;AAAlD,OAAd;AACH,KA5ZkC;AAAA;;AAgDnCC,EAAAA,iBAAiB,GAAG;AAChB,QAAI,KAAK/E,KAAL,CAAW2B,IAAX,CAAgBC,MAApB,EAA4B;AACxB,UAAIpB,cAAc,GAAG,EAArB;AAEA,WAAKR,KAAL,CAAW2B,IAAX,CAAgBC,MAAhB,CAAuBoD,OAAvB,CAA+B9C,IAAI,IAAI;AACnC1B,QAAAA,cAAc,CAACkC,IAAf,CAAoBR,IAAI,CAAC+C,GAAzB;AACH,OAFD;AAIA,WAAKpD,QAAL,CAAc;AACVrB,QAAAA;AADU,OAAd;AAGH;;AAED,QAAI0E,OAAO,GAAG,KAAKC,YAAL,CAAkB,KAAKnF,KAAL,CAAW2B,IAAX,CAAgByD,WAAlC,CAAd;AACAnG,IAAAA,QAAQ,CAACiG,OAAD,CAAR,CAAkBxB,IAAlB,CAAwBC,QAAD,IAAc;AACjC,WAAK9B,QAAL,CAAc;AAAEP,QAAAA,IAAI,EAAE,CAAC,GAAGqC,QAAJ;AAAR,OAAd;AACH,KAFD;AAIA,SAAK3D,KAAL,CAAWgD,QAAX,CAAoBvD,SAAS,EAA7B;AACH;;AAED4F,EAAAA,kBAAkB,GAAG;AACjB,QAAI,KAAKrF,KAAL,CAAW2B,IAAX,CAAgBC,MAApB,EAA4B;AACxB,UAAIpB,cAAc,GAAG,EAArB;AAEA,WAAKR,KAAL,CAAW2B,IAAX,CAAgBC,MAAhB,CAAuBoD,OAAvB,CAA+B9C,IAAI,IAAI;AACnC1B,QAAAA,cAAc,CAACkC,IAAf,CAAoBR,IAAI,CAAC+C,GAAzB;AACH,OAFD;AAIA,WAAK9E,KAAL,CAAWK,cAAX,GAA4BA,cAA5B;AACH;;AAED,QAAI0E,OAAO,GAAG,KAAKC,YAAL,CAAkB,KAAKnF,KAAL,CAAW2B,IAAX,CAAgByD,WAAlC,CAAd;AACAnG,IAAAA,QAAQ,CAACiG,OAAD,CAAR,CAAkBxB,IAAlB,CAAwBC,QAAD,IAAc;AACjC,WAAKxD,KAAL,CAAWmB,IAAX,GAAkB,CAAC,GAAGqC,QAAJ,CAAlB;AACH,KAFD;AAGH;;AAgBD2B,EAAAA,eAAe,CAAC1D,MAAD,EAAS;AACpB,QAAIA,MAAM,CAACmB,MAAP,GAAgB,CAApB,EAAuB;AACnB,aAAOnB,MAAM,CAAC,CAAD,CAAN,CAAUqD,GAAjB;AACH,KAFD,MAEO;AACH,aAAO,qHAAP;AACH;AACJ;;AAwJDM,EAAAA,UAAU,CAACC,GAAD,EAAM;AACZlC,IAAAA,OAAO,CAACC,GAAR,CAAYiC,GAAZ;AACAA,IAAAA,GAAG,GAAGC,QAAQ,CAACD,GAAD,CAAd;AACAlC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAOiC,GAAnB;;AACA,QAAIA,GAAG,GAAG,EAAV,EAAc;AACV,aAAOA,GAAG,GAAG,OAAb;AACH,KAFD,MAEO,IAAIA,GAAG,IAAI,CAAP,IAAYA,GAAG,GAAG,MAAtB,EAA8B;AACjClC,MAAAA,OAAO,CAACC,GAAR,CAAYiC,GAAZ;AACA,aAAQA,GAAG,GAAG,EAAP,GAAa,MAApB;AACH,KAHM,MAGA,IACHA,GAAG,IAAI,MADJ,EACY;AACflC,MAAAA,OAAO,CAACC,GAAR,CAAYiC,GAAZ;AACA,aAAQA,GAAG,GAAG,EAAN,GAAW,EAAZ,GAAkB,OAAzB;AACH;AACJ;;AAEDL,EAAAA,YAAY,CAACO,IAAD,EAAO;AACf,QAAIC,MAAM,GAAG,cAAb;AACA,QAAIC,MAAM,GAAGF,IAAI,CAACG,KAAL,CAAWF,MAAX,CAAb;;AACA,QAAIC,MAAJ,EAAY;AACR,UAAItE,IAAI,GAAG,EAAX;AACAsE,MAAAA,MAAM,CAACZ,OAAP,CAAgB9C,IAAD,IAAU;AACrBZ,QAAAA,IAAI,CAACoB,IAAL,CAAUR,IAAI,CAAC4D,KAAL,CAAW,CAAX,CAAV;AACH,OAFD;AAGA,aAAQxE,IAAR;AACH,KAND,MAMO;AACH,aAAO,KAAP;AACH;AACJ;;AAEDyE,EAAAA,iBAAiB,CAACX,WAAD,EAAcY,OAAd,EAAsBC,YAAtB,EAAoC;AACjD;AAEA,SAAK9F,KAAL,CAAWmB,IAAX,CAAgB0D,OAAhB,CAAyB9C,IAAD,IACpBkD,WAAW,GAAGA,WAAW,CAACc,OAAZ,CAAoB,MAAMhE,IAAI,CAAC7B,IAA/B,EAAsC,iBAAgB6B,IAAI,CAACS,GAAI,KAAI,MAAMT,IAAI,CAAC7B,IAAK,MAAnF,CADlB;;AAGA,QAAI2F,OAAO,CAACjD,MAAR,GAAiB,CAArB,EAAwB;AACpBqC,MAAAA,WAAW,GAAGA,WAAW,GAAG,oBAA5B;AACH;;AACDY,IAAAA,OAAO,CAAChB,OAAR,CAAiB9C,IAAD,IAAU;AACtBkD,MAAAA,WAAW,IAAK,kBAAiBlD,IAAI,CAACS,GAAI,OAAMT,IAAI,CAACE,QAAS,OAA9D;AACH,KAFD;;AAGA,QAAI6D,YAAJ,EACA;AACIb,MAAAA,WAAW,IAAK,oCAAmCa,YAAa,MAAKA,YAAa,OAAlF;AACH;;AACD,wBAAO;AAAK,MAAA,uBAAuB,EAAE;AAAEE,QAAAA,MAAM,EAAEf;AAAV,OAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH;;AAGDgB,EAAAA,aAAa,CAACC,IAAD,EAAM;AACf,QAAIC,QAAQ,GAAG,EAAf;;AACA,YAAQD,IAAR;AACI,WAAK,eAAL;AACIC,QAAAA,QAAQ,gBAAI;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAEJ,KAAKtG,KAAL,CAAW2B,IAAX,CAAgBiB,QAAhB,CAAyB,CAAzB,EAA4BD,GAA5B,KAAoC,KAAK3C,KAAL,CAAWiE,IAAX,CAAgBC,QAAhB,CAAyBvB,GAA7D,gBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAG,UAAA,SAAS,EAAC,eAAb;AACI,UAAA,OAAO,EAAE,MAAM;AACX,iBAAK3C,KAAL,CAAWgD,QAAX,CAAoBrE,aAAa,CAAC,KAAKqB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAsB,KAAKxC,KAAL,CAAWc,eAAjC,CAAjC,EACKyC,IADL,CACU,MAAM;AACR,mBAAK7B,QAAL,CAAc;AACVd,gBAAAA,aAAa,EAAE,KADL;AAEVE,gBAAAA,eAAe,EAAE;AAFP,eAAd;AAIH,aANL;AAOH,WATL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAYI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAZJ,eAaI;AAAG,UAAA,SAAS,EAAC,eAAb;AACI,UAAA,OAAO,EAAE,MAAM;AACX,iBAAKY,QAAL,CAAc;AACVhB,cAAAA,gBAAgB,EAAE,IADR;AAEVC,cAAAA,UAAU,EAAE;AACRyF,gBAAAA,UAAU,EAAE,SADJ;AAER5E,gBAAAA,IAAI,EAAE,KAAK3B,KAAL,CAAW2B,IAAX,CAAgBgB,GAFd;AAGR6D,gBAAAA,OAAO,EAAE,KAAKrG,KAAL,CAAWc;AAHZ;AAFF,aAAd;AAQH,WAVL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAbJ,CADJ,gBA4BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAG,UAAA,SAAS,EAAC,eAAb;AACI,UAAA,OAAO,EAAE,MAAM;AACX,iBAAKY,QAAL,CAAc;AACVhB,cAAAA,gBAAgB,EAAE,IADR;AAEVC,cAAAA,UAAU,EAAE;AACRyF,gBAAAA,UAAU,EAAE,SADJ;AAER5E,gBAAAA,IAAI,EAAC,KAAK3B,KAAL,CAAW2B,IAAX,CAAgBgB,GAFb;AAGR6D,gBAAAA,OAAO,EAAE,KAAKrG,KAAL,CAAWc;AAHZ;AAFF,aAAd;AAQH,WAVL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,CA9BI,CAAZ;AA6CA;;AACJ,WAAK,eAAL;AACIqF,QAAAA,QAAQ,gBACJ;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qFADJ,eAEI;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAG,UAAA,SAAS,EAAC,YAAb;AAA0B,UAAA,OAAO,EAAE,MAAI,KAAKzE,QAAL,CAAc;AAAEd,YAAAA,aAAa,EAAE;AAAjB,WAAd,CAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAG,UAAA,SAAS,EAAC,aAAb;AAA2B,UAAA,OAAO,EAAE,MAAM,KAAKf,KAAL,CAAWgD,QAAX,CAAoBpE,UAAU,CAAC,KAAKoB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,CAA9B,EACrCe,IADqC,CAChC,MAAM;AACR,iBAAK1D,KAAL,CAAW6C,OAAX,CAAmBH,IAAnB,CAAwB,UAAxB;AACH,WAHqC,CAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,CAFJ,CADJ;AAWA;;AACJ;AACI4D,QAAAA,QAAQ,gBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAZ;AACA;AA/DR;;AAiEA,wBAAO,oBAAC,MAAD;AACH,MAAA,IAAI,EAAE,KAAKnG,KAAL,CAAWY,aADd;AAEH,MAAA,mBAAmB,EAAEjB,UAFlB;AAGH,MAAA,WAAW,MAHR;AAIH,MAAA,OAAO,EAAE,MAAM;AAAE,aAAK+B,QAAL,CAAc;AAAEd,UAAAA,aAAa,EAAE;AAAjB,SAAd;AAAyC,OAJvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKHuF,QALG,CAAP;AAOH;;AAUDG,EAAAA,cAAc,CAACJ,IAAD,EAAM;AAChB,wBAAO,oBAAC,MAAD;AACH,MAAA,gBAAgB,EAAE,KAAKlG,KAAL,CAAWU,gBAD1B;AAEH,MAAA,UAAU,EAAI,KAAKV,KAAL,CAAWW,UAFtB;AAGH,MAAA,cAAc,EAAE,CAAC+D,IAAD,EAAMC,GAAN,KAAc;AAAE,aAAKF,cAAL,CAAoBC,IAApB,EAAyBC,GAAzB;AAA+B,OAH5D;AAIH,MAAA,IAAI,EAAE,KAAK9E,KAAL,CAAW0G,QAAX,CAAoBC,UAJvB;AAKH,MAAA,eAAe,EAAI,MAAI,KAAKjC,eAAL,EALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAOH;;AAED9F,EAAAA,UAAU,GAAE,CAEX;;AAUDgI,EAAAA,MAAM,GAAG;AACL,UAAM5G,KAAK,GAAG,KAAKA,KAAnB;AACA,wBAEI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACQ;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,OAAO,EAAE,MAAM,KAAK0B,cAAL,EAApB;AAA2C,MAAA,SAAS,EAAC,YAArD;AACI,MAAA,GAAG,EAAE,KAAK4D,eAAL,CAAqBtF,KAAK,CAAC2B,IAAN,CAAWC,MAAhC,CADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADR,eAMQ;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,GAAG,EAAE5B,KAAK,CAAC2B,IAAN,CAAWiB,QAAX,CAAoB,CAApB,EAAuBP,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,eAII;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAG,SAAQrC,KAAK,CAAC2B,IAAN,CAAWiB,QAAX,CAAoB,CAApB,EAAuBD,GAAI,EAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAkD3C,KAAK,CAAC2B,IAAN,CAAWiB,QAAX,CAAoB,CAApB,EAAuBR,QAAzE,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAKmD,UAAL,CAAgBvF,KAAK,CAAC2B,IAAN,CAAWkF,cAA3B,CAAJ,CAFJ,CAJJ,CADJ,eAUI;AAAK,MAAA,SAAS,EAAG,kBAAiB,KAAK1G,KAAL,CAAWM,QAAX,GAAsB,gBAAtB,GAAyC,EAAG,EAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,OAAO,EAAE,KAAK6D,cAAnB;AAAmC,MAAA,GAAG,EAAErB,OAAO,CAAC,6CAAD,CAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAGQ,KAAK9C,KAAL,CAAWM,QAAX,gBACI,oBAAC,mBAAD;AAAqB,MAAA,OAAO,EAAE,MAAM,KAAKoB,QAAL,CAAc;AAAEpB,QAAAA,QAAQ,EAAE;AAAZ,OAAd,CAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,OAAO,EAAE,KAAKgE,eAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAG,MAAA,OAAO,EAAE,MAAM,KAAKzE,KAAL,CAAWgD,QAAX,CAAoBxE,QAAQ,CAAC,KAAKwB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAqB,QAArB,CAA5B,EACbe,IADa,CACR,MAAM;AACR,aAAK1D,KAAL,CAAW6C,OAAX,CAAmBH,IAAnB,CAAwB,UAAxB;AACH,OAHa,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,CADJ,eASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,EAWQ1C,KAAK,CAAC2B,IAAN,CAAWiB,QAAX,CAAoB,CAApB,EAAuBD,GAAvB,KAA+B,KAAK3C,KAAL,CAAWiE,IAAX,CAAgBC,QAAhB,CAAyBvB,GAAxD,gBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAG,MAAA,SAAS,EAAC,eAAb;AAA6B,MAAA,OAAO,EAAE,MAAI;AAAC,aAAKd,QAAL,CAAc;AACrDd,UAAAA,aAAa,EAAE,IADsC;AAErDC,UAAAA,UAAU,EAAE;AAFyC,SAAd;AAGxC,OAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,CADJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPJ,eAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAG,MAAA,SAAS,EAAC,aAAb;AAA2B,MAAA,OAAO,EAAE,MAAM;AACtC,aAAKa,QAAL,CAAc;AACVX,UAAAA,UAAU,EAAE,IADF;AAEVT,UAAAA,QAAQ,EAAE;AAFA,SAAd;AAIH,OALD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA,CARJ,CADJ,gBAkBM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,eAAb;AACI,MAAA,OAAO,EAAE,MAAK;AACV,aAAKoB,QAAL,CAAc;AACdhB,UAAAA,gBAAgB,EAAE,IADJ;AAEdC,UAAAA,UAAU,EAAE;AACRyF,YAAAA,UAAU,EAAE,MADJ;AAER5E,YAAAA,IAAI,EAAE3B,KAAK,CAAC2B,IAAN,CAAWgB;AAFT;AAFE,SAAd;AAOP,OATD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,CA7Bd,CADJ,CADJ,GA+CE,IAlDV,CAVJ,CADJ,eAiEI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQ,KAAKxC,KAAL,CAAWe,UAAX,gBACA,oBAAC,QAAD;AAAU,MAAA,WAAW,EAAElB,KAAK,CAAC2B,IAAN,CAAWyD,WAAlC;AACQ,MAAA,KAAK,EAAE,KAAKT,WADpB;AAEQ,MAAA,cAAc,EAAE,CAACE,IAAD,EAAMC,GAAN,KAAc;AAAE,aAAKF,cAAL,CAAoBC,IAApB,EAAyBC,GAAzB;AAA+B,OAFvE;AAGQ,MAAA,UAAU,EAAC,QAHnB;AAIQ,MAAA,OAAO,EAAE9E,KAAK,CAAC2B,IAAN,CAAWqE,OAJ5B;AAKQ,MAAA,YAAY,EAAEhG,KAAK,CAAC2B,IAAN,CAAWsE,YALjC;AAMQ,MAAA,MAAM,EAAEjG,KAAK,CAAC2B,IAAN,CAAWgB,GAN3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,GAQS,KAAKoD,iBAAL,CAAuB/F,KAAK,CAAC2B,IAAN,CAAWyD,WAAlC,EAA8CpF,KAAK,CAAC2B,IAAN,CAAWqE,OAAzD,EAAiEhG,KAAK,CAAC2B,IAAN,CAAWsE,YAA5E,CAVjB,CAjEJ,eA+EI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQ,KAAK3D,YAAL,CAAkBtC,KAAK,CAAC2B,IAAN,CAAWY,QAA7B,CAFR,EAKQ,KAAKpC,KAAL,CAAWQ,KAAX,GAAmBX,KAAK,CAAC2B,IAAN,CAAWY,QAAX,CAAoBQ,MAAvC,gBACI;AAAI,MAAA,OAAO,EAAE,MAAI;AAAC,aAAKlB,QAAL,CAAc;AAAClB,UAAAA,KAAK,EAAE,KAAKR,KAAL,CAAWQ,KAAX,GAAiB;AAAzB,SAAd;AAA2C,OAA7D;AAA+D,MAAA,SAAS,EAAC,eAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA2F,UAA3F,CADJ,GAEE,IAPV,CA/EJ,eAyFI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKyD,SAAL,EADL,CADJ,eAII;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,WAAD;AAAa,MAAA,GAAG,EAAE,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKrC,QAAL,CAAc/B,KAAK,CAAC2B,IAAN,CAAWmB,KAAzB,CADL,CADJ,EAKQ9C,KAAK,CAAC2B,IAAN,CAAWmB,KAAX,CAAiBC,MAAjB,gBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDADJ,GAEM,IAPd,CAJJ,eAcA;AAAM,MAAA,SAAS,EAAC,cAAhB;AAA+B,MAAA,QAAQ,EAAGI,KAAD,IAAW,KAAK5E,WAAL,CAAiByB,KAAK,CAAC2B,IAAN,CAAWgB,GAA5B,EAAiCQ,KAAjC,EAAwC,QAAxC,CAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACQ;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,WAAW,EAAC,iCAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADR,CAdA,CAzFJ,CANR,CADJ,EAuHQ,KAAKhD,KAAL,CAAWI,QAAX,gBACA,oBAAC,aAAD;AACI,MAAA,EAAE,EAAEP,KAAK,CAAC2B,IAAN,CAAWgB,GADnB;AAEI,MAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWK,cAFvB;AAGI,MAAA,IAAI,EAAE,KAAKL,KAAL,CAAWI,QAHrB;AAII,MAAA,GAAG,EAAE,CAJT;AAKI,MAAA,OAAO,EAAE,MAAM,KAAKuB,mBAAL,EALnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,GAQE,IA/HV,EAkIQ,KAAKsE,aAAL,CAAmB,KAAKjG,KAAL,CAAWa,UAA9B,CAlIR,EAqIQ,KAAKyF,cAAL,EArIR,eAwII,oBAAC,MAAD;AAAQ,MAAA,SAAS,EAAC,aAAlB;AACI,MAAA,OAAO,EAAE,MAAM;AAAE,aAAK5E,QAAL,CAAc;AAAEL,UAAAA,yBAAyB,EAAE;AAA7B,SAAd;AAAoD,OADzE;AAEI,MAAA,IAAI,EAAE,KAAKrB,KAAL,CAAWqB,yBAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGI;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6HAAqD3B,MAAM,CAAC,KAAKM,KAAL,CAAWsB,kBAAX,CAA8BqF,YAA/B,CAAN,CAAmDC,MAAnD,CAA0D,GAA1D,CAArD,CADJ,CAHJ,CAxIJ,eAgJI,oBAAC,QAAD;AACI,MAAA,YAAY,EAAE;AACVC,QAAAA,QAAQ,EAAE,QADA;AAEVC,QAAAA,UAAU,EAAE;AAFF,OADlB;AAKI,MAAA,IAAI,EAAE,KAAK9G,KAAL,CAAWgB,QALrB;AAMI,MAAA,OAAO,EAAE,MAAM,KAAKU,QAAL,CAAc;AAAEV,QAAAA,QAAQ,EAAE;AAAZ,OAAd,CANnB;AAOI,MAAA,gBAAgB,EAAE,IAPtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQI,oBAAC,QAAD;AAAU,MAAA,SAAS,EAAE,CAArB;AAAwB,MAAA,OAAO,EAAC,QAAhC;AAAyC,MAAA,QAAQ,EAAE,KAAKhB,KAAL,CAAWkB,aAAX,GAAyB,SAAzB,GAAmC,SAAtF;AAAiG,MAAA,OAAO,EAAE,KAAKlB,KAAL,CAAWiB,SAArH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiI,KAAKjB,KAAL,CAAWiB,SAA5I,CARJ,CAhJJ,CAFJ;AA8JH;;AA9jBkC;;AAikBvC,MAAM8F,eAAe,GAAI/G,KAAD,IAAW;AAC/B,SAAO;AACH8D,IAAAA,IAAI,EAAE9D,KAAK,CAAC8D,IADT;AAEHyC,IAAAA,QAAQ,EAAEvG,KAAK,CAACuG;AAFb,GAAP;AAIH,CALD;;AAOA,eAAexI,OAAO,CAACgJ,eAAD,CAAP,CAAyB7H,UAAU,CAACa,cAAD,CAAnC,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport MyButton from '../ultils/button';\r\nimport './postDetailCard.scss';\r\nimport ImageLightBox from '../ultils/ImageLightBox'\r\nimport { connect } from 'react-redux';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport faEllipsisH from '@fortawesome/fontawesome-free-solid/faEllipsisH';\r\nimport { likePost, \r\n        unlikePost, \r\n        makeComment, \r\n        hidePost, \r\n        likeComment, \r\n        unLikeComment, \r\n        deleteComment, \r\n        deletePost, \r\n        clearPostDetail, \r\n        unSavePost,\r\n        savePost } \r\n        from '../../actions/product_actions';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { getTagId } from '../../actions/tag_actions';\r\nimport AvatarGroup from '@material-ui/lab/AvatarGroup';\r\nimport NativeClickListener from '../ultils/NativeClickListener';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Report from '../Report/Report';\r\nimport { getPolicy } from '../../actions/policy_actions';\r\nimport PostEdit from '../PostEdit/index';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport moment from 'moment';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\n\r\nclass PostDetailCard extends Component {\r\n\r\n    state = {\r\n        buttons: [\r\n            {\r\n                name: 'Like',\r\n                linkTo: '/',\r\n            },\r\n            {\r\n                name: 'Comment',\r\n                linkTo: '/postDetail',\r\n            },\r\n            {\r\n                name: 'Pin',\r\n                linkTo: '',\r\n            },\r\n        ],\r\n\r\n        lightbox: false,\r\n        lightboxImages: [],\r\n\r\n        dropdown: false,\r\n        commentAdvancedBtn: false,\r\n        \r\n        limit: 3,\r\n        skip: 0,\r\n\r\n        isReportFormShow: false,\r\n        reportData: {},\r\n\r\n        DialogShowing: false,\r\n        dialogType : \"\",\r\n\r\n        commentSelected: \"\",\r\n\r\n        showEditor: false,\r\n        setSnack: false,\r\n        SnackMess: \"\",\r\n        reportSuccess: false,\r\n\r\n        tags: [],\r\n\r\n        setfollowerDiaglog: false,\r\n        alertFunctionIsRestricted: false,\r\n\r\n        restrictedFunction: {}\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.post.images) {\r\n            let lightboxImages = [];\r\n\r\n            this.props.post.images.forEach(item => {\r\n                lightboxImages.push(item.url)\r\n            })\r\n\r\n            this.setState({\r\n                lightboxImages\r\n            })\r\n        }\r\n\r\n        let hashtag = this.findHashtags(this.props.post.description)\r\n        getTagId(hashtag).then((response) => {\r\n            this.setState({ tags: [...response] });\r\n        })\r\n\r\n        this.props.dispatch(getPolicy());\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.post.images) {\r\n            let lightboxImages = [];\r\n\r\n            this.props.post.images.forEach(item => {\r\n                lightboxImages.push(item.url)\r\n            })\r\n\r\n            this.state.lightboxImages = lightboxImages\r\n        }\r\n\r\n        let hashtag = this.findHashtags(this.props.post.description)\r\n        getTagId(hashtag).then((response) => {\r\n            this.state.tags = [...response]\r\n        })\r\n    }\r\n\r\n    handlelightBox = () => {\r\n        if (this.props.post.images) {\r\n            this.setState({\r\n                lightbox: true,\r\n            })\r\n        }\r\n    }\r\n\r\n    handlelightBoxClose = () => {\r\n        this.setState({\r\n            lightbox: false\r\n        })\r\n    }\r\n\r\n    renderCardImage(images) {\r\n        if (images.length > 0) {\r\n            return images[0].url;\r\n        } else {\r\n            return 'https://cdn.shopify.com/s/files/1/0013/3529/6118/products/Terracotta-Pot-6_Sansevieria-Zeylanica-6.jpg?v=1544979697';\r\n        }\r\n    }\r\n\r\n    showUser = (users) => {\r\n        return users.map((item, i) => (\r\n            <Avatar className=\"userlike_avt\" alt={item.userName} src={item.avt} />\r\n        ))\r\n    }\r\n\r\n    showComments = (comments) => {\r\n        let commentsToShow = [];\r\n        if (comments[0].content) {\r\n            for (let i = 0; i < this.state.limit; i++) {\r\n                if (this.props.post.comments[i] && this.props.post.comments[i].content) {\r\n                    commentsToShow.push(this.props.post.comments[i]);\r\n                }\r\n                else{\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return commentsToShow.map((item, i) =>\r\n            item ?\r\n                <div className=\"comment\"\r\n                    onMouseEnter={() => this.setState({ commentAdvancedBtn: item._id})}\r\n                    onMouseLeave={() => this.setState({ commentAdvancedBtn: \"\" })}\r\n                >\r\n                    <div className=\"user_avt\">\r\n                        <img src={item.postedBy[0].avt} />\r\n                    </div>\r\n                    <div className=\"content\">\r\n                        <b onClick={() => {\r\n                            this.props.history.push(`/user/${item.postedBy[0]._id}`)\r\n                        }}>{item.postedBy[0].userName}</b> {item.content}\r\n                        <p>\r\n                            {item.likes.length} lượt thích\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"like_button\">\r\n                        {\r\n                            item.likes[0] ? <img onClick={() => this.props.dispatch(unLikeComment(this.props.post._id,item._id))}\r\n                            src={require('../../asset/newfeed_page/active_like_icon2x.png')} />\r\n                            :\r\n                            <img onClick={() => this.props.dispatch(likeComment(this.props.post._id, item._id))}\r\n                            src={require('../../asset/newfeed_page/like_icon2x.png')} />\r\n                        }\r\n                        <div>\r\n                        {\r\n                            this.state.commentAdvancedBtn == item._id ? \r\n                            <img onClick={() => { this.setState(\r\n                                {\r\n                                    DialogShowing: true,\r\n                                    dialogType: \"commentHandle\",\r\n                                    commentSelected: item._id})}} \r\n                                src={require('../../asset/headerIcon/advance_button2x.png')}/>\r\n                            :\"\"\r\n                        }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            : null\r\n        )\r\n    }\r\n\r\n    makeComment = (postId, event) => {\r\n\r\n        event.preventDefault();\r\n        event.persist();\r\n        console.log(postId, event.target[0].value);\r\n        this.props.dispatch(makeComment(postId, event.target[0].value, \"detail\")).then(response => {\r\n            if(response.payload.restricted){\r\n                console.log(response.payload);\r\n                this.setState({alertFunctionIsRestricted: true, restrictedFunction: response.payload.restrictedFunction})\r\n            }else{\r\n                console.log(event.target[0].value);\r\n                event.target[0].value = \"\"\r\n            }\r\n        })        \r\n        // event.preventDefault();\r\n        // event.persist();\r\n        // console.log(postId, event.target[0].value);\r\n        // this.props.dispatch(makeComment(postId, event.target[0].value,)).then(\r\n        //     event.target[0].value = \"\"\r\n        // )\r\n    }\r\n\r\n    defaultLink = (item, i) => {\r\n        switch (item.name) {\r\n            case 'Like':\r\n                const liked = this.props.post.likes.filter(item => item._id === this.props.user.userData._id);\r\n                return (\r\n                    <div>\r\n                        {\r\n                            liked[0] ? <img onClick={() => this.props.dispatch(unlikePost(this.props.post._id,\"detail\")).then(response =>{\r\n                                if(response.payload.restricted){\r\n                                    console.log(response.payload);\r\n                                    this.setState({alertFunctionIsRestricted: true, restrictedFunction: response.payload.restrictedFunction})\r\n                                }\r\n                            })}\r\n                            src={require('../../asset/newfeed_page/active_like_icon2x.png')} />\r\n                            :\r\n                            <img onClick={() => this.props.dispatch(likePost(this.props.post._id, \"detail\")).then(response =>{\r\n                                if(response.payload.restricted){\r\n                                    console.log(response.payload);\r\n                                    this.setState({alertFunctionIsRestricted: true, restrictedFunction: response.payload.restrictedFunction})\r\n                                }\r\n                            })}\r\n                            src={require('../../asset/newfeed_page/like_icon2x.png')} />\r\n                        }\r\n                    </div>\r\n                )\r\n            case 'Pin':\r\n                const saved = this.props.user.userData.saved.filter(item => item == this.props.post._id);\r\n                return (\r\n                    <div >\r\n                        {\r\n                            saved[0] ?\r\n                                <img onClick={() => this.props.dispatch(unSavePost(this.props.post._id)).then(response =>{\r\n                                    if(response.payload.restricted){\r\n                                        console.log(response.payload);\r\n                                        this.setState({alertFunctionIsRestricted: true, restrictedFunction: response.payload.restrictedFunction})\r\n                                    }\r\n                                })}\r\n                                    src={require('../../asset/newfeed_page/stored_icon2x.png')} />\r\n                                : <img onClick={() => this.props.dispatch(savePost(this.props.post._id)).then(response =>{\r\n                                    if(response.payload.restricted){\r\n                                        console.log(response.payload);\r\n                                        this.setState({alertFunctionIsRestricted: true, restrictedFunction: response.payload.restrictedFunction})\r\n                                    }\r\n                                })}\r\n                                src={require('../../asset/newfeed_page/store_icon2x.png')} />\r\n                        }\r\n                    </div>\r\n                )\r\n        }\r\n    }\r\n\r\n    showLinks = () => {\r\n        let list = [];\r\n        return this.state.buttons.map((item, i) => {\r\n            return this.defaultLink(item, i)\r\n        })\r\n    }\r\n\r\n    toggleDropdown = (syntheticEvent) => {\r\n        console.log('toggle dropdown')\r\n        this.setState(prevState => ({ dropdown: !prevState.dropdown }))\r\n    }\r\n\r\n    handleBodyClick = (syntheticEvent) => {\r\n        console.log('body click')\r\n    }\r\n    \r\n    postedDate(day) {\r\n        console.log(day);\r\n        day = parseInt(day);\r\n        console.log(typeof day)\r\n        if (day < 30) {\r\n            return day + \" ngày\";\r\n        } else if (day <= 1 && day > 0.0417) {\r\n            console.log(day);\r\n            return (day * 24) + \" giờ\";\r\n        } else if (\r\n            day <= 0.0417) {\r\n            console.log(day);\r\n            return (day * 24 * 60) + \" phút\";\r\n        }\r\n    }\r\n\r\n    findHashtags(Text) {\r\n        var regexp = /\\B\\#\\w\\w+\\b/g\r\n        let result = Text.match(regexp);\r\n        if (result) {\r\n            let tags = [];\r\n            result.forEach((item) => {\r\n                tags.push(item.slice(1));\r\n            })\r\n            return (tags);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    handleDescription(description, userTag,locationName) {\r\n        //let hashtag = this.findHashtags(description)\r\n        \r\n        this.state.tags.forEach((item) =>\r\n            description = description.replace('#' + item.name, `<a href=\"/tag/${item._id}\">${\"#\" + item.name}</a>`)\r\n        )\r\n        if (userTag.length > 0) {\r\n            description = description + \"<b>- cùng với </b>\"\r\n        }\r\n        userTag.forEach((item) => {\r\n            description += `<a href=\"/user/${item._id}\"}>@${item.userName}</a> `\r\n        })\r\n        if (locationName)\r\n        {\r\n            description += ` <b>- tại <b> <a href=\"/location/${locationName}\"> ${locationName} </a>`\r\n        }\r\n        return <div dangerouslySetInnerHTML={{ __html: description }} />\r\n    }\r\n    \r\n    \r\n    confirmDialog(type){\r\n        let template = \"\";\r\n        switch (type) {\r\n            case \"commentHandle\":\r\n                template = (<div className=\"commentHandle\">\r\n                    {\r\n                        this.props.post.postedBy[0]._id === this.props.user.userData._id ?\r\n                            <div>\r\n                                <p className=\"delete_button\"\r\n                                    onClick={() => {\r\n                                        this.props.dispatch(deleteComment(this.props.post._id, this.state.commentSelected))\r\n                                            .then(() => {\r\n                                                this.setState({\r\n                                                    DialogShowing: false,\r\n                                                    commentSelected: \"\"\r\n                                                })\r\n                                            })\r\n                                    }}\r\n                                >Xóa</p>\r\n                                <hr />\r\n                                <p className=\"report_button\"\r\n                                    onClick={() => {\r\n                                        this.setState({\r\n                                            isReportFormShow: true,\r\n                                            reportData: {\r\n                                                reportType: \"comment\",\r\n                                                post: this.props.post._id ,\r\n                                                comment: this.state.commentSelected,\r\n                                            }\r\n                                        }) \r\n                                    }}\r\n                                 >Báo cáo</p>\r\n                            </div>\r\n                        :\r\n                        <div>\r\n                            <p className=\"report_button\" \r\n                                onClick={() => {\r\n                                    this.setState({\r\n                                        isReportFormShow: true,\r\n                                        reportData: {\r\n                                            reportType: \"comment\",\r\n                                            post:this.props.post._id,\r\n                                            comment: this.state.commentSelected,\r\n                                        }\r\n                                    })\r\n                                }}>Báo cáo</p>\r\n                        </div>\r\n                    }\r\n                </div>)\r\n                break;\r\n            case \"deleteConfirm\":\r\n                template = (\r\n                    <div className=\"deleteConfirm\">\r\n                        <h5> Bạn chắc chắn muốn xóa bài viết này?</h5>\r\n                        <div className=\"btn_wrapper\">\r\n                            <p className=\"cancel_btn\" onClick={()=>this.setState({ DialogShowing: false })}>Hủy</p>\r\n                            <p className=\"confirm_btn\" onClick={() => this.props.dispatch(deletePost(this.props.post._id))\r\n                                .then(() => {\r\n                                    this.props.history.push('/newfeed');\r\n                                })}>Xóa</p>\r\n                        </div>\r\n                    </div>)\r\n                break;\r\n            default: \r\n                template = (<div></div>)\r\n                break;\r\n        }\r\n        return <Dialog\r\n            open={this.state.DialogShowing}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={() => { this.setState({ DialogShowing: false }) }}>\r\n           {template}\r\n        </Dialog>\r\n    }\r\n    \r\n    closeReportForm = () =>{\r\n        this.setState({\r\n            isReportFormShow: false,\r\n            reportData: {},\r\n            DialogShowing: false,\r\n        }) \r\n    }\r\n\r\n    showReportForm(type){\r\n        return <Report \r\n            isReportFormShow={this.state.isReportFormShow}\r\n            reportData = {this.state.reportData}\r\n            handleSnackBar={(mess,res) => { this.handleSnackBar(mess,res) }}\r\n            list={this.props.policies.policyList}\r\n            closeReportForm = {()=>this.closeReportForm()}\r\n        />\r\n    }\r\n    \r\n    deletePost(){\r\n        \r\n    }\r\n\r\n    closeEditor = () => {\r\n        this.setState({ showEditor: !this.state.showEditor })\r\n    }\r\n\r\n    handleSnackBar = (mess, res) => {\r\n        this.setState({ setSnack: true, SnackMess: mess, reportSuccess: res})\r\n    }\r\n\r\n    render() {\r\n        const props = this.props;\r\n        return (\r\n   \r\n            <div className=\"detail_card\">\r\n                <div className=\"card_item_wrapper\">\r\n                        <div className=\"left\"> \r\n                            <img onClick={() => this.handlelightBox()} className='item_image'\r\n                                src={this.renderCardImage(props.post.images)}\r\n                            />\r\n                        </div>\r\n                        <div className=\"right\"> \r\n                            <div className=\"card_row\">\r\n                                <div className=\"user_info\">\r\n                                    <div className=\"avt\">\r\n                                        <img src={props.post.postedBy[0].avt} />\r\n                                    </div>\r\n                                    <div className=\"userName\">\r\n                                        <Link to={`/user/${props.post.postedBy[0]._id}`}>{props.post.postedBy[0].userName}</Link>\r\n                                        <p>{this.postedDate(props.post.dateDifference)}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className={`advance_button ${this.state.dropdown ? \"active_dropbox\" : \"\"}`}>\r\n                                    <img onClick={this.toggleDropdown} src={require('../../asset/headerIcon/advance_button2x.png')} />\r\n                                    {\r\n                                        this.state.dropdown ?\r\n                                            <NativeClickListener onClick={() => this.setState({ dropdown: false })}>\r\n                                                <div className=\"dropdown\" onClick={this.handleBodyClick}>\r\n                                                    <div>\r\n                                                        <p onClick={() => this.props.dispatch(hidePost(this.props.post._id,\"detail\"))\r\n                                                            .then(() => {\r\n                                                                this.props.history.push('/newfeed');\r\n                                                            })\r\n                                                       }>\r\n                                                        Ẩn</p>\r\n                                                    </div>\r\n                                                    <hr />\r\n                                                    {\r\n                                                        props.post.postedBy[0]._id === this.props.user.userData._id ?\r\n                                                            <div>\r\n                                                                <div>\r\n                                                                <p className=\"delete_button\" onClick={()=>{this.setState({\r\n                                                                    DialogShowing: true,\r\n                                                                    dialogType: \"deleteConfirm\",\r\n                                                                })}} >Xóa</p>\r\n                                                                </div>\r\n                                                                <hr />\r\n                                                                <div>\r\n                                                                <p className=\"edit_button\" onClick={() => {\r\n                                                                    this.setState({\r\n                                                                        showEditor: true,\r\n                                                                        dropdown: false\r\n                                                                    })\r\n                                                                }} >Sửa</p>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            : <div>\r\n                                                                <p className=\"report_button\" \r\n                                                                    onClick={() =>{\r\n                                                                        this.setState({\r\n                                                                        isReportFormShow: true,\r\n                                                                        reportData: { \r\n                                                                            reportType: \"post\",\r\n                                                                            post: props.post._id,\r\n                                                                        }\r\n                                                                    })\r\n                                                                }}>Báo cáo</p>\r\n                                                            </div>\r\n                                                    }\r\n\r\n                                                </div>\r\n                                        </NativeClickListener>\r\n                                        : null\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"description\">\r\n                                {\r\n                                    this.state.showEditor?\r\n                                    <PostEdit description={props.post.description} \r\n                                            close={this.closeEditor} \r\n                                            handleSnackBar={(mess,res) => { this.handleSnackBar(mess,res) }} \r\n                                            ActionType=\"detail\" \r\n                                            userTag={props.post.userTag} \r\n                                            locationName={props.post.locationName}\r\n                                            postId={props.post._id}/>\r\n                                            :this.handleDescription(props.post.description,props.post.userTag,props.post.locationName)\r\n                                }\r\n                            </div>\r\n                        \r\n                            <div className=\"comment_list\">\r\n                                {\r\n                                    this.showComments(props.post.comments)\r\n                                }\r\n                                {\r\n                                    this.state.limit < props.post.comments.length ?\r\n                                        <h6 onClick={()=>{this.setState({limit: this.state.limit+3})}} className=\"view_more_cmt\">{`Xem thêm`}</h6>\r\n                                    : null\r\n                                }\r\n                            </div>\r\n                            <div className=\"card_function\"> \r\n                                <div className=\"button_wrapper\">\r\n                                    {this.showLinks()}\r\n                                </div>\r\n                                <div className=\"likes\">\r\n                                    <AvatarGroup max={3}>\r\n                                        {this.showUser(props.post.likes)}\r\n                                    </AvatarGroup>\r\n                                    {\r\n                                        props.post.likes.length ?\r\n                                            <p> Đã thích bài viết </p>\r\n                                            : null\r\n                                    }\r\n                                </div>\r\n                            <form className=\"comment_form\" onSubmit={(event) => this.makeComment(props.post._id, event, \"Detail\")} >\r\n                                    <div className=\"comment_input\">\r\n                                        <input placeholder=\"Nhập hình luận....\" />\r\n                                    </div>\r\n                            </form>\r\n                            </div>\r\n                        </div>\r\n                </div>\r\n                {\r\n                    this.state.lightbox ?\r\n                    <ImageLightBox\r\n                        id={props.post._id}\r\n                        images={this.state.lightboxImages}\r\n                        open={this.state.lightbox}\r\n                        pos={0}\r\n                        onclose={() => this.handlelightBoxClose()}\r\n                    />\r\n                    : null\r\n                }\r\n                {\r\n                    this.confirmDialog(this.state.dialogType)\r\n                }\r\n                {\r\n                    this.showReportForm()\r\n                }\r\n                {\r\n                <Dialog className=\"dialog_cont\" \r\n                    onClose={() => { this.setState({ alertFunctionIsRestricted: false })}} \r\n                    open={this.state.alertFunctionIsRestricted} >\r\n                    <div className=\"dialog_header\">\r\n                        <h5>Bạn đã bị hạn chế chức năng này cho đến {moment(this.state.restrictedFunction.amountOfTime).format(\"L\")}</h5>\r\n                    </div>\r\n                </Dialog>\r\n                }\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left'\r\n                    }}\r\n                    open={this.state.setSnack}\r\n                    onClose={() => this.setState({ setSnack: false })}\r\n                    autoHideDuration={3000}>\r\n                    <MuiAlert elevation={6} variant=\"filled\" severity={this.state.reportSuccess?\"success\":\"warning\"} message={this.state.SnackMess}>{this.state.SnackMess}</MuiAlert>\r\n                </Snackbar>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state.user,\r\n        policies: state.policies,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(PostDetailCard));"]},"metadata":{},"sourceType":"module"}
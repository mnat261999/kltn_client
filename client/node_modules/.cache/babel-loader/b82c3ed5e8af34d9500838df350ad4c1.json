{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\ultils\\\\card.js\";\nimport React, { Component } from 'react';\nimport './card.scss';\nimport ImageLightBox from './ImageLightBox';\nimport { connect } from 'react-redux';\nimport { likePost, unlikePost, makeComment, hidePost, deletePost, savePost, unSavePost } from '../../actions/product_actions';\nimport { unfollow, follow } from '../../actions/user_action';\nimport { getTagId } from '../../actions/tag_actions';\nimport Avatar from '@material-ui/core/Avatar';\nimport AvatarGroup from '@material-ui/lab/AvatarGroup';\nimport NativeClickListener from '../ultils/NativeClickListener';\nimport { Link, withRouter } from 'react-router-dom';\nimport Report from '../Report/Report';\nimport { getPolicy } from '../../actions/policy_actions';\nimport Slide from '@material-ui/core/Slide';\nimport Dialog from '@material-ui/core/Dialog';\nimport PostEdit from '../PostEdit/index';\nimport { Button } from '@material-ui/core';\nimport { CircleX } from 'tabler-icons-react';\nimport moment from 'moment';\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return /*#__PURE__*/React.createElement(Slide, Object.assign({\n    direction: \"up\",\n    ref: ref\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 12\n    }\n  }));\n});\n\nclass Card extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      buttons: [{\n        name: 'Like',\n        linkTo: '/'\n      }, {\n        name: 'Comment',\n        linkTo: '/postDetail'\n      }, {\n        name: 'Pin',\n        linkTo: ''\n      }],\n      lightbox: false,\n      lightboxImages: [],\n      dropdown: false,\n      reportData: {},\n      tags: [],\n      DialogShowing: false,\n      dialogType: \"\",\n      showEditor: false,\n      reportData: {},\n      setSnack: false,\n      setfollowerDiaglog: false,\n      alertFunctionIsRestricted: false,\n      restrictedFunction: {}\n    };\n\n    this.handlelightBox = () => {\n      if (this.props.images) {\n        this.setState({\n          lightbox: true\n        });\n      }\n    };\n\n    this.handlelightBoxClose = () => {\n      this.setState({\n        lightbox: false\n      });\n    };\n\n    this.showUser = users => {\n      return users.map((item, i) => /*#__PURE__*/React.createElement(Avatar, {\n        className: \"userlike_avt\",\n        alt: item.userName,\n        src: item.avt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }\n      }));\n    };\n\n    this.showComments = comments => {\n      let commentsToShow = [];\n      commentsToShow.push(comments[0]);\n      commentsToShow.push(comments[1]);\n      return commentsToShow.map((item, i) => item ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"comment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        onClick: () => {\n          this.props.history.push(`/user/${item.postedBy[0]._id}`);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }\n      }, item.postedBy[0].userName), \" \", item.content) : null);\n    };\n\n    this.makeComment = (postId, event) => {\n      event.preventDefault();\n      event.persist();\n      console.log(postId, event.target[0].value);\n      this.props.dispatch(makeComment(postId, event.target[0].value)).then(response => {\n        if (response.payload.restricted) {\n          console.log(response.payload);\n          this.setState({\n            alertFunctionIsRestricted: true,\n            restrictedFunction: response.payload.restrictedFunction\n          });\n        } else {\n          console.log(event.target[0].value);\n          event.target[0].value = \"\";\n        }\n      });\n    };\n\n    this.openEditor = () => {\n      this.setState({\n        showEditor: !this.state.showEditor\n      });\n      this.toggleDropdown();\n    };\n\n    this.closeEditor = () => {\n      let hashtag = this.findHashtags(this.props.description);\n      getTagId(hashtag).then(response => {\n        this.setState({\n          tags: [...response]\n        });\n      });\n      this.setState({\n        showEditor: !this.state.showEditor\n      });\n    };\n\n    this.handleClickunfollow = async id => {\n      await this.props.dispatch(unfollow(id));\n      this.props.handleSnackBar(\"Đã bỏ theo dõi\");\n    };\n\n    this.handleClickfollow = async id => {\n      await this.props.dispatch(follow(id));\n      this.props.handleSnackBar(\"Đã theo dõi\");\n    };\n\n    this.defaultLink = (item, i) => {\n      switch (item.name) {\n        case 'Like':\n          const liked = this.props.likes.filter(item => item._id === this.props.user.userData._id);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 21\n            }\n          }, liked[0] ? /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(unlikePost(this.props._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require('../../asset/newfeed_page/active_like_icon2x.png'),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 36\n            }\n          }) : /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(likePost(this.props._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require('../../asset/newfeed_page/like_icon2x.png'),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 25\n            }\n          }));\n\n        case 'Comment':\n          return /*#__PURE__*/React.createElement(\"div\", {\n            onClick: () => {\n              this.props.history.push(`/postDetail/${this.props._id}`);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            src: require('../../asset/newfeed_page/comment_icon2x.png'),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 25\n            }\n          }));\n\n        case 'Pin':\n          const saved = this.props.user.userData.saved.filter(item => item == this.props._id);\n          console.log(saved);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }\n          }, saved[0] ? /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(unSavePost(this.props._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require('../../asset/newfeed_page/stored_icon2x.png'),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 21\n            }\n          }) : /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(savePost(this.props._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require('../../asset/newfeed_page/store_icon2x.png'),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 21\n            }\n          }));\n      }\n    };\n\n    this.showLinks = () => {\n      let list = [];\n      return this.state.buttons.map((item, i) => {\n        return this.defaultLink(item, i);\n      });\n    };\n\n    this.toggleDropdown = syntheticEvent => {\n      console.log('toggle dropdown');\n      this.setState(prevState => ({\n        dropdown: !prevState.dropdown\n      }));\n    };\n\n    this.handleBodyClick = syntheticEvent => {\n      console.log('body click');\n    };\n\n    this.findTagId = tag => {\n      alert(\"tag\");\n    };\n\n    this.setSnack = () => {\n      this.setState({\n        setSnack: true\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.images) {\n      let lightboxImages = [];\n      this.props.images.forEach(item => {\n        lightboxImages.push(item.url);\n      });\n      this.setState({\n        lightboxImages\n      });\n    }\n\n    let hashtag = this.findHashtags(this.props.description);\n    getTagId(hashtag).then(response => {\n      this.setState({\n        tags: [...response]\n      });\n    });\n    this.props.dispatch(getPolicy());\n  }\n\n  renderCardImage(images) {\n    if (images.length > 0) {\n      return images[0].url;\n    } else {\n      return 'https://cdn.shopify.com/s/files/1/0013/3529/6118/products/Terracotta-Pot-6_Sansevieria-Zeylanica-6.jpg?v=1544979697';\n    }\n  }\n\n  postedDate(day) {\n    console.log(day);\n    day = parseInt(day);\n    console.log(typeof day);\n\n    if (day == 0) {\n      return \"Hôm nay\";\n    } else if (day < 30) {\n      return day + \" ngày\";\n    } else if (day > 30) {\n      console.log(day);\n      return Math.floor(day / 7) + \"tuần\";\n    } else if (day > 365) {\n      console.log(day);\n      return Math.floor(day / 365) + \"năm\";\n    }\n  }\n\n  findHashtags(Text) {\n    var regexp = /\\B\\#\\w\\w+\\b/g;\n    let result = Text.match(regexp);\n\n    if (result) {\n      let tags = [];\n      result.forEach(item => {\n        tags.push(item.slice(1));\n      });\n      return tags;\n    } else {\n      return false;\n    }\n  }\n\n  handleDescription(description, userTag, locationName) {\n    console.log(this.state.tags);\n    let hashtag = [];\n    this.state.tags.forEach(item => description = description.replace('#' + item.name, `<a href=\"tag/${item._id}\">${\"#\" + item.name}</a>`));\n\n    if (userTag.length > 0) {\n      description = description + \"<b>- cùng với </b>\";\n    }\n\n    userTag.forEach(item => {\n      if (!this.props.user.userData.blockedUsers.includes(item._id)) description += `<a href=\"/user/${item._id}\"}>@${item.userName}</a> `;\n    });\n\n    if (locationName) {\n      description += ` <b>- tại <b> <a href=\"/location/${locationName}\"> ${locationName} </a>`;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: description\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 16\n      }\n    });\n  }\n\n  closeReportForm() {\n    this.setState({\n      DialogShowing: false,\n      reportData: {}\n    });\n  }\n\n  confirmDialog(type) {\n    switch (type) {\n      case \"report\":\n        {\n          return /*#__PURE__*/React.createElement(Report, {\n            isReportFormShow: this.state.DialogShowing,\n            reportData: this.state.reportData,\n            list: this.props.policies.policyList,\n            handleSnackBar: mess => {\n              this.props.handleSnackBar(mess);\n            },\n            closeReportForm: () => this.closeReportForm(),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 24\n            }\n          });\n        }\n\n      case \"delete\":\n        {\n          return /*#__PURE__*/React.createElement(Dialog, {\n            open: this.state.DialogShowing,\n            TransitionComponent: Transition,\n            keepMounted: true,\n            onClose: () => {\n              this.setState({\n                DialogShowing: false\n              });\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 24\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"deleteConfirm\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 21\n            }\n          }, /*#__PURE__*/React.createElement(\"h5\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 25\n            }\n          }, \" B\\u1EA1n ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a b\\xE0i vi\\u1EBFt n\\xE0y?\"), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"btn_wrapper\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(\"p\", {\n            className: \"cancel_btn\",\n            onClick: () => this.setState({\n              DialogShowing: false\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 29\n            }\n          }, \"H\\u1EE7y\"), /*#__PURE__*/React.createElement(\"p\", {\n            className: \"confirm_btn\",\n            onClick: () => this.props.dispatch(deletePost(this.props._id)).then(response => {\n              console.log(response);\n\n              if (response.payload.success) {\n                this.props.handleSnackBar(\"Đã xóa bài viết\");\n                this.closeReportForm();\n              } else {\n                this.closeReportForm();\n                alert(\"đã xãy ra lỗi\");\n              }\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 29\n            }\n          }, \"X\\xF3a\"))));\n        }\n\n      default:\n        {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 24\n            }\n          });\n        }\n    }\n  }\n\n  render() {\n    const props = this.props;\n    const userProfile = this.props.likes;\n    const yourProfile = this.props.user.userData;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: `${props.grid}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_item_wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_action_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user_info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: props.postedBy[0].avt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"userName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/user/${props.postedBy[0]._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 41\n      }\n    }, props.postedBy[0].userName), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 41\n      }\n    }, this.postedDate(props.dateDifference)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: `advance_button ${this.state.dropdown ? \"active_dropbox\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: this.toggleDropdown,\n      src: require('../../asset/headerIcon/advance_button2x.png'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 33\n      }\n    }), this.state.dropdown ? /*#__PURE__*/React.createElement(NativeClickListener, {\n      onClick: () => this.setState({\n        dropdown: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown\",\n      onClick: this.handleBodyClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: () => this.props.dispatch(hidePost(this.props._id)).then(() => {\n        this.props.handleSnackBar(\"Đã ẩn bài viết\");\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 49\n      }\n    }, \"\\u1EA8n\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/postDetail/${this.props._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 49\n      }\n    }, \"chi ti\\u1EBFt b\\xE0i vi\\u1EBFt\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 45\n      }\n    }), props.postedBy[0]._id === this.props.user.userData._id ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 53\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: this.openEditor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 57\n      }\n    }, \"Ch\\u1EC9nh s\\u1EEDa\"))) : \"\", /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 45\n      }\n    }), props.postedBy[0]._id === this.props.user.userData._id ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"delete_button\",\n      onClick: () => {\n        this.setState({\n          DialogShowing: true,\n          dialogType: \"delete\"\n        });\n        console.log(this.state.DialogShowing);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 53\n      }\n    }, \"X\\xF3a\")) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 50\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"report_button\",\n      onClick: () => {\n        this.setState({\n          DialogShowing: true,\n          dialogType: \"report\",\n          reportData: {\n            reportType: \"post\",\n            post: props._id\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 53\n      }\n    }, \"B\\xE1o c\\xE1o\")))) : null)), this.state.showEditor ? /*#__PURE__*/React.createElement(PostEdit, {\n      locationName: props.locationName,\n      description: props.description,\n      close: this.closeEditor,\n      handleSnackBar: mess => {\n        this.props.handleSnackBar(mess);\n      },\n      ActionType: \"newFeed\",\n      userTag: props.userTag,\n      postId: props._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 33\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 33\n      }\n    }, this.handleDescription(props.description, props.userTag, props.locationName)), /*#__PURE__*/React.createElement(\"img\", {\n      onClick: () => this.handlelightBox(),\n      className: \"item_image\",\n      src: this.renderCardImage(props.images),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button_wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 29\n      }\n    }, this.showLinks()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"likes\",\n      onClick: () => {\n        this.setState({\n          setfollowerDiaglog: true\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(AvatarGroup, {\n      max: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 33\n      }\n    }, this.showUser(props.likes)), props.likes.length ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 37\n      }\n    }, \" \\u0110\\xE3 th\\xEDch b\\xE0i vi\\u1EBFt \") : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment_list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 29\n      }\n    }, props.comments.length > 2 ? /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: () => {\n        this.props.history.push(`/postDetail/${this.props._id}`);\n      },\n      className: \"view_more_cmt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 37\n      }\n    }, `Xem thêm bình luận`) : null, props.comments[0].content ? this.showComments(props.comments) : null), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"comment_form\",\n      onSubmit: event => this.makeComment(props._id, event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: props.user.userData.avt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment_input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Nh\\u1EADp h\\xECnh lu\\u1EADn....\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"send_button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 33\n      }\n    })))), /*#__PURE__*/React.createElement(Dialog, {\n      className: \"dialog_cont\",\n      onClose: () => {\n        this.setState({\n          setfollowerDiaglog: false\n        });\n      },\n      open: this.state.setfollowerDiaglog,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dialog_header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 25\n      }\n    }, \"Danh s\\xE1ch \\u0111ang theo d\\xF5i\"), /*#__PURE__*/React.createElement(CircleX, {\n      size: 24,\n      strokeWidth: 0.5,\n      color: \"black\",\n      onClick: () => {\n        this.setState({\n          setfollowerDiaglog: false\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 25\n      }\n    })), userProfile ? userProfile.map(item => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"follow_list\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list_info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: item.avt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 41\n        }\n      }), /*#__PURE__*/React.createElement(Link, {\n        to: `/user/${item._id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 41\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 73\n        }\n      }, item.userName))), yourProfile ? yourProfile.followings.includes(item._id) ? /*#__PURE__*/React.createElement(Button, {\n        className: \"minibtn\",\n        onClick: () => this.handleClickunfollow(item._id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 45\n        }\n      }, \" \\u0110ang theo d\\xF5i\") : /*#__PURE__*/React.createElement(Button, {\n        className: \"minibtn\",\n        onClick: () => this.handleClickfollow(item._id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 45\n        }\n      }, \"Theo d\\xF5i\") : null);\n    }) : ''), /*#__PURE__*/React.createElement(Dialog, {\n      className: \"dialog_cont\",\n      onClose: () => {\n        this.setState({\n          alertFunctionIsRestricted: false\n        });\n      },\n      open: this.state.alertFunctionIsRestricted,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dialog_header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 25\n      }\n    }, \"Ba\\u0323n \\u0111a\\u0303 bi\\u0323 ha\\u0323n ch\\xEA\\u0301 ch\\u01B0\\u0301c n\\u0103ng na\\u0300y cho \\u0111\\xEA\\u0301n \", moment(this.state.restrictedFunction.amountOfTime).format(\"L\")))), this.state.lightbox ? /*#__PURE__*/React.createElement(ImageLightBox, {\n      id: props._id,\n      images: this.state.lightboxImages,\n      open: this.state.lightbox,\n      pos: 0,\n      onclose: () => this.handlelightBoxClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 25\n      }\n    }) : null, this.confirmDialog(this.state.dialogType));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    policies: state.policies\n  };\n};\n\nexport default connect(mapStateToProps)(withRouter(Card));","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/ultils/card.js"],"names":["React","Component","ImageLightBox","connect","likePost","unlikePost","makeComment","hidePost","deletePost","savePost","unSavePost","unfollow","follow","getTagId","Avatar","AvatarGroup","NativeClickListener","Link","withRouter","Report","getPolicy","Slide","Dialog","PostEdit","Button","CircleX","moment","Transition","forwardRef","props","ref","Card","state","buttons","name","linkTo","lightbox","lightboxImages","dropdown","reportData","tags","DialogShowing","dialogType","showEditor","setSnack","setfollowerDiaglog","alertFunctionIsRestricted","restrictedFunction","handlelightBox","images","setState","handlelightBoxClose","showUser","users","map","item","i","userName","avt","showComments","comments","commentsToShow","push","history","postedBy","_id","content","postId","event","preventDefault","persist","console","log","target","value","dispatch","then","response","payload","restricted","openEditor","toggleDropdown","closeEditor","hashtag","findHashtags","description","handleClickunfollow","id","handleSnackBar","handleClickfollow","defaultLink","liked","likes","filter","user","userData","require","saved","showLinks","list","syntheticEvent","prevState","handleBodyClick","findTagId","tag","alert","componentDidMount","forEach","url","renderCardImage","length","postedDate","day","parseInt","Math","floor","Text","regexp","result","match","slice","handleDescription","userTag","locationName","replace","blockedUsers","includes","__html","closeReportForm","confirmDialog","type","policies","policyList","mess","success","render","userProfile","yourProfile","grid","dateDifference","reportType","post","followings","amountOfTime","format","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './card.scss';\r\nimport ImageLightBox from './ImageLightBox'\r\nimport {connect} from 'react-redux';\r\nimport {likePost, unlikePost, makeComment, hidePost, deletePost, savePost, unSavePost} from '../../actions/product_actions';\r\nimport { unfollow, follow } from '../../actions/user_action';\r\nimport { getTagId } from '../../actions/tag_actions';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport AvatarGroup from '@material-ui/lab/AvatarGroup';\r\nimport NativeClickListener from '../ultils/NativeClickListener';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport Report from '../Report/Report';\r\nimport { getPolicy } from '../../actions/policy_actions';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport PostEdit from '../PostEdit/index';\r\nimport { Button} from '@material-ui/core';\r\nimport {CircleX } from 'tabler-icons-react';\r\nimport moment from 'moment';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nclass  Card extends Component {\r\n    \r\n    state = {\r\n        buttons: [\r\n            {\r\n                name: 'Like',\r\n                linkTo: '/',\r\n            },\r\n            {\r\n                name: 'Comment',\r\n                linkTo: '/postDetail',\r\n            },\r\n            {\r\n                name: 'Pin',\r\n                linkTo: '',\r\n            },\r\n        ],\r\n\r\n        lightbox: false,\r\n        lightboxImages: [],\r\n        dropdown: false,\r\n\r\n        reportData: {},\r\n\r\n        tags: [],\r\n\r\n        DialogShowing: false,\r\n        dialogType: \"\",\r\n\r\n        showEditor: false,\r\n\r\n        reportData: {},\r\n        setSnack: false,\r\n\r\n        setfollowerDiaglog: false,\r\n        alertFunctionIsRestricted: false,\r\n\r\n        restrictedFunction: {}\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.images) {\r\n            let lightboxImages = [];\r\n\r\n            this.props.images.forEach(item => {\r\n                lightboxImages.push(item.url)\r\n            })\r\n            this.setState({\r\n                lightboxImages\r\n            })\r\n        }\r\n        let hashtag = this.findHashtags(this.props.description)\r\n        getTagId(hashtag).then((response)=>{\r\n            this.setState({tags : [...response]});\r\n        })\r\n        this.props.dispatch(getPolicy());\r\n    }\r\n\r\n    handlelightBox = () => {\r\n        if (this.props.images) {\r\n            this.setState({\r\n                lightbox: true,\r\n            })\r\n        }\r\n      \r\n    }\r\n\r\n    handlelightBoxClose = () => {\r\n        this.setState({\r\n            lightbox: false,\r\n        })\r\n    }\r\n\r\n    renderCardImage(images) {\r\n        if (images.length > 0) {\r\n            return images[0].url;\r\n        } else {\r\n            return 'https://cdn.shopify.com/s/files/1/0013/3529/6118/products/Terracotta-Pot-6_Sansevieria-Zeylanica-6.jpg?v=1544979697';\r\n        }\r\n    }\r\n    \r\n    showUser = (users) => {\r\n        return users.map((item,i) => (\r\n            <Avatar className=\"userlike_avt\" alt={item.userName} src={item.avt} />\r\n        ))\r\n    }\r\n\r\n    showComments = (comments) => {\r\n        let commentsToShow = [];\r\n        commentsToShow.push(comments[0]);\r\n        commentsToShow.push(comments[1]);\r\n        return commentsToShow.map((item, i) => \r\n            item ?   \r\n            <div className=\"comment\">\r\n                <h6 onClick={() => {\r\n                        this.props.history.push(`/user/${item.postedBy[0]._id}`)\r\n                }}>{item.postedBy[0].userName}</h6> {item.content}\r\n            </div>\r\n            : null\r\n        )\r\n    }\r\n    \r\n    makeComment = (postId,event) => {\r\n        event.preventDefault();\r\n        event.persist();\r\n        console.log(postId, event.target[0].value);\r\n        this.props.dispatch(makeComment(postId, event.target[0].value)).then(response => {\r\n            if(response.payload.restricted){\r\n                console.log(response.payload);\r\n                this.setState({alertFunctionIsRestricted: true, restrictedFunction: response.payload.restrictedFunction})\r\n            }else{\r\n                console.log(event.target[0].value);\r\n                event.target[0].value = \"\"\r\n            }\r\n        })\r\n    }\r\n\r\n    openEditor = () => {\r\n        this.setState({ showEditor: !this.state.showEditor})\r\n        this.toggleDropdown();\r\n    }\r\n\r\n    closeEditor = () => {\r\n        let hashtag = this.findHashtags(this.props.description)\r\n        getTagId(hashtag).then((response)=>{\r\n            this.setState({tags : [...response]});\r\n        })\r\n        this.setState({ showEditor: !this.state.showEditor })\r\n    }\r\n    \r\n    handleClickunfollow = async (id) => {\r\n        await this.props.dispatch(unfollow(id))\r\n        this.props.handleSnackBar(\"Đã bỏ theo dõi\");\r\n    }\r\n\r\n    handleClickfollow = async (id) => {\r\n        await this.props.dispatch(follow(id))\r\n        this.props.handleSnackBar(\"Đã theo dõi\");\r\n    }\r\n\r\n    defaultLink = (item, i) => {\r\n        switch(item.name){\r\n            case 'Like':\r\n                const liked = this.props.likes.filter(item => item._id === this.props.user.userData._id);\r\n                return (\r\n                    <div>\r\n                        { \r\n                        liked[0] ? <img onClick={() => this.props.dispatch(unlikePost(this.props._id)).then(response =>{\r\n                            if(response.payload.restricted){\r\n                                console.log(response.payload);\r\n                                this.setState({alertFunctionIsRestricted: true, restrictedFunction: response.payload.restrictedFunction})\r\n                            }\r\n                        })}\r\n                            src={require('../../asset/newfeed_page/active_like_icon2x.png')} /> \r\n                        : \r\n                        <img onClick={() => this.props.dispatch(likePost(this.props._id)).then(response =>{\r\n                            if(response.payload.restricted){\r\n                                console.log(response.payload);\r\n                                this.setState({alertFunctionIsRestricted: true, restrictedFunction: response.payload.restrictedFunction})\r\n                            }\r\n                        })} \r\n                            src={require('../../asset/newfeed_page/like_icon2x.png')} />  \r\n                        }                      \r\n                    </div>)\r\n            case 'Comment':\r\n                return (\r\n                <div onClick={()=>{\r\n                        this.props.history.push(`/postDetail/${this.props._id}`)\r\n                    }}>\r\n                        <img src={require('../../asset/newfeed_page/comment_icon2x.png')}/>\r\n                </div>)\r\n            case 'Pin':\r\n                const saved = this.props.user.userData.saved.filter(item => item == this.props._id);\r\n                console.log(saved);\r\n                return (\r\n                <div >\r\n                    {\r\n                    saved[0] ? \r\n                    <img onClick={() => this.props.dispatch(unSavePost(this.props._id)).then(response => {\r\n                        if(response.payload.restricted){\r\n                            console.log(response.payload);\r\n                            this.setState({alertFunctionIsRestricted: true, restrictedFunction: response.payload.restrictedFunction})\r\n                        }\r\n                    })}\r\n                            src={require('../../asset/newfeed_page/stored_icon2x.png')} />\r\n                    :\r\n                    <img onClick={() => this.props.dispatch(savePost(this.props._id)).then(response => {\r\n                        if(response.payload.restricted){\r\n                            console.log(response.payload);\r\n                            this.setState({alertFunctionIsRestricted: true, restrictedFunction: response.payload.restrictedFunction})\r\n                        }\r\n                    })}\r\n                        src={require('../../asset/newfeed_page/store_icon2x.png')} />\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n \r\n    showLinks = () => {\r\n        let list = [];\r\n        return this.state.buttons.map((item, i) => {\r\n            return this.defaultLink(item, i)\r\n        })\r\n    }\r\n\r\n    toggleDropdown = (syntheticEvent) => {\r\n        console.log('toggle dropdown')\r\n        this.setState(prevState => ({ dropdown: !prevState.dropdown }))\r\n    }\r\n\r\n    handleBodyClick = (syntheticEvent) => {\r\n        console.log('body click')\r\n    }\r\n    \r\n    postedDate(day){\r\n        console.log(day);\r\n        day = parseInt(day);\r\n        console.log(typeof day)\r\n        if(day==0){\r\n            return \"Hôm nay\";\r\n        }else if(day < 30){\r\n            return day + \" ngày\";\r\n        }else if (day > 30 ){\r\n            console.log(day);\r\n            return Math.floor((day/7))  + \"tuần\";\r\n        }else if(day > 365) {\r\n            console.log(day);\r\n            return Math.floor((day / 365)) + \"năm\";\r\n        }\r\n    }\r\n\r\n    findHashtags(Text) {\r\n        var regexp = /\\B\\#\\w\\w+\\b/g\r\n        let result = Text.match(regexp);\r\n        if (result) {\r\n            let tags = [];\r\n            result.forEach((item) => {\r\n                tags.push(item.slice(1));\r\n            })\r\n            return (tags);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n    findTagId = (tag) => {\r\n        alert(\"tag\");\r\n    }\r\n\r\n    handleDescription(description, userTag,locationName){\r\n        console.log(this.state.tags)\r\n        let hashtag =[];\r\n        \r\n        this.state.tags.forEach((item) =>\r\n            description = description.replace('#'+item.name, `<a href=\"tag/${item._id}\">${\"#\"+item.name}</a>`)\r\n        )\r\n        if(userTag.length > 0){\r\n             description = description + \"<b>- cùng với </b>\"\r\n        }\r\n        userTag.forEach((item) =>{\r\n            if(!this.props.user.userData.blockedUsers.includes(item._id))\r\n      \r\n            description += `<a href=\"/user/${item._id}\"}>@${item.userName}</a> `\r\n        })\r\n        if (locationName)\r\n        {\r\n            description += ` <b>- tại <b> <a href=\"/location/${locationName}\"> ${locationName} </a>`\r\n        }\r\n        return <div dangerouslySetInnerHTML={{ __html: description }} />\r\n    }\r\n\r\n    closeReportForm(){\r\n        this.setState({ \r\n            DialogShowing: false,\r\n            reportData: {} \r\n        }) \r\n    }\r\n\r\n    confirmDialog(type) {\r\n        switch (type) {\r\n            case \"report\": {\r\n                return <Report\r\n                    isReportFormShow={this.state.DialogShowing}\r\n                    reportData={this.state.reportData}\r\n                    list={this.props.policies.policyList}\r\n                    handleSnackBar={(mess) => { this.props.handleSnackBar(mess)}}\r\n                    closeReportForm={()=>this.closeReportForm()}\r\n                />\r\n            }\r\n            case \"delete\":{\r\n                return <Dialog\r\n                    open={this.state.DialogShowing}\r\n                    TransitionComponent={Transition}\r\n                    keepMounted\r\n                    onClose={() => { this.setState({ DialogShowing: false }) }}>\r\n                    <div className=\"deleteConfirm\">\r\n                        <h5> Bạn chắc chắn muốn xóa bài viết này?</h5>\r\n                        <div className=\"btn_wrapper\">\r\n                            <p className=\"cancel_btn\" onClick={() => this.setState({ DialogShowing: false})}>Hủy</p>\r\n                            <p className=\"confirm_btn\" onClick={() => this.props.dispatch(deletePost(this.props._id))\r\n                                .then((response) => {\r\n                                    console.log(response)\r\n                                    if(response.payload.success){\r\n                                        this.props.handleSnackBar(\"Đã xóa bài viết\")\r\n                                        this.closeReportForm();\r\n                                    }else{\r\n                                        this.closeReportForm();\r\n                                        alert(\"đã xãy ra lỗi\")\r\n                                    }\r\n                                })}>Xóa</p>\r\n                        </div>\r\n                    </div>\r\n                    </Dialog> \r\n                }\r\n            default:{\r\n                return <div></div>\r\n            }\r\n        }\r\n    }\r\n\r\n    setSnack = () =>{\r\n        this.setState({ setSnack: true });\r\n    }\r\n\r\n    render() {\r\n        const props = this.props;\r\n        const userProfile = this.props.likes;\r\n        const yourProfile = this.props.user.userData;\r\n        return (\r\n                <div className = {`${props.grid}`}>\r\n                    <div className=\"card_item_wrapper\">\r\n                        <div className= 'card_action_container'>\r\n                            <div className=\"card_row\">\r\n                                <div className=\"user_info\">\r\n                                    <div className=\"avt\">\r\n                                        <img src={props.postedBy[0].avt} />\r\n                                    </div>\r\n                                    <div className=\"userName\">\r\n                                        <Link to={`/user/${props.postedBy[0]._id}`}>{props.postedBy[0].userName}</Link>\r\n                                        <p>{this.postedDate(props.dateDifference)}</p>\r\n                                    </div>\r\n                                </div>\r\n                            <div className={`advance_button ${this.state.dropdown ? \"active_dropbox\" : \"\"}`}>\r\n                                <img onClick={this.toggleDropdown} src={require('../../asset/headerIcon/advance_button2x.png')} />\r\n                                {\r\n                                    this.state.dropdown ?\r\n                                    <NativeClickListener onClick={() => this.setState({ dropdown: false })}>\r\n                                        <div className=\"dropdown\" onClick={this.handleBodyClick}>\r\n                                            <div>\r\n                                                <p onClick={()=>this.props.dispatch(hidePost(this.props._id)).then(()=>{\r\n                                                    this.props.handleSnackBar(\"Đã ẩn bài viết\")\r\n                                                })}>Ẩn</p>\r\n                                            </div>\r\n                                            <hr />\r\n                                            <div>\r\n                                                <Link to={`/postDetail/${this.props._id}`} >chi tiết bài viết</Link>\r\n                                            </div>\r\n                                            <hr />\r\n                                            {\r\n                                                props.postedBy[0]._id === this.props.user.userData._id ?\r\n                                                <>\r\n                                                    <hr />\r\n                                                    <div>\r\n                                                        <p onClick={this.openEditor}>Chỉnh sửa</p>\r\n                                                    </div>\r\n                                                </>\r\n                                                :\"\"\r\n                                            }\r\n                                            <hr />\r\n                                            {\r\n                                                props.postedBy[0]._id === this.props.user.userData._id ?\r\n                                                <div>\r\n                                                    <p className=\"delete_button\" \r\n                                                        onClick={()=>\r\n                                                        {this.setState({\r\n                                                            DialogShowing: true,\r\n                                                            dialogType: \"delete\", \r\n                                                        })\r\n                                                        console.log(this.state.DialogShowing)}}>Xóa</p>\r\n                                                </div>\r\n                                                :<div>\r\n                                                    <p className=\"report_button\" \r\n                                                        onClick={()=>{this.setState({\r\n                                                            DialogShowing: true,\r\n                                                            dialogType: \"report\",\r\n                                                            reportData: {\r\n                                                                reportType: \"post\",\r\n                                                                post: props._id,\r\n                                                            }\r\n                                                        })}}>Báo cáo</p>\r\n                                                </div>\r\n                                            }\r\n                                        </div>\r\n                                    </NativeClickListener>\r\n                                    : null\r\n                                }\r\n                                </div>\r\n                            </div>\r\n                            {\r\n                                this.state.showEditor ? \r\n                                <PostEdit  locationName={props.locationName}description={props.description} close={this.closeEditor} handleSnackBar={(mess)=>{this.props.handleSnackBar(mess)}} ActionType=\"newFeed\" userTag={props.userTag} postId={props._id}/>\r\n                                :\r\n                                <div className=\"description\">\r\n                                    {this.handleDescription(props.description,props.userTag,props.locationName)}\r\n                                </div>\r\n                            }\r\n                            <img onClick={()=>this.handlelightBox()} className='item_image'\r\n                            src={this.renderCardImage(props.images)}\r\n                            />\r\n                            <div className =\"button_wrapper\">\r\n                                {this.showLinks()}\r\n                            </div>\r\n                            <div className=\"likes\" onClick={() => { this.setState({ setfollowerDiaglog: true }) }}>\r\n                                <AvatarGroup max={3}>\r\n                                    {this.showUser(props.likes)}\r\n                                </AvatarGroup>  \r\n                                {\r\n                                    props.likes.length ?\r\n                                    <p> Đã thích bài viết </p>\r\n                                    :null\r\n                                }\r\n                            </div>\r\n                            <div className=\"comment_list\">\r\n                                {\r\n                                    props.comments.length > 2 ?\r\n                                    <h6 onClick={() => {\r\n                                        this.props.history.push(`/postDetail/${this.props._id}`)\r\n                                    }} className=\"view_more_cmt\">{`Xem thêm bình luận`}</h6>\r\n                                        : null\r\n                                }\r\n                                {\r\n                                    props.comments[0].content ?\r\n                                        this.showComments(props.comments)\r\n                                    : null\r\n                                }\r\n                            </div>\r\n                            <form className=\"comment_form\" onSubmit={(event) => this.makeComment(props._id, event)} >\r\n                                <div className=\"avt\"> \r\n                                    <img src={props.user.userData.avt} />\r\n                                </div>\r\n                                <div className=\"comment_input\">\r\n                                    <input placeholder=\"Nhập hình luận....\" />\r\n                                </div>\r\n                                <div className=\"send_button\">\r\n                               \r\n                                </div>\r\n                            </form>\r\n                    </div>\r\n                </div>\r\n                <Dialog className=\"dialog_cont\" onClose={() => { this.setState({ setfollowerDiaglog: false })} } open={this.state.setfollowerDiaglog}>\r\n                    <div className=\"dialog_header\">\r\n                        <h5>Danh sách đang theo dõi</h5>\r\n                        <CircleX size={24} strokeWidth={0.5} color=\"black\" onClick={() => { this.setState({ setfollowerDiaglog: false })}} ></CircleX>\r\n                    </div>\r\n                    {\r\n                        userProfile ? userProfile.map(item => {\r\n                            return (\r\n                                <div className=\"follow_list\">\r\n                                    <div className=\"list_info\">\r\n                                        <img src={item.avt}></img>\r\n                                        <Link to={`/user/${item._id}`}> <h2>{item.userName}</h2></Link>\r\n                                    </div>\r\n                                    {\r\n                                        yourProfile ? (yourProfile.followings.includes(item._id) ?\r\n                                            <Button className=\"minibtn\" onClick={() => this.handleClickunfollow(item._id)} > Đang theo dõi</Button>\r\n                                            :\r\n                                            <Button className=\"minibtn\" onClick={() => this.handleClickfollow(item._id)}>Theo dõi</Button>\r\n                                            )\r\n                                        : null\r\n                                    }\r\n                                </div>\r\n                            )\r\n                        }) \r\n                        : ''\r\n                    }\r\n                </Dialog>\r\n\r\n                <Dialog className=\"dialog_cont\" \r\n                        onClose={() => { this.setState({ alertFunctionIsRestricted: false })}} \r\n                        open={this.state.alertFunctionIsRestricted} >\r\n                    <div className=\"dialog_header\">\r\n                        <h5>Bạn đã bị hạn chế chức năng này cho đến {moment(this.state.restrictedFunction.amountOfTime).format(\"L\")}</h5>\r\n                    </div>\r\n                </Dialog>\r\n\r\n                {\r\n                    this.state.lightbox ?\r\n                        <ImageLightBox\r\n                            id={props._id}\r\n                            images={this.state.lightboxImages}\r\n                            open={this.state.lightbox}\r\n                            pos={0}\r\n                            onclose={() => this.handlelightBoxClose()}\r\n                        />\r\n                    : null\r\n                }\r\n                {\r\n                    this.confirmDialog(this.state.dialogType)\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state.user,\r\n        policies: state.policies,        \r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(Card));"]},"metadata":{},"sourceType":"module"}
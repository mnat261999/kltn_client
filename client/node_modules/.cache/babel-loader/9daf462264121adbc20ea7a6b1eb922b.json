{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\Message\\\\editchat.js\";\nimport React, { Component, useEffect, useState } from \"react\";\nimport Layout from \"../../hoc/layout\";\nimport { connect } from \"react-redux\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport { getMessage, getConversation, sendMessage, seenMessage, sendimg, editTitle, addMember, removeMember } from \"../../../src/actions/message_action\";\nimport \"./Message.scss\";\nimport { update, generateData } from \"../ultils/Form/FormActions\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Trash, ridDots, LayoutList, Edit, Settings, LayoutGrid, Tag, Dots, CircleX, Heart, Message2, Bookmark, Pencil, Search, Point, Photo, Sticker, Send, DotsVertical } from \"tabler-icons-react\";\nimport Pusher from \"pusher-js\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport { Button, Dialog, LinearProgress, Menu, Chip } from \"@material-ui/core\";\nimport styled from \"styled-components\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SearchBar from \"./SearchBar/index\";\nimport Userinfo from \"./userinfo\";\nconst StyleButton = styled(Button)`\n  color: white;\n`;\nconst StyleClip = styled(Chip)`\n  border-radius: 4px;\n  background-color: #e1f5fe;\n  color: #0095f6;\n  margin: 4px;\n`;\n\nclass EditMess extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({\n        name: event.target.value\n      });\n    };\n\n    this.setTitle = () => {};\n\n    this.editTitle = () => {};\n\n    this.removelist = (id, name) => {\n      const list = this.state.newmember;\n      list.splice(this.state.newmember.indexOf(name), 1);\n      this.setState({\n        newmember: list\n      });\n      const listid = this.state.newmemberid;\n      listid.splice(this.state.newmemberid.indexOf(id), 1);\n      this.setState({\n        newmemberid: listid\n      });\n    };\n\n    this.addList = (id, name) => {\n      const list = this.state.newmember;\n      list.push(name);\n      this.setState({\n        newmember: list\n      });\n      const listid = this.state.newmemberid;\n      listid.push(id);\n      this.setState({\n        newmemberid: listid\n      });\n    };\n\n    this.openMenu = event => {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.closeMenu = () => {\n      this.setState({\n        anchorEl: null\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.title = \"\";\n\n      if (this.props.conversation.title) {\n        this.title = this.props.conversation.title;\n      } else {\n        this.props.conversation.user.map(mess => this.title = this.title + mess.userName + \", \");\n      }\n\n      this.setState({\n        name: this.title\n      });\n    };\n\n    this.title = \"\";\n    this.state = {\n      anchorEl: null,\n      name: \"\",\n      title: \"\",\n      editname: false,\n      addnew: false,\n      newmember: [],\n      newmemberid: []\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"edit_popup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"edit_name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, this.props.conversation.type == \"personal\" ? /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.props.conversation.user.map(users => {\n        return users._id != this.props.yourProfile._id ? users.userName : \"\";\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.name,\n      onChange: event => {\n        this.handleChange(event);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    })), this.title.trim() == this.state.name.trim() ? /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }) : /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: async () => {\n        await this.props.editTitle(this.props.conversation._id, this.state.name);\n        await this.props.createGroupEvent(this.props.yourProfile.userName + \" đã đổi tên cuộc trò chuyện thành \" + this.state.name);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, \"L\\u01B0u\")), this.props.conversation.type == \"personal\" ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"custom-file-upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      onChange: event => this.props.onGroupImgChange(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }, \"\\u0110\\u1ED5i \\u1EA3nh nh\\xF3m\"))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"add_member\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, \"Th\\xE0nh vi\\xEAn\"), this.props.conversation.type == \"personal\" ? \"\" : /*#__PURE__*/React.createElement(\"h6\", {\n      id: \"addbtn\",\n      onClick: () => this.setState({\n        addnew: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }, \"+ Th\\xEAm th\\xE0nh vi\\xEAn\")), this.props.conversation ? this.props.conversation.user ? this.props.conversation.user.map(mess => {\n      return mess ? /*#__PURE__*/React.createElement(Userinfo, {\n        history: this.props.history,\n        follow: this.props.follow,\n        unfollow: this.props.unfollow,\n        outGroup: this.props.outGroup,\n        removeMember: this.props.removeMember,\n        conversation: this.props.conversation,\n        mess: mess,\n        yourProfile: this.props.yourProfile,\n        openMenu: this.openMenu,\n        anchorEl: this.state.anchorEl,\n        closeMenu: this.closeMenu,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 19\n        }\n      }) : \"\";\n    }) : \"\" : \"\", this.props.conversation.type == \"personal\" ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: () => this.props.outGroup(this.props.conversation._id, this.props.yourProfile._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, \"Tho\\xE1t nh\\xF3m\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: () => this.props.disableGroupMess(this.props.conversation._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }\n    }, \"X\\xF3a cu\\u1ED9c tr\\xF2 chuy\\u1EC7n\"), /*#__PURE__*/React.createElement(Dialog, {\n      open: this.state.addnew,\n      onClose: () => this.setState({\n        addnew: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newmess_contain\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newmess_header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }\n    }, this.props.conversation.type == \"personal\" ? \"\" : /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }\n    }, \"Th\\xEAm th\\xE0nh vi\\xEAn\"), /*#__PURE__*/React.createElement(\"h6\", {\n      className: this.state.newmember.length > 0 ? \"active\" : \"disable\",\n      onClick: () => this.props.addMember(this.props.conversation._id, this.state.newmember, this.state.newmemberid),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 15\n      }\n    }, \"Th\\xEAm\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 13\n      }\n    }, this.state.newmember.map(sendlist => {\n      return /*#__PURE__*/React.createElement(StyleClip, {\n        label: sendlist,\n        color: \"primary\",\n        onDelete: () => {\n          this.removelist(sendlist);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 19\n        }\n      });\n    }), /*#__PURE__*/React.createElement(SearchBar, {\n      sendinguserlistid: this.state.newmemberid,\n      removelist: this.removelist,\n      addList: this.addList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"suggest\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 15\n      }\n    }, \"G\\u1EE3i \\xFD\")))));\n  }\n\n}\n\nexport default EditMess;","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/Message/editchat.js"],"names":["React","Component","useEffect","useState","Layout","connect","Skeleton","getMessage","getConversation","sendMessage","seenMessage","sendimg","editTitle","addMember","removeMember","update","generateData","Link","withRouter","Trash","ridDots","LayoutList","Edit","Settings","LayoutGrid","Tag","Dots","CircleX","Heart","Message2","Bookmark","Pencil","Search","Point","Photo","Sticker","Send","DotsVertical","Pusher","ClickAwayListener","Button","Dialog","LinearProgress","Menu","Chip","styled","MenuItem","SearchBar","Userinfo","StyleButton","StyleClip","EditMess","constructor","props","handleChange","event","setState","name","target","value","setTitle","removelist","id","list","state","newmember","splice","indexOf","listid","newmemberid","addList","push","openMenu","anchorEl","currentTarget","closeMenu","componentDidMount","title","conversation","user","map","mess","userName","editname","addnew","render","type","users","_id","yourProfile","trim","createGroupEvent","onGroupImgChange","history","follow","unfollow","outGroup","disableGroupMess","length","sendlist"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from \"react\";\r\nimport Layout from \"../../hoc/layout\";\r\nimport { connect } from \"react-redux\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport {\r\n  getMessage,\r\n  getConversation,\r\n  sendMessage,\r\n  seenMessage,\r\n  sendimg,\r\n  editTitle,\r\n  addMember,\r\n  removeMember,\r\n} from \"../../../src/actions/message_action\";\r\nimport \"./Message.scss\";\r\nimport { update, generateData } from \"../ultils/Form/FormActions\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport {\r\n  Trash,\r\n  ridDots,\r\n  LayoutList,\r\n  Edit,\r\n  Settings,\r\n  LayoutGrid,\r\n  Tag,\r\n  Dots,\r\n  CircleX,\r\n  Heart,\r\n  Message2,\r\n  Bookmark,\r\n  Pencil,\r\n  Search,\r\n  Point,\r\n  Photo,\r\n  Sticker,\r\n  Send,\r\n  DotsVertical,\r\n} from \"tabler-icons-react\";\r\nimport Pusher from \"pusher-js\";\r\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\r\nimport { Button, Dialog, LinearProgress, Menu, Chip } from \"@material-ui/core\";\r\nimport styled from \"styled-components\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport SearchBar from \"./SearchBar/index\";\r\nimport Userinfo from \"./userinfo\";\r\nconst StyleButton = styled(Button)`\r\n  color: white;\r\n`;\r\nconst StyleClip = styled(Chip)`\r\n  border-radius: 4px;\r\n  background-color: #e1f5fe;\r\n  color: #0095f6;\r\n  margin: 4px;\r\n`;\r\n\r\nclass EditMess extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.title = \"\";\r\n    this.state = {\r\n      anchorEl: null,\r\n      name: \"\",\r\n      title: \"\",\r\n      editname: false,\r\n      addnew: false,\r\n      newmember: [],\r\n      newmemberid: [],\r\n    };\r\n  }\r\n  handleChange = (event) => {\r\n    this.setState({ name: event.target.value });\r\n  };\r\n  setTitle = () => {};\r\n  editTitle = () => {};\r\n  removelist = (id, name) => {\r\n    const list = this.state.newmember;\r\n    list.splice(this.state.newmember.indexOf(name), 1);\r\n    this.setState({ newmember: list });\r\n    const listid = this.state.newmemberid;\r\n    listid.splice(this.state.newmemberid.indexOf(id), 1);\r\n    this.setState({ newmemberid: listid });\r\n  };\r\n  addList = (id, name) => {\r\n    const list = this.state.newmember;\r\n    list.push(name);\r\n    this.setState({ newmember: list });\r\n    const listid = this.state.newmemberid;\r\n    listid.push(id);\r\n    this.setState({ newmemberid: listid });\r\n  };\r\n  openMenu = (event) => {\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n  closeMenu = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n  componentDidMount = () => {\r\n    this.title = \"\";\r\n    if (this.props.conversation.title) {\r\n      this.title = this.props.conversation.title;\r\n    } else {\r\n      this.props.conversation.user.map(\r\n        (mess) => (this.title = this.title + mess.userName + \", \")\r\n      );\r\n    }\r\n    this.setState({ name: this.title });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"edit_popup\">\r\n        <div className=\"edit_name\">\r\n          <div className=\"name\">\r\n            {this.props.conversation.type == \"personal\" ? (\r\n              <input\r\n                type=\"text\"\r\n                value={this.props.conversation.user.map((users) => {\r\n                  return users._id != this.props.yourProfile._id\r\n                    ? users.userName\r\n                    : \"\";\r\n                })}\r\n              ></input>\r\n            ) : (\r\n              <input\r\n                type=\"text\"\r\n                value={this.state.name}\r\n                onChange={(event) => {\r\n                  this.handleChange(event);\r\n                }}\r\n              ></input>\r\n            )}\r\n\r\n            {/* <input disabled={true} hidden={this.state.editname} onClick={()=>this.setState({editname:true})} value={this.title}></input> */}\r\n          </div>\r\n          {this.title.trim() == this.state.name.trim() ? (\r\n            <h6></h6>\r\n          ) : (\r\n            <h6\r\n              onClick={async () => {\r\n                await this.props.editTitle(\r\n                  this.props.conversation._id,\r\n                  this.state.name\r\n                );\r\n                await this.props.createGroupEvent(\r\n                  this.props.yourProfile.userName +\r\n                    \" đã đổi tên cuộc trò chuyện thành \" +\r\n                    this.state.name\r\n                );\r\n              }}\r\n            >\r\n              Lưu\r\n            </h6>\r\n          )}\r\n\r\n          {/* <Pencil strokeWidth={0.5} onClick={() => this.setState({ name: this.title, editname: !(this.state.editname) })}></Pencil> */}\r\n        </div>\r\n        {this.props.conversation.type == \"personal\" ? (\r\n          \"\"\r\n        ) : (\r\n          <div>\r\n            <hr></hr>\r\n            <label className=\"custom-file-upload\">\r\n              <input\r\n                type=\"file\"\r\n                onChange={(event) => this.props.onGroupImgChange(event)}\r\n              />\r\n              <h6>Đổi ảnh nhóm</h6>\r\n            </label>\r\n          </div>\r\n        )}\r\n        <hr></hr>\r\n        <div className=\"add_member\">\r\n          <h6>Thành viên</h6>\r\n          {this.props.conversation.type == \"personal\" ? (\r\n            \"\"\r\n          ) : (\r\n            <h6 id=\"addbtn\" onClick={() => this.setState({ addnew: true })}>\r\n              + Thêm thành viên\r\n            </h6>\r\n          )}\r\n        </div>\r\n\r\n        {this.props.conversation\r\n          ? this.props.conversation.user\r\n            ? this.props.conversation.user.map((mess) => {\r\n                return mess ? (\r\n                  <Userinfo\r\n                    history={this.props.history}\r\n                    follow={this.props.follow}\r\n                    unfollow={this.props.unfollow}\r\n                    outGroup={this.props.outGroup}\r\n                    removeMember={this.props.removeMember}\r\n                    conversation={this.props.conversation}\r\n                    mess={mess}\r\n                    yourProfile={this.props.yourProfile}\r\n                    openMenu={this.openMenu}\r\n                    anchorEl={this.state.anchorEl}\r\n                    closeMenu={this.closeMenu}\r\n                  ></Userinfo>\r\n                ) : (\r\n                  \"\"\r\n                );\r\n              })\r\n            : \"\"\r\n          : \"\"}\r\n\r\n        {this.props.conversation.type == \"personal\" ? (\r\n          \"\"\r\n        ) : (\r\n          <div>\r\n            <hr></hr>\r\n            <h6\r\n              onClick={() =>\r\n                this.props.outGroup(\r\n                  this.props.conversation._id,\r\n                  this.props.yourProfile._id\r\n                )\r\n              }\r\n            >\r\n              Thoát nhóm\r\n            </h6>\r\n          </div>\r\n        )}\r\n        <hr></hr>\r\n        <h6\r\n          onClick={() =>\r\n            this.props.disableGroupMess(this.props.conversation._id)\r\n          }\r\n        >\r\n          Xóa cuộc trò chuyện\r\n        </h6>\r\n\r\n        <Dialog\r\n          open={this.state.addnew}\r\n          onClose={() => this.setState({ addnew: false })}\r\n        >\r\n          <div className=\"newmess_contain\">\r\n            <div className=\"newmess_header\">\r\n              {this.props.conversation.type == \"personal\" ? (\r\n                \"\"\r\n              ) : (\r\n                <h5>Thêm thành viên</h5>\r\n              )}\r\n              <h6\r\n                className={\r\n                  this.state.newmember.length > 0 ? \"active\" : \"disable\"\r\n                }\r\n                onClick={() =>\r\n                  this.props.addMember(\r\n                    this.props.conversation._id,\r\n                    this.state.newmember,\r\n                    this.state.newmemberid\r\n                  )\r\n                }\r\n              >\r\n                Thêm\r\n              </h6>\r\n            </div>\r\n            <hr></hr>\r\n            <div className=\"search\">\r\n              {this.state.newmember.map((sendlist) => {\r\n                return (\r\n                  <StyleClip\r\n                    label={sendlist}\r\n                    color=\"primary\"\r\n                    onDelete={() => {\r\n                      this.removelist(sendlist);\r\n                    }}\r\n                  ></StyleClip>\r\n                );\r\n              })}\r\n              <SearchBar\r\n                sendinguserlistid={this.state.newmemberid}\r\n                removelist={this.removelist}\r\n                addList={this.addList}\r\n              />\r\n            </div>\r\n            <hr></hr>\r\n            <div className=\"suggest\">\r\n              <h6>Gợi ý</h6>\r\n            </div>\r\n          </div>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditMess;\r\n"]},"metadata":{},"sourceType":"module"}
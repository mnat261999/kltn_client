{"ast":null,"code":"import axios from 'axios';\nimport { USER_SERVER } from '../components/ultils/mise';\nimport { SEARCH_RESULT, LOAD_MORE_TAG, LOAD_MORE_USER } from './types';\nexport function search(keyword, skip, limit) {\n  let prevState = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  console.log(keyword, skip, limit, prevState);\n\n  if (keyword == \"\") {\n    return {\n      type: SEARCH_RESULT,\n      payload: {\n        users: [],\n        tags: []\n      }\n    };\n  } else {\n    console.log(prevState);\n    let data = {\n      keyword,\n      skip,\n      limit\n    };\n    const request = axios.post(`${USER_SERVER}/search`, data).then(response => {\n      let newUsers = [...prevState.users, ...response.data.users];\n      let newTags = [...prevState.tags, ...response.data.tags];\n      return {\n        users: newUsers,\n        tags: newTags,\n        userSize: response.data.users.length,\n        tagSize: response.data.tags.length\n      };\n    });\n    return {\n      type: SEARCH_RESULT,\n      payload: request\n    };\n  }\n}\nexport function searchmess(keyword, skip, limit) {\n  let prevState = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  console.log(keyword, skip, limit, prevState);\n\n  if (keyword == \"\") {\n    return {\n      type: SEARCH_RESULT,\n      payload: {\n        users: [],\n        tags: []\n      }\n    };\n  } else {\n    console.log(prevState);\n    let data = {\n      keyword,\n      skip,\n      limit\n    };\n    const request = axios.post(`${USER_SERVER}/searchmess`, data).then(response => {\n      let newUsers = [...prevState.users, ...response.data.users];\n      let newGroups = [...prevState.groups, ...response.data.groups];\n      return {\n        users: newUsers,\n        groups: newGroups,\n        userSize: response.data.users.length,\n        tagSize: response.data.groups.length\n      };\n    });\n    return {\n      type: SEARCH_RESULT,\n      payload: request\n    };\n  }\n}\nexport function loadmoreUser(keyword, skip, limit) {\n  let prevState = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  console.log(keyword, skip, limit, prevState);\n\n  if (keyword == \"\") {\n    return {\n      type: LOAD_MORE_USER,\n      payload: {\n        users: [],\n        userSize: 0,\n        tagSize: 0,\n        tags: []\n      }\n    };\n  } else {\n    console.log(prevState);\n    let data = {\n      keyword,\n      skip,\n      limit\n    };\n    const request = axios.post(`${USER_SERVER}/searchUser`, data).then(response => {\n      let newUsers = [...prevState.users, ...response.data.users];\n      return {\n        users: newUsers,\n        userSize: response.data.users.length\n      };\n    });\n    return {\n      type: LOAD_MORE_USER,\n      payload: request\n    };\n  }\n}\nexport function loadmoreTag(keyword, skip, limit) {\n  let prevState = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  console.log(keyword, skip, limit, prevState);\n\n  if (keyword == \"\") {\n    return {\n      type: LOAD_MORE_TAG,\n      payload: {\n        users: [],\n        userSize: 0,\n        tagSize: 0,\n        tags: []\n      }\n    };\n  } else {\n    console.log(prevState);\n    let data = {\n      keyword,\n      skip,\n      limit\n    };\n    const request = axios.post(`${USER_SERVER}/searchTag`, data).then(response => {\n      console.log(response.data.tags);\n      let newTags = [...prevState.tags, ...response.data.tags];\n      return {\n        tags: newTags,\n        tagSize: response.data.tags.length\n      };\n    });\n    return {\n      type: LOAD_MORE_TAG,\n      payload: request\n    };\n  }\n}","map":{"version":3,"names":["axios","USER_SERVER","SEARCH_RESULT","LOAD_MORE_TAG","LOAD_MORE_USER","search","keyword","skip","limit","prevState","console","log","type","payload","users","tags","data","request","post","then","response","newUsers","newTags","userSize","length","tagSize","searchmess","newGroups","groups","loadmoreUser","loadmoreTag"],"sources":["D:/Kltn/test/social-media/client/src/actions/search_action.js"],"sourcesContent":["import axios from 'axios';\r\nimport { USER_SERVER } from '../components/ultils/mise';\r\nimport {\r\n    SEARCH_RESULT,\r\n    LOAD_MORE_TAG,\r\n    LOAD_MORE_USER\r\n} from './types';\r\n\r\n\r\nexport function search(keyword,skip,limit,prevState=[]) {\r\n    console.log(keyword, skip, limit, prevState );\r\n    if(keyword==\"\"){\r\n        return {\r\n            type: SEARCH_RESULT,\r\n            payload: {\r\n                users: [],\r\n                tags: [],\r\n            }\r\n        }\r\n    }\r\n    else{\r\n        console.log(prevState);\r\n        let data = { keyword,skip, limit }\r\n        const request = axios.post(`${USER_SERVER}/search`, data)\r\n            .then(response => {\r\n                let newUsers = [\r\n                    ...prevState.users,\r\n                    ...response.data.users\r\n                ]\r\n                let newTags = [\r\n                    ...prevState.tags, \r\n                    ...response.data.tags\r\n                ]\r\n                return { \r\n                    users: newUsers,\r\n                    tags: newTags,\r\n                    userSize: response.data.users.length,\r\n                    tagSize: response.data.tags.length,\r\n                }\r\n            });\r\n\r\n        return {\r\n            type: SEARCH_RESULT,\r\n            payload: request\r\n        }\r\n    }\r\n}\r\n\r\nexport function searchmess(keyword,skip,limit,prevState=[]) {\r\n    console.log(keyword, skip, limit, prevState );\r\n    if(keyword==\"\"){\r\n        return {\r\n            type: SEARCH_RESULT,\r\n            payload: {\r\n                users: [],\r\n                tags: [],\r\n            }\r\n        }\r\n    }\r\n    else{\r\n        console.log(prevState);\r\n        let data = { keyword,skip, limit }\r\n        const request = axios.post(`${USER_SERVER}/searchmess`, data)\r\n            .then(response => {\r\n                let newUsers = [\r\n                    ...prevState.users,\r\n                    ...response.data.users\r\n                ]\r\n                let newGroups = [\r\n                    ...prevState.groups, \r\n                    ...response.data.groups\r\n                ]\r\n                return { \r\n                    users: newUsers,\r\n                    groups: newGroups,\r\n                    userSize: response.data.users.length,\r\n                    tagSize: response.data.groups.length,\r\n                }\r\n            });\r\n\r\n        return {\r\n            type: SEARCH_RESULT,\r\n            payload: request\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function loadmoreUser(keyword, skip, limit, prevState = []) {\r\n    console.log(keyword, skip, limit, prevState);\r\n    if (keyword == \"\") {\r\n        return {\r\n            type: LOAD_MORE_USER,\r\n            payload: {\r\n                users: [],\r\n                userSize: 0,\r\n                tagSize: 0,\r\n                tags: [],\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        console.log(prevState);\r\n        let data = { keyword, skip, limit }\r\n        const request = axios.post(`${USER_SERVER}/searchUser`, data)\r\n            .then(response => {\r\n                let newUsers = [\r\n                    ...prevState.users,\r\n                    ...response.data.users\r\n                ]\r\n                return {\r\n                    users: newUsers,\r\n                    userSize: response.data.users.length,\r\n                }\r\n            });\r\n\r\n        return {\r\n            type: LOAD_MORE_USER,\r\n            payload: request\r\n        }\r\n    }\r\n}\r\n\r\nexport function loadmoreTag(keyword, skip, limit, prevState = []) {\r\n\r\n    console.log(keyword, skip, limit, prevState);\r\n    if (keyword == \"\") {\r\n        return {\r\n            type: LOAD_MORE_TAG,\r\n            payload: {\r\n                users: [],\r\n                userSize: 0,\r\n                tagSize: 0,\r\n                tags: [],\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        console.log(prevState);\r\n        let data = { keyword, skip, limit }\r\n        const request = axios.post(`${USER_SERVER}/searchTag`, data)\r\n            .then(response => {\r\n                console.log(response.data.tags)\r\n                let newTags = [\r\n                    ...prevState.tags,\r\n                    ...response.data.tags\r\n                ]\r\n                return {\r\n                    tags: newTags,\r\n                    tagSize: response.data.tags.length,\r\n                }\r\n            });\r\n        return {\r\n            type: LOAD_MORE_TAG,\r\n            payload: request\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\Message\\\\editchat.js\";\nimport React, { Component, useEffect, useState } from 'react';\nimport Layout from '../../hoc/layout';\nimport { connect } from 'react-redux';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { getMessage, getConversation, sendMessage, seenMessage, sendimg, editTitle, addMember, removeMember } from '../../../src/actions/message_action';\nimport './Message.scss';\nimport { update, generateData } from '../ultils/Form/FormActions';\nimport { Link, withRouter } from 'react-router-dom';\nimport { Trash, ridDots, LayoutList, Edit, Settings, LayoutGrid, Tag, Dots, CircleX, Heart, Message2, Bookmark, Pencil, Search, Point, Photo, Sticker, Send, DotsVertical } from 'tabler-icons-react';\nimport Pusher from 'pusher-js';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { Button, Dialog, LinearProgress, Menu, Chip } from '@material-ui/core';\nimport styled from 'styled-components';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport SearchBar from './SearchBar/index';\nimport Userinfo from './userinfo';\nconst StyleButton = styled(Button)`\n    color:white;\n`;\nconst StyleClip = styled(Chip)`\nborder-radius: 4px;\nbackground-color: #e1f5fe;\ncolor: #0095f6;\nmargin: 4px;\n`;\n\nclass EditMess extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({\n        name: event.target.value\n      });\n    };\n\n    this.setTitle = () => {};\n\n    this.editTitle = () => {};\n\n    this.removelist = (id, name) => {\n      const list = this.state.newmember;\n      list.splice(this.state.newmember.indexOf(name), 1);\n      this.setState({\n        newmember: list\n      });\n      const listid = this.state.newmemberid;\n      listid.splice(this.state.newmemberid.indexOf(id), 1);\n      this.setState({\n        newmemberid: listid\n      });\n    };\n\n    this.addList = (id, name) => {\n      const list = this.state.newmember;\n      list.push(name);\n      this.setState({\n        newmember: list\n      });\n      const listid = this.state.newmemberid;\n      listid.push(id);\n      this.setState({\n        newmemberid: listid\n      });\n    };\n\n    this.openMenu = event => {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.closeMenu = () => {\n      this.setState({\n        anchorEl: null\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.title = \"\";\n\n      if (this.props.conversation.title) {\n        this.title = this.props.conversation.title;\n      } else {\n        this.props.conversation.user.map(mess => this.title = this.title + mess.userName + \", \");\n      }\n\n      this.setState({\n        name: this.title\n      });\n    };\n\n    this.title = \"\";\n    this.state = {\n      anchorEl: null,\n      name: '',\n      title: '',\n      editname: false,\n      addnew: false,\n      newmember: [],\n      newmemberid: []\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"edit_popup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"edit_name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }\n    }, this.props.conversation.type == \"personal\" ? /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.props.conversation.user.map(users => {\n        return users._id != this.props.yourProfile._id ? users.userName : '';\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 74\n      }\n    }) : /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.name,\n      onChange: event => {\n        this.handleChange(event);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 230\n      }\n    })), this.title.trim() == this.state.name.trim() ? /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }\n    }) : /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: async () => {\n        await this.props.editTitle(this.props.conversation._id, this.state.name);\n        await this.props.createGroupEvent(this.props.yourProfile.userName + \" đã đổi tên cuộc trò chuyện thành \" + this.state.name);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 29\n      }\n    }, \"L\\u01B0u\")), this.props.conversation.type == \"personal\" ? '' : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"custom-file-upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      onChange: event => this.props.onGroupImgChange(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 33\n      }\n    }, \"\\u0110\\u1ED5i \\u1EA3nh nh\\xF3m\"))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"add_member\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, \"Th\\xE0nh vi\\xEAn\"), this.props.conversation.type == \"personal\" ? '' : /*#__PURE__*/React.createElement(\"h6\", {\n      id: \"addbtn\",\n      onClick: () => this.setState({\n        addnew: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 75\n      }\n    }, \"+ Th\\xEAm th\\xE0nh vi\\xEAn\")), this.props.conversation ? this.props.conversation.user ? this.props.conversation.user.map(mess => {\n      return mess ? /*#__PURE__*/React.createElement(Userinfo, {\n        history: this.props.history,\n        follow: this.props.follow,\n        unfollow: this.props.unfollow,\n        outGroup: this.props.outGroup,\n        removeMember: this.props.removeMember,\n        conversation: this.props.conversation,\n        mess: mess,\n        yourProfile: this.props.yourProfile,\n        openMenu: this.openMenu,\n        anchorEl: this.state.anchorEl,\n        closeMenu: this.closeMenu,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 33\n        }\n      }) : '';\n    }) : '' : '', this.props.conversation.type == \"personal\" ? '' : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: () => this.props.outGroup(this.props.conversation._id, this.props.yourProfile._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 29\n      }\n    }, \"Tho\\xE1t nh\\xF3m\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 18\n      }\n    }), /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: () => this.props.disableGroupMess(this.props.conversation._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, \"X\\xF3a cu\\u1ED9c tr\\xF2 chuy\\u1EC7n\"), /*#__PURE__*/React.createElement(Dialog, {\n      open: this.state.addnew,\n      onClose: () => this.setState({\n        addnew: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newmess_contain\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newmess_header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }, this.props.conversation.type == \"personal\" ? '' : /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 83\n      }\n    }, \"Th\\xEAm th\\xE0nh vi\\xEAn\"), /*#__PURE__*/React.createElement(\"h6\", {\n      className: this.state.newmember.length > 0 ? \"active\" : \"disable\",\n      onClick: () => this.props.addMember(this.props.conversation._id, this.state.newmember, this.state.newmemberid),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 29\n      }\n    }, \"Th\\xEAm\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, this.state.newmember.map(sendlist => {\n      return /*#__PURE__*/React.createElement(StyleClip, {\n        label: sendlist,\n        color: \"primary\",\n        onDelete: () => {\n          this.removelist(sendlist);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 41\n        }\n      });\n    }), /*#__PURE__*/React.createElement(SearchBar, {\n      sendinguserlistid: this.state.newmemberid,\n      removelist: this.removelist,\n      addList: this.addList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"suggest\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    }, \"G\\u1EE3i \\xFD\")))));\n  }\n\n}\n\nexport default EditMess;","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/Message/editchat.js"],"names":["React","Component","useEffect","useState","Layout","connect","Skeleton","getMessage","getConversation","sendMessage","seenMessage","sendimg","editTitle","addMember","removeMember","update","generateData","Link","withRouter","Trash","ridDots","LayoutList","Edit","Settings","LayoutGrid","Tag","Dots","CircleX","Heart","Message2","Bookmark","Pencil","Search","Point","Photo","Sticker","Send","DotsVertical","Pusher","ClickAwayListener","Button","Dialog","LinearProgress","Menu","Chip","styled","MenuItem","SearchBar","Userinfo","StyleButton","StyleClip","EditMess","constructor","props","handleChange","event","setState","name","target","value","setTitle","removelist","id","list","state","newmember","splice","indexOf","listid","newmemberid","addList","push","openMenu","anchorEl","currentTarget","closeMenu","componentDidMount","title","conversation","user","map","mess","userName","editname","addnew","render","type","users","_id","yourProfile","trim","createGroupEvent","onGroupImgChange","history","follow","unfollow","outGroup","disableGroupMess","length","sendlist"],"mappings":"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","sourcesContent":["import React, { Component, useEffect, useState } from 'react';\r\nimport Layout from '../../hoc/layout';\r\nimport { connect } from 'react-redux';\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\nimport { getMessage, getConversation, sendMessage, seenMessage, sendimg, editTitle, addMember, removeMember } from '../../../src/actions/message_action'\r\nimport './Message.scss';\r\nimport { update, generateData } from '../ultils/Form/FormActions';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { Trash, ridDots, LayoutList, Edit, Settings, LayoutGrid, Tag, Dots, CircleX, Heart, Message2, Bookmark, Pencil, Search, Point, Photo, Sticker, Send, DotsVertical } from 'tabler-icons-react'\r\nimport Pusher from 'pusher-js'\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport { Button, Dialog, LinearProgress, Menu, Chip } from '@material-ui/core';\r\nimport styled from 'styled-components'\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport SearchBar from './SearchBar/index';\r\nimport Userinfo from './userinfo'\r\nconst StyleButton = styled(Button)`\r\n    color:white;\r\n`;\r\nconst StyleClip = styled(Chip)`\r\nborder-radius: 4px;\r\nbackground-color: #e1f5fe;\r\ncolor: #0095f6;\r\nmargin: 4px;\r\n`;\r\n\r\nclass EditMess extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.title = \"\";\r\n        this.state = {\r\n            anchorEl: null,\r\n            name: '',\r\n            title: '',\r\n            editname: false,\r\n            addnew: false,\r\n            newmember: [],\r\n            newmemberid: []\r\n        }\r\n    }\r\n    handleChange = (event) => {\r\n        this.setState({ name: event.target.value });\r\n    }\r\n    setTitle = () => {\r\n\r\n    }\r\n    editTitle = () => {\r\n\r\n    }\r\n    removelist = (id, name) => {\r\n        const list = this.state.newmember;\r\n        list.splice(this.state.newmember.indexOf(name), 1);\r\n        this.setState({ newmember: list });\r\n        const listid = this.state.newmemberid;\r\n        listid.splice(this.state.newmemberid.indexOf(id), 1);\r\n        this.setState({ newmemberid: listid });\r\n    };\r\n    addList = (id, name) => {\r\n        const list = this.state.newmember;\r\n        list.push(name);\r\n        this.setState({ newmember: list });\r\n        const listid = this.state.newmemberid;\r\n        listid.push(id);\r\n        this.setState({ newmemberid: listid });\r\n    }\r\n    openMenu = (event) => {\r\n        this.setState({ anchorEl: event.currentTarget })\r\n    }\r\n    closeMenu = () => {\r\n        this.setState({ anchorEl: null })\r\n    }\r\n    componentDidMount = () => {\r\n\r\n        this.title = \"\";\r\n        if (this.props.conversation.title) {\r\n            this.title = this.props.conversation.title;\r\n        }\r\n        else {\r\n            this.props.conversation.user.map(mess =>\r\n                this.title = this.title + mess.userName + \", \")\r\n        }\r\n        this.setState({ name: this.title })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"edit_popup\">\r\n                <div className=\"edit_name\">\r\n                    <div className=\"name\">\r\n                        {\r\n                            this.props.conversation.type == \"personal\" ? <input type=\"text\" value={this.props.conversation.user.map(users => { return (users._id != this.props.yourProfile._id ? users.userName : '') })}></input> : <input type=\"text\" value={this.state.name} onChange={(event) => { this.handleChange(event) }}></input>\r\n                        }\r\n\r\n                        {/* <input disabled={true} hidden={this.state.editname} onClick={()=>this.setState({editname:true})} value={this.title}></input> */}\r\n                    </div>\r\n                    {\r\n                        this.title.trim() == this.state.name.trim() ?\r\n                            <h6></h6> :\r\n                            <h6 onClick={async () => { await this.props.editTitle(this.props.conversation._id, this.state.name); await (this.props.createGroupEvent(this.props.yourProfile.userName + \" đã đổi tên cuộc trò chuyện thành \" + this.state.name)) }}>Lưu</h6>\r\n                    }\r\n\r\n                    {/* <Pencil strokeWidth={0.5} onClick={() => this.setState({ name: this.title, editname: !(this.state.editname) })}></Pencil> */}\r\n                </div>\r\n                {\r\n                    this.props.conversation.type == \"personal\" ? ''\r\n                        :\r\n                        <div>\r\n                            <hr></hr>\r\n                            <label className=\"custom-file-upload\">\r\n                                <input type=\"file\" onChange={(event) => this.props.onGroupImgChange(event)} />\r\n                                <h6>Đổi ảnh nhóm</h6>\r\n                            </label>\r\n\r\n                        </div>\r\n                }\r\n                <hr></hr>\r\n                <div className=\"add_member\">\r\n                    <h6>Thành viên</h6>\r\n                    {\r\n                        this.props.conversation.type == \"personal\" ? '' : <h6 id=\"addbtn\" onClick={() => this.setState({ addnew: true })}>+ Thêm thành viên</h6>\r\n                    }\r\n\r\n                </div>\r\n\r\n                {\r\n                    this.props.conversation ? this.props.conversation.user ? this.props.conversation.user.map(mess => {\r\n                        return (\r\n                            mess ?\r\n\r\n\r\n                                <Userinfo history={this.props.history} follow={this.props.follow} unfollow={this.props.unfollow} outGroup={this.props.outGroup} removeMember={this.props.removeMember} conversation={this.props.conversation} mess={mess} yourProfile={this.props.yourProfile} openMenu={this.openMenu} anchorEl={this.state.anchorEl} closeMenu={this.closeMenu}></Userinfo>\r\n                                : ''\r\n                        )\r\n                    }\r\n                    ) : '' : ''\r\n                }\r\n\r\n                {\r\n                    this.props.conversation.type == \"personal\" ? '' :\r\n                        <div>\r\n                            <hr></hr>\r\n                            <h6 onClick={() => this.props.outGroup(this.props.conversation._id, this.props.yourProfile._id)}>Thoát nhóm</h6>\r\n                        </div>\r\n                }\r\n                 <hr></hr>\r\n                <h6 onClick={()=>this.props.disableGroupMess(this.props.conversation._id)}>Xóa cuộc trò chuyện</h6>\r\n\r\n                <Dialog open={this.state.addnew} onClose={() => this.setState({ addnew: false })}>\r\n                    <div className=\"newmess_contain\">\r\n                        <div className=\"newmess_header\">\r\n                            {\r\n                                this.props.conversation.type == \"personal\" ? '' : <h5>Thêm thành viên</h5>\r\n                            }\r\n                            <h6 className={this.state.newmember.length > 0 ? \"active\" : \"disable\"} onClick={() => this.props.addMember(this.props.conversation._id, this.state.newmember, this.state.newmemberid)}>Thêm</h6>\r\n                        </div>\r\n                        <hr></hr>\r\n                        <div className=\"search\">\r\n\r\n                            {\r\n                                this.state.newmember.map(sendlist => {\r\n                                    return (\r\n                                        <StyleClip label={sendlist} color=\"primary\" onDelete={() => { this.removelist(sendlist) }}></StyleClip>\r\n\r\n                                    )\r\n                                })\r\n                            }\r\n                            <SearchBar sendinguserlistid={this.state.newmemberid} removelist={this.removelist} addList={this.addList} />\r\n                        </div>\r\n                        <hr></hr>\r\n                        <div className=\"suggest\">\r\n                            <h6>Gợi ý</h6>\r\n\r\n                        </div>\r\n                    </div>\r\n                </Dialog>\r\n            </div>\r\n\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default EditMess;"]},"metadata":{},"sourceType":"module"}
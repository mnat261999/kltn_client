{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\Resetpass\\\\ResetPass.js\";\nimport FormField from \"../ultils/Form/FormField\";\nimport axios from \"axios\";\nimport { USER_SERVER } from \"../ultils/mise\";\nimport { update, ifFormValid, generateData } from \"../ultils/Form/FormActions\";\nimport React, { Component } from \"react\";\nimport \"./index.scss\";\n\nclass ResetPass extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      resetToken: \"\",\n      formErrorMessage: \"\",\n      formError: false,\n      formSuccess: false,\n      formData: {\n        password: {\n          element: \"input\",\n          config: {\n            label: \"Mật khẩu\",\n            name: \"password_input\",\n            type: \"password\",\n            placeholder: \"Mật khẩu\"\n          },\n          validation: {\n            required: true\n          },\n          valid: false,\n          touched: false,\n          validationMessage: \"\",\n          showlabel: false\n        },\n        confirmPassword: {\n          element: \"input\",\n          value: \"\",\n          config: {\n            label: \"Nhập lại mật khẩu\",\n            name: \"confirm_password_input\",\n            type: \"password\",\n            placeholder: \"Nhập lại mật khẩu\"\n          },\n          validation: {\n            required: true,\n            confirm: \"password\"\n          },\n          valid: false,\n          touched: false,\n          validationMessage: \"\",\n          showlabel: false\n        }\n      }\n    };\n\n    this.updateForm = element => {\n      //Hàm update được viết trong FormActions.js\n      const newFormdata = update(element, this.state.formData, \"reset_pass\"); //Cập nhật lại State\n\n      this.setState({\n        formError: false,\n        formData: newFormdata\n      });\n    };\n\n    this.submitForm = event => {\n      console.log(\"submitted\");\n      event.preventDefault();\n      let dataToSubmit = generateData(this.state.formData, \"reset_pass\");\n      let formIsValid = ifFormValid(this.state.formData, \"reset_pass\");\n\n      if (formIsValid) {\n        console.log(dataToSubmit, this.state.resetToken);\n        axios.post(`${USER_SERVER}/reset_pass`, { ...dataToSubmit,\n          resetToken: this.state.resetToken\n        }).then(response => {\n          console.log(response.data.success);\n\n          if (response.data.success) {\n            this.setState({\n              formSuccess: true,\n              formError: false\n            });\n            setTimeout(() => {\n              this.props.history.push(\"/register_login\");\n            }, 3000);\n          } else {\n            this.setState({\n              formSuccess: false,\n              formError: true,\n              formErrorMessage: response.data.message\n            });\n          }\n        });\n      } else {\n        this.setState({\n          formError: true,\n          formSuccess: false\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    const resetToken = this.props.match.params.token;\n    this.setState({\n      resetToken\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"resetPass\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"banner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signin__logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"logo\",\n      src: require(\"../../asset/login-page/logo2x.png\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"stunning_text\",\n      src: require(\"../../asset/login-page/stun2x.png\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, \"Kh\\xF4i ph\\u1EE5c m\\u1EADt kh\\u1EA9u\"), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"register__form\",\n      onSubmit: event => this.submitForm(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormField, {\n      id: \"password\",\n      formData: this.state.formData.password,\n      change: element => this.updateForm(element),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(FormField, {\n      id: \"confirmPassword\",\n      formData: this.state.formData.confirmPassword,\n      change: element => this.updateForm(element),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"signin__button\",\n      onClick: event => {\n        this.submitForm(event);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }\n    }, \"Reset password\"), this.state.formError ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, this.state.formErrorMessage) : null, this.state.formSuccess ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, \"Done, check your email\") : null))));\n  }\n\n}\n\nexport default ResetPass;","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/Resetpass/ResetPass.js"],"names":["FormField","axios","USER_SERVER","update","ifFormValid","generateData","React","Component","ResetPass","state","resetToken","formErrorMessage","formError","formSuccess","formData","password","element","config","label","name","type","placeholder","validation","required","valid","touched","validationMessage","showlabel","confirmPassword","value","confirm","updateForm","newFormdata","setState","submitForm","event","console","log","preventDefault","dataToSubmit","formIsValid","post","then","response","data","success","setTimeout","props","history","push","message","componentDidMount","match","params","token","render","require"],"mappings":"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","sourcesContent":["import FormField from \"../ultils/Form/FormField\";\nimport axios from \"axios\";\nimport { USER_SERVER } from \"../ultils/mise\";\nimport { update, ifFormValid, generateData } from \"../ultils/Form/FormActions\";\nimport React, { Component } from \"react\";\nimport \"./index.scss\";\n\nclass ResetPass extends Component {\n  state = {\n    resetToken: \"\",\n    formErrorMessage: \"\",\n    formError: false,\n    formSuccess: false,\n    formData: {\n      password: {\n        element: \"input\",\n        config: {\n          label: \"Mật khẩu\",\n          name: \"password_input\",\n          type: \"password\",\n          placeholder: \"Mật khẩu\",\n        },\n        validation: {\n          required: true,\n        },\n        valid: false,\n        touched: false,\n        validationMessage: \"\",\n        showlabel: false,\n      },\n      confirmPassword: {\n        element: \"input\",\n        value: \"\",\n        config: {\n          label: \"Nhập lại mật khẩu\",\n          name: \"confirm_password_input\",\n          type: \"password\",\n          placeholder: \"Nhập lại mật khẩu\",\n        },\n        validation: {\n          required: true,\n          confirm: \"password\",\n        },\n        valid: false,\n        touched: false,\n        validationMessage: \"\",\n        showlabel: false,\n      },\n    },\n  };\n\n  updateForm = (element) => {\n    //Hàm update được viết trong FormActions.js\n    const newFormdata = update(element, this.state.formData, \"reset_pass\");\n    //Cập nhật lại State\n    this.setState({\n      formError: false,\n      formData: newFormdata,\n    });\n  };\n\n  componentDidMount() {\n    const resetToken = this.props.match.params.token;\n    this.setState({ resetToken });\n  }\n\n  submitForm = (event) => {\n    console.log(\"submitted\");\n    event.preventDefault();\n\n    let dataToSubmit = generateData(this.state.formData, \"reset_pass\");\n    let formIsValid = ifFormValid(this.state.formData, \"reset_pass\");\n\n    if (formIsValid) {\n      console.log(dataToSubmit, this.state.resetToken);\n      axios\n        .post(`${USER_SERVER}/reset_pass`, {\n          ...dataToSubmit,\n          resetToken: this.state.resetToken,\n        })\n        .then((response) => {\n          console.log(response.data.success);\n          if (response.data.success) {\n            this.setState({\n              formSuccess: true,\n              formError: false,\n            });\n            setTimeout(() => {\n              this.props.history.push(\"/register_login\");\n            }, 3000);\n          } else {\n            this.setState({\n              formSuccess: false,\n              formError: true,\n              formErrorMessage: response.data.message,\n            });\n          }\n        });\n    } else {\n      this.setState({\n        formError: true,\n        formSuccess: false,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"resetPass\">\n        <div className=\"banner\">\n          <div className=\"signin__logo\">\n            <img\n              className=\"logo\"\n              src={require(\"../../asset/login-page/logo2x.png\")}\n            />\n            <img\n              className=\"stunning_text\"\n              src={require(\"../../asset/login-page/stun2x.png\")}\n            />\n          </div>\n        </div>\n        <div className=\"content\">\n          <div className=\"wrapper\">\n            <div className=\"title\">Khôi phục mật khẩu</div>\n            <form\n              className=\"register__form\"\n              onSubmit={(event) => this.submitForm(event)}\n            >\n              <FormField\n                id={\"password\"}\n                formData={this.state.formData.password}\n                change={(element) => this.updateForm(element)}\n              />\n              <FormField\n                id={\"confirmPassword\"}\n                formData={this.state.formData.confirmPassword}\n                change={(element) => this.updateForm(element)}\n              />\n              <button\n                className=\"signin__button\"\n                onClick={(event) => {\n                  this.submitForm(event);\n                }}\n              >\n                Reset password\n              </button>\n              {this.state.formError ? (\n                <div className=\"message\">{this.state.formErrorMessage}</div>\n              ) : null}\n              {this.state.formSuccess ? (\n                <div className=\"message\">Done, check your email</div>\n              ) : null}\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ResetPass;\n"]},"metadata":{},"sourceType":"module"}
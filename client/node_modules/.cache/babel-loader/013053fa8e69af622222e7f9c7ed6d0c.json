{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { getData, getSanitizedData, intersect } from '..';\nimport { uncompress } from '../data';\nimport store from '../store';\n\nvar NimbleEmojiIndex = /*#__PURE__*/function () {\n  function NimbleEmojiIndex(data, set) {\n    _classCallCheck(this, NimbleEmojiIndex);\n\n    if (data.compressed) {\n      uncompress(data);\n    }\n\n    this.data = data || {};\n    this.set = set || null;\n    this.originalPool = {};\n    this.index = {};\n    this.emojis = {};\n    this.emoticons = {};\n    this.customEmojisList = [];\n    this.buildIndex();\n  }\n\n  _createClass(NimbleEmojiIndex, [{\n    key: \"buildIndex\",\n    value: function buildIndex() {\n      var _this = this;\n\n      var _loop = function _loop(emoji) {\n        var emojiData = _this.data.emojis[emoji],\n            short_names = emojiData.short_names,\n            emoticons = emojiData.emoticons,\n            skin_variations = emojiData.skin_variations,\n            id = short_names[0];\n\n        if (emoticons) {\n          emoticons.forEach(function (emoticon) {\n            if (_this.emoticons[emoticon]) {\n              return;\n            }\n\n            _this.emoticons[emoticon] = id;\n          });\n        } // If skin variations include them\n\n\n        if (skin_variations) {\n          _this.emojis[id] = {};\n\n          for (var skinTone = 1; skinTone <= 6; skinTone++) {\n            _this.emojis[id][skinTone] = getSanitizedData({\n              id: id,\n              skin: skinTone\n            }, skinTone, _this.set, _this.data);\n          }\n        } else {\n          _this.emojis[id] = getSanitizedData(id, null, _this.set, _this.data);\n        }\n\n        _this.originalPool[id] = emojiData;\n      };\n\n      for (var emoji in this.data.emojis) {\n        _loop(emoji);\n      }\n    }\n  }, {\n    key: \"clearCustomEmojis\",\n    value: function clearCustomEmojis(pool) {\n      var _this2 = this;\n\n      this.customEmojisList.forEach(function (emoji) {\n        var emojiId = emoji.id || emoji.short_names[0];\n        delete pool[emojiId];\n        delete _this2.emojis[emojiId];\n      });\n    }\n  }, {\n    key: \"addCustomToPool\",\n    value: function addCustomToPool(custom, pool) {\n      var _this3 = this;\n\n      if (this.customEmojisList.length) this.clearCustomEmojis(pool);\n      custom.forEach(function (emoji) {\n        var emojiId = emoji.id || emoji.short_names[0];\n\n        if (emojiId && !pool[emojiId]) {\n          pool[emojiId] = getData(emoji, null, null, _this3.data);\n          _this3.emojis[emojiId] = getSanitizedData(emoji, null, null, _this3.data);\n        }\n      });\n      this.customEmojisList = custom;\n      this.index = {};\n    }\n  }, {\n    key: \"search\",\n    value: function search(value) {\n      var _this4 = this;\n\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          emojisToShowFilter = _ref.emojisToShowFilter,\n          maxResults = _ref.maxResults,\n          include = _ref.include,\n          exclude = _ref.exclude,\n          _ref$custom = _ref.custom,\n          custom = _ref$custom === void 0 ? [] : _ref$custom;\n\n      if (this.customEmojisList != custom) this.addCustomToPool(custom, this.originalPool);\n      var skinTone = store.get('skin') || 1;\n      maxResults || (maxResults = 75);\n      include || (include = []);\n      exclude || (exclude = []);\n      var results = null,\n          pool = this.originalPool;\n\n      if (value.length) {\n        if (value == '-' || value == '-1') {\n          return [this.emojis['-1'][skinTone]];\n        }\n\n        var values = value.toLowerCase().split(/[\\s|,|\\-|_]+/),\n            allResults = [];\n\n        if (values.length > 2) {\n          values = [values[0], values[1]];\n        }\n\n        if (include.length || exclude.length) {\n          pool = {};\n          this.data.categories.forEach(function (category) {\n            var isIncluded = include && include.length ? include.indexOf(category.id) > -1 : true;\n            var isExcluded = exclude && exclude.length ? exclude.indexOf(category.id) > -1 : false;\n\n            if (!isIncluded || isExcluded) {\n              return;\n            }\n\n            category.emojis.forEach(function (emojiId) {\n              return pool[emojiId] = _this4.data.emojis[emojiId];\n            });\n          });\n\n          if (custom.length) {\n            var customIsIncluded = include && include.length ? include.indexOf('custom') > -1 : true;\n            var customIsExcluded = exclude && exclude.length ? exclude.indexOf('custom') > -1 : false;\n\n            if (customIsIncluded && !customIsExcluded) {\n              this.addCustomToPool(custom, pool);\n            }\n          }\n        }\n\n        allResults = values.map(function (value) {\n          var aPool = pool,\n              aIndex = _this4.index,\n              length = 0;\n\n          for (var charIndex = 0; charIndex < value.length; charIndex++) {\n            var _char = value[charIndex];\n            length++;\n            aIndex[_char] || (aIndex[_char] = {});\n            aIndex = aIndex[_char];\n\n            if (!aIndex.results) {\n              (function () {\n                var scores = {};\n                aIndex.results = [];\n                aIndex.pool = {};\n\n                for (var id in aPool) {\n                  var emoji = aPool[id],\n                      search = emoji.search,\n                      sub = value.substr(0, length),\n                      subIndex = search.indexOf(sub);\n\n                  if (subIndex != -1) {\n                    var score = subIndex + 1;\n                    if (sub == id) score = 0;\n\n                    if (_this4.emojis[id] && _this4.emojis[id][skinTone]) {\n                      aIndex.results.push(_this4.emojis[id][skinTone]);\n                    } else {\n                      aIndex.results.push(_this4.emojis[id]);\n                    }\n\n                    aIndex.pool[id] = emoji;\n                    scores[id] = score;\n                  }\n                }\n\n                aIndex.results.sort(function (a, b) {\n                  var aScore = scores[a.id],\n                      bScore = scores[b.id];\n\n                  if (aScore == bScore) {\n                    return a.id.localeCompare(b.id);\n                  } else {\n                    return aScore - bScore;\n                  }\n                });\n              })();\n            }\n\n            aPool = aIndex.pool;\n          }\n\n          return aIndex.results;\n        }).filter(function (a) {\n          return a;\n        });\n\n        if (allResults.length > 1) {\n          results = intersect.apply(null, allResults);\n        } else if (allResults.length) {\n          results = allResults[0];\n        } else {\n          results = [];\n        }\n      }\n\n      if (results) {\n        if (emojisToShowFilter) {\n          results = results.filter(function (result) {\n            return emojisToShowFilter(pool[result.id]);\n          });\n        }\n\n        if (results && results.length > maxResults) {\n          results = results.slice(0, maxResults);\n        }\n      }\n\n      return results;\n    }\n  }]);\n\n  return NimbleEmojiIndex;\n}();\n\nexport { NimbleEmojiIndex as default };","map":{"version":3,"names":["_classCallCheck","_createClass","getData","getSanitizedData","intersect","uncompress","store","NimbleEmojiIndex","data","set","compressed","originalPool","index","emojis","emoticons","customEmojisList","buildIndex","key","value","_this","_loop","emoji","emojiData","short_names","skin_variations","id","forEach","emoticon","skinTone","skin","clearCustomEmojis","pool","_this2","emojiId","addCustomToPool","custom","_this3","length","search","_this4","_ref","arguments","undefined","emojisToShowFilter","maxResults","include","exclude","_ref$custom","get","results","values","toLowerCase","split","allResults","categories","category","isIncluded","indexOf","isExcluded","customIsIncluded","customIsExcluded","map","aPool","aIndex","charIndex","_char","scores","sub","substr","subIndex","score","push","sort","a","b","aScore","bScore","localeCompare","filter","apply","result","slice","default"],"sources":["D:/Kltn/test/social-media/node_modules/emoji-mart/dist-es/utils/emoji-index/nimble-emoji-index.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { getData, getSanitizedData, intersect } from '..';\nimport { uncompress } from '../data';\nimport store from '../store';\n\nvar NimbleEmojiIndex =\n/*#__PURE__*/\nfunction () {\n  function NimbleEmojiIndex(data, set) {\n    _classCallCheck(this, NimbleEmojiIndex);\n\n    if (data.compressed) {\n      uncompress(data);\n    }\n\n    this.data = data || {};\n    this.set = set || null;\n    this.originalPool = {};\n    this.index = {};\n    this.emojis = {};\n    this.emoticons = {};\n    this.customEmojisList = [];\n    this.buildIndex();\n  }\n\n  _createClass(NimbleEmojiIndex, [{\n    key: \"buildIndex\",\n    value: function buildIndex() {\n      var _this = this;\n\n      var _loop = function _loop(emoji) {\n        var emojiData = _this.data.emojis[emoji],\n            short_names = emojiData.short_names,\n            emoticons = emojiData.emoticons,\n            skin_variations = emojiData.skin_variations,\n            id = short_names[0];\n\n        if (emoticons) {\n          emoticons.forEach(function (emoticon) {\n            if (_this.emoticons[emoticon]) {\n              return;\n            }\n\n            _this.emoticons[emoticon] = id;\n          });\n        } // If skin variations include them\n\n\n        if (skin_variations) {\n          _this.emojis[id] = {};\n\n          for (var skinTone = 1; skinTone <= 6; skinTone++) {\n            _this.emojis[id][skinTone] = getSanitizedData({\n              id: id,\n              skin: skinTone\n            }, skinTone, _this.set, _this.data);\n          }\n        } else {\n          _this.emojis[id] = getSanitizedData(id, null, _this.set, _this.data);\n        }\n\n        _this.originalPool[id] = emojiData;\n      };\n\n      for (var emoji in this.data.emojis) {\n        _loop(emoji);\n      }\n    }\n  }, {\n    key: \"clearCustomEmojis\",\n    value: function clearCustomEmojis(pool) {\n      var _this2 = this;\n\n      this.customEmojisList.forEach(function (emoji) {\n        var emojiId = emoji.id || emoji.short_names[0];\n        delete pool[emojiId];\n        delete _this2.emojis[emojiId];\n      });\n    }\n  }, {\n    key: \"addCustomToPool\",\n    value: function addCustomToPool(custom, pool) {\n      var _this3 = this;\n\n      if (this.customEmojisList.length) this.clearCustomEmojis(pool);\n      custom.forEach(function (emoji) {\n        var emojiId = emoji.id || emoji.short_names[0];\n\n        if (emojiId && !pool[emojiId]) {\n          pool[emojiId] = getData(emoji, null, null, _this3.data);\n          _this3.emojis[emojiId] = getSanitizedData(emoji, null, null, _this3.data);\n        }\n      });\n      this.customEmojisList = custom;\n      this.index = {};\n    }\n  }, {\n    key: \"search\",\n    value: function search(value) {\n      var _this4 = this;\n\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          emojisToShowFilter = _ref.emojisToShowFilter,\n          maxResults = _ref.maxResults,\n          include = _ref.include,\n          exclude = _ref.exclude,\n          _ref$custom = _ref.custom,\n          custom = _ref$custom === void 0 ? [] : _ref$custom;\n\n      if (this.customEmojisList != custom) this.addCustomToPool(custom, this.originalPool);\n      var skinTone = store.get('skin') || 1;\n      maxResults || (maxResults = 75);\n      include || (include = []);\n      exclude || (exclude = []);\n      var results = null,\n          pool = this.originalPool;\n\n      if (value.length) {\n        if (value == '-' || value == '-1') {\n          return [this.emojis['-1'][skinTone]];\n        }\n\n        var values = value.toLowerCase().split(/[\\s|,|\\-|_]+/),\n            allResults = [];\n\n        if (values.length > 2) {\n          values = [values[0], values[1]];\n        }\n\n        if (include.length || exclude.length) {\n          pool = {};\n          this.data.categories.forEach(function (category) {\n            var isIncluded = include && include.length ? include.indexOf(category.id) > -1 : true;\n            var isExcluded = exclude && exclude.length ? exclude.indexOf(category.id) > -1 : false;\n\n            if (!isIncluded || isExcluded) {\n              return;\n            }\n\n            category.emojis.forEach(function (emojiId) {\n              return pool[emojiId] = _this4.data.emojis[emojiId];\n            });\n          });\n\n          if (custom.length) {\n            var customIsIncluded = include && include.length ? include.indexOf('custom') > -1 : true;\n            var customIsExcluded = exclude && exclude.length ? exclude.indexOf('custom') > -1 : false;\n\n            if (customIsIncluded && !customIsExcluded) {\n              this.addCustomToPool(custom, pool);\n            }\n          }\n        }\n\n        allResults = values.map(function (value) {\n          var aPool = pool,\n              aIndex = _this4.index,\n              length = 0;\n\n          for (var charIndex = 0; charIndex < value.length; charIndex++) {\n            var _char = value[charIndex];\n            length++;\n            aIndex[_char] || (aIndex[_char] = {});\n            aIndex = aIndex[_char];\n\n            if (!aIndex.results) {\n              (function () {\n                var scores = {};\n                aIndex.results = [];\n                aIndex.pool = {};\n\n                for (var id in aPool) {\n                  var emoji = aPool[id],\n                      search = emoji.search,\n                      sub = value.substr(0, length),\n                      subIndex = search.indexOf(sub);\n\n                  if (subIndex != -1) {\n                    var score = subIndex + 1;\n                    if (sub == id) score = 0;\n\n                    if (_this4.emojis[id] && _this4.emojis[id][skinTone]) {\n                      aIndex.results.push(_this4.emojis[id][skinTone]);\n                    } else {\n                      aIndex.results.push(_this4.emojis[id]);\n                    }\n\n                    aIndex.pool[id] = emoji;\n                    scores[id] = score;\n                  }\n                }\n\n                aIndex.results.sort(function (a, b) {\n                  var aScore = scores[a.id],\n                      bScore = scores[b.id];\n\n                  if (aScore == bScore) {\n                    return a.id.localeCompare(b.id);\n                  } else {\n                    return aScore - bScore;\n                  }\n                });\n              })();\n            }\n\n            aPool = aIndex.pool;\n          }\n\n          return aIndex.results;\n        }).filter(function (a) {\n          return a;\n        });\n\n        if (allResults.length > 1) {\n          results = intersect.apply(null, allResults);\n        } else if (allResults.length) {\n          results = allResults[0];\n        } else {\n          results = [];\n        }\n      }\n\n      if (results) {\n        if (emojisToShowFilter) {\n          results = results.filter(function (result) {\n            return emojisToShowFilter(pool[result.id]);\n          });\n        }\n\n        if (results && results.length > maxResults) {\n          results = results.slice(0, maxResults);\n        }\n      }\n\n      return results;\n    }\n  }]);\n\n  return NimbleEmojiIndex;\n}();\n\nexport { NimbleEmojiIndex as default };"],"mappings":"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"},"metadata":{},"sourceType":"module"}
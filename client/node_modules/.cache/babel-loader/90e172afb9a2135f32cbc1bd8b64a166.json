{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\Explore\\\\index.js\";\nimport React, { Component } from 'react';\nimport Layout from '../../hoc/layout';\nimport { getRecommendPost } from '../../actions/user_action';\nimport { connect } from 'react-redux';\nimport { Link, withRouter } from 'react-router-dom';\nimport { GridDots, Tag, Dots, CircleX, Heart, Message2 } from 'tabler-icons-react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Explore extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      limit: 6,\n      skip: 0,\n      isloading: false\n    };\n\n    this.LoadmoreCards = () => {\n      let skip = this.state.skip + this.state.limit;\n      this.props.dispatch(getRecommendPost(this.state.limit, skip, this.props.user.recommendedPost)).then(() => {\n        this.setState({\n          skip,\n          isloading: false\n        });\n      });\n    };\n\n    this.handleScroll = this.handleScroll.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.dispatch(getRecommendPost(this.state.limit, this.state.skip));\n    window.addEventListener(\"scroll\", this.handleScroll);\n  }\n\n  handleScroll() {\n    const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n    const windowBottom = Math.ceil(windowHeight + window.pageYOffset);\n    console.log(docHeight, windowBottom);\n\n    if (windowBottom >= docHeight) {\n      if (this.props.user.recommendedPostSize == this.state.limit) {\n        console.log(\"bottom reachhhhhhhhhhhhhhhh\");\n        this.setState({\n          isloading: true\n        }, () => {\n          this.LoadmoreCards();\n        });\n      }\n    }\n  }\n\n  render() {\n    const posts = this.props.user.recommendedPost;\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Profile\",\n        onScroll: event => this.handleScroll(event),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile_container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile_wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row body\",\n              children: [posts ? posts.map(post => {\n                return post.hidden ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12 image_contain\",\n                  onClick: () => this.props.history.push(`/postDetail/${post._id}`),\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"img_overlay\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"overlay_info\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"hearts\",\n                        children: [\"  \", /*#__PURE__*/_jsxDEV(Heart, {\n                          size: 24,\n                          strokeWidth: 1,\n                          color: \"white\",\n                          fill: \"white\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 72,\n                          columnNumber: 71\n                        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                          children: post.likes.length\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 72,\n                          columnNumber: 139\n                        }, this), \" \"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 72,\n                        columnNumber: 45\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"comments\",\n                        children: [\"  \", /*#__PURE__*/_jsxDEV(Message2, {\n                          size: 24,\n                          strokeWidth: 1,\n                          color: \"white\",\n                          fill: \"white\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 73,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                          children: [post.comments.length, \" \"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 73,\n                          columnNumber: 147\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 73,\n                        columnNumber: 45\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 71,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: post.images[0].url\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 76,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 37\n                }, this);\n              }) : \"\", this.props.user.recommendedPostSize > 0 && this.props.user.recommendedPostSize >= this.state.limit && this.state.isloading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"load_more_container\",\n                children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  style: {\n                    color: '#5477D5'\n                  },\n                  thickness: 7\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 29\n              }, this) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 18\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps)(withRouter(Explore));","map":{"version":3,"names":["React","Component","Layout","getRecommendPost","connect","Link","withRouter","GridDots","Tag","Dots","CircleX","Heart","Message2","CircularProgress","Explore","constructor","props","state","limit","skip","isloading","LoadmoreCards","dispatch","user","recommendedPost","then","setState","handleScroll","bind","componentDidMount","window","addEventListener","windowHeight","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","ceil","pageYOffset","console","log","recommendedPostSize","render","posts","event","map","post","hidden","history","push","_id","likes","length","comments","images","url","color","mapStateToProps"],"sources":["D:/Kltn/test/social-media/client/src/components/Explore/index.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport Layout from '../../hoc/layout';\r\nimport {getRecommendPost} from '../../actions/user_action';\r\nimport { connect } from 'react-redux';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { GridDots, Tag, Dots, CircleX, Heart, Message2 } from 'tabler-icons-react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nclass Explore extends Component {\r\n\r\n    state={\r\n        limit: 6,\r\n        skip: 0,\r\n        isloading: false,\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleScroll = this.handleScroll.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.dispatch(getRecommendPost(this.state.limit, this.state.skip));\r\n        window.addEventListener(\"scroll\", this.handleScroll);\r\n    }\r\n\r\n    handleScroll() {\r\n        const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\r\n        const body = document.body;\r\n        const html = document.documentElement;\r\n        const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\r\n        const windowBottom = Math.ceil(windowHeight + window.pageYOffset);\r\n        console.log(docHeight,windowBottom)\r\n        if (windowBottom >= docHeight) {\r\n            if (this.props.user.recommendedPostSize == this.state.limit){\r\n                console.log(\"bottom reachhhhhhhhhhhhhhhh\")\r\n                this.setState({isloading: true},()=>{this.LoadmoreCards()});\r\n            }\r\n        }\r\n    }\r\n\r\n    LoadmoreCards = () => {\r\n        let skip = this.state.skip + this.state.limit;\r\n        this.props.dispatch(getRecommendPost(\r\n            this.state.limit,\r\n            skip,\r\n            this.props.user.recommendedPost\r\n        ))\r\n        .then(() => {\r\n            this.setState({\r\n                skip,\r\n                isloading: false,\r\n            })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const posts = this.props.user.recommendedPost;\r\n        return (\r\n            <Layout>\r\n                <div className=\"Profile\" onScroll={(event) => this.handleScroll(event)}>\r\n                <div className=\"profile_container\">\r\n                <div className=\"profile_wrapper\">\r\n                 <div className=\"row body\">\r\n                    {\r\n                        posts ? posts.map(post => {\r\n                            return post.hidden ? null :\r\n                                (\r\n                                    <div className=\"col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12 image_contain\" onClick={()=>this.props.history.push(`/postDetail/${post._id}`)}>\r\n                                    <div className=\"img_overlay\">\r\n                                        <div className=\"overlay_info\">\r\n                                            <div className=\"hearts\">  <Heart size={24} strokeWidth={1} color=\"white\" fill=\"white\"></Heart><h2>{post.likes.length}</h2> </div>\r\n                                            <div className=\"comments\">  <Message2 size={24} strokeWidth={1} color=\"white\" fill=\"white\"></Message2><h2>{post.comments.length} </h2></div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <img src={post.images[0].url}></img>\r\n                                </div>\r\n                            )\r\n                        }) : \"\"\r\n                    }\r\n                    {\r\n                        this.props.user.recommendedPostSize > 0 && this.props.user.recommendedPostSize >= this.state.limit && this.state.isloading ?\r\n                            <div className=\"load_more_container\">\r\n                                <CircularProgress style={{ color: '#5477D5' }} thickness={7} />\r\n                            </div>\r\n                        :null\r\n                    }\r\n                </div>\r\n                </div>\r\n                </div>\r\n                </div>\r\n            </Layout>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state.user,\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(withRouter(Explore));\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\Explore\\\\index.js\";\nimport React, { Component } from 'react';\nimport Layout from '../../hoc/layout';\nimport { getRecommendPost } from '../../actions/user_action';\nimport { connect } from 'react-redux';\nimport { Link, withRouter } from 'react-router-dom';\nimport { GridDots, Tag, Dots, CircleX, Heart, Message2 } from 'tabler-icons-react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nclass Explore extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      limit: 6,\n      skip: 0,\n      isloading: false\n    };\n\n    this.LoadmoreCards = () => {\n      let skip = this.state.skip + this.state.limit;\n      this.props.dispatch(getRecommendPost(this.state.limit, skip, this.props.user.recommendedPost)).then(() => {\n        this.setState({\n          skip,\n          isloading: false\n        });\n      });\n    };\n\n    this.handleScroll = this.handleScroll.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.dispatch(getRecommendPost(this.state.limit, this.state.skip));\n    window.addEventListener(\"scroll\", this.handleScroll);\n  }\n\n  handleScroll() {\n    const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n    const windowBottom = Math.ceil(windowHeight + window.pageYOffset);\n    console.log(docHeight, windowBottom);\n\n    if (windowBottom >= docHeight) {\n      if (this.props.user.recommendedPostSize == this.state.limit) {\n        console.log(\"bottom reachhhhhhhhhhhhhhhh\");\n        this.setState({\n          isloading: true\n        }, () => {\n          this.LoadmoreCards();\n        });\n      }\n    }\n  }\n\n  render() {\n    const posts = this.props.user.recommendedPost;\n    return /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Profile\",\n      onScroll: event => this.handleScroll(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile_wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 18\n      }\n    }, posts ? posts.map(post => {\n      return post.hidden ? null : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12 image_contain\",\n        onClick: () => this.props.history.push(`/postDetail/${post._id}`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"img_overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"overlay_info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"hearts\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 45\n        }\n      }, \"  \", /*#__PURE__*/React.createElement(Heart, {\n        size: 24,\n        strokeWidth: 1,\n        color: \"white\",\n        fill: \"white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 71\n        }\n      }), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 139\n        }\n      }, post.likes.length), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"comments\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 45\n        }\n      }, \"  \", /*#__PURE__*/React.createElement(Message2, {\n        size: 24,\n        strokeWidth: 1,\n        color: \"white\",\n        fill: \"white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 73\n        }\n      }), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 147\n        }\n      }, post.comments.length, \" \")))), /*#__PURE__*/React.createElement(\"img\", {\n        src: post.images[0].url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 37\n        }\n      }));\n    }) : \"\", this.props.user.recommendedPostSize > 0 && this.props.user.recommendedPostSize >= this.state.limit && this.state.isloading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"load_more_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        color: '#5477D5'\n      },\n      thickness: 7,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 33\n      }\n    })) : null)))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps)(withRouter(Explore));","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/Explore/index.js"],"names":["React","Component","Layout","getRecommendPost","connect","Link","withRouter","GridDots","Tag","Dots","CircleX","Heart","Message2","CircularProgress","Explore","constructor","props","state","limit","skip","isloading","LoadmoreCards","dispatch","user","recommendedPost","then","setState","handleScroll","bind","componentDidMount","window","addEventListener","windowHeight","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","ceil","pageYOffset","console","log","recommendedPostSize","render","posts","event","map","post","hidden","history","push","_id","likes","length","comments","images","url","color","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Layout from '../../hoc/layout';\r\nimport {getRecommendPost} from '../../actions/user_action';\r\nimport { connect } from 'react-redux';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { GridDots, Tag, Dots, CircleX, Heart, Message2 } from 'tabler-icons-react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nclass Explore extends Component {\r\n\r\n    state={\r\n        limit: 6,\r\n        skip: 0,\r\n        isloading: false,\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleScroll = this.handleScroll.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.dispatch(getRecommendPost(this.state.limit, this.state.skip));\r\n        window.addEventListener(\"scroll\", this.handleScroll);\r\n    }\r\n\r\n    handleScroll() {\r\n        const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\r\n        const body = document.body;\r\n        const html = document.documentElement;\r\n        const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\r\n        const windowBottom = Math.ceil(windowHeight + window.pageYOffset);\r\n        console.log(docHeight,windowBottom)\r\n        if (windowBottom >= docHeight) {\r\n            if (this.props.user.recommendedPostSize == this.state.limit){\r\n                console.log(\"bottom reachhhhhhhhhhhhhhhh\")\r\n                this.setState({isloading: true},()=>{this.LoadmoreCards()});\r\n            }\r\n        }\r\n    }\r\n\r\n    LoadmoreCards = () => {\r\n        let skip = this.state.skip + this.state.limit;\r\n        this.props.dispatch(getRecommendPost(\r\n            this.state.limit,\r\n            skip,\r\n            this.props.user.recommendedPost\r\n        ))\r\n        .then(() => {\r\n            this.setState({\r\n                skip,\r\n                isloading: false,\r\n            })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const posts = this.props.user.recommendedPost;\r\n        return (\r\n            <Layout>\r\n                <div className=\"Profile\" onScroll={(event) => this.handleScroll(event)}>\r\n                <div className=\"profile_container\">\r\n                <div className=\"profile_wrapper\">\r\n                 <div className=\"row body\">\r\n                    {\r\n                        posts ? posts.map(post => {\r\n                            return post.hidden ? null :\r\n                                (\r\n                                    <div className=\"col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12 image_contain\" onClick={()=>this.props.history.push(`/postDetail/${post._id}`)}>\r\n                                    <div className=\"img_overlay\">\r\n                                        <div className=\"overlay_info\">\r\n                                            <div className=\"hearts\">  <Heart size={24} strokeWidth={1} color=\"white\" fill=\"white\"></Heart><h2>{post.likes.length}</h2> </div>\r\n                                            <div className=\"comments\">  <Message2 size={24} strokeWidth={1} color=\"white\" fill=\"white\"></Message2><h2>{post.comments.length} </h2></div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <img src={post.images[0].url}></img>\r\n                                </div>\r\n                            )\r\n                        }) : \"\"\r\n                    }\r\n                    {\r\n                        this.props.user.recommendedPostSize > 0 && this.props.user.recommendedPostSize >= this.state.limit && this.state.isloading ?\r\n                            <div className=\"load_more_container\">\r\n                                <CircularProgress style={{ color: '#5477D5' }} thickness={7} />\r\n                            </div>\r\n                        :null\r\n                    }\r\n                </div>\r\n                </div>\r\n                </div>\r\n                </div>\r\n            </Layout>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state.user,\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(withRouter(Explore));\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\Explore\\\\index.js\";\nimport React, { Component } from \"react\";\nimport Layout from \"../../hoc/layout\";\nimport { getRecommendPost } from \"../../actions/user_action\";\nimport { connect } from \"react-redux\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { GridDots, Tag, Dots, CircleX, Heart, Message2 } from \"tabler-icons-react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nclass Explore extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      limit: 6,\n      skip: 0,\n      isloading: false\n    };\n\n    this.LoadmoreCards = () => {\n      let skip = this.state.skip + this.state.limit;\n      this.props.dispatch(getRecommendPost(this.state.limit, skip, this.props.user.recommendedPost)).then(() => {\n        this.setState({\n          skip,\n          isloading: false\n        });\n      });\n    };\n\n    this.handleScroll = this.handleScroll.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.dispatch(getRecommendPost(this.state.limit, this.state.skip));\n    window.addEventListener(\"scroll\", this.handleScroll);\n  }\n\n  handleScroll() {\n    const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n    const windowBottom = Math.ceil(windowHeight + window.pageYOffset);\n    console.log(docHeight, windowBottom);\n\n    if (windowBottom >= docHeight) {\n      if (this.props.user.recommendedPostSize == this.state.limit) {\n        console.log(\"bottom reachhhhhhhhhhhhhhhh\");\n        this.setState({\n          isloading: true\n        }, () => {\n          this.LoadmoreCards();\n        });\n      }\n    }\n  }\n\n  render() {\n    const posts = this.props.user.recommendedPost;\n    return /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Profile\",\n      onScroll: event => this.handleScroll(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile_wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    }, posts ? posts.map(post => {\n      return post.hidden ? null : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12 image_contain\",\n        onClick: () => this.props.history.push(`/postDetail/${post._id}`),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"img_overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"overlay_info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"hearts\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 31\n        }\n      }, \" \", /*#__PURE__*/React.createElement(Heart, {\n        size: 24,\n        strokeWidth: 1,\n        color: \"white\",\n        fill: \"white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 33\n        }\n      }, post.likes.length), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"comments\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 31\n        }\n      }, \" \", /*#__PURE__*/React.createElement(Message2, {\n        size: 24,\n        strokeWidth: 1,\n        color: \"white\",\n        fill: \"white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 33\n        }\n      }, post.comments.length, \" \")))), /*#__PURE__*/React.createElement(\"img\", {\n        src: post.images[0].url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 27\n        }\n      }));\n    }) : \"\", this.props.user.recommendedPostSize > 0 && this.props.user.recommendedPostSize >= this.state.limit && this.state.isloading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"load_more_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        color: \"#5477D5\"\n      },\n      thickness: 7,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }\n    })) : null)))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps)(withRouter(Explore));","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/Explore/index.js"],"names":["React","Component","Layout","getRecommendPost","connect","Link","withRouter","GridDots","Tag","Dots","CircleX","Heart","Message2","CircularProgress","Explore","constructor","props","state","limit","skip","isloading","LoadmoreCards","dispatch","user","recommendedPost","then","setState","handleScroll","bind","componentDidMount","window","addEventListener","windowHeight","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","ceil","pageYOffset","console","log","recommendedPostSize","render","posts","event","map","post","hidden","history","push","_id","likes","length","comments","images","url","color","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Layout from \"../../hoc/layout\";\nimport { getRecommendPost } from \"../../actions/user_action\";\nimport { connect } from \"react-redux\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport {\n  GridDots,\n  Tag,\n  Dots,\n  CircleX,\n  Heart,\n  Message2,\n} from \"tabler-icons-react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nclass Explore extends Component {\n  state = {\n    limit: 6,\n    skip: 0,\n    isloading: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.handleScroll = this.handleScroll.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.dispatch(getRecommendPost(this.state.limit, this.state.skip));\n    window.addEventListener(\"scroll\", this.handleScroll);\n  }\n\n  handleScroll() {\n    const windowHeight =\n      \"innerHeight\" in window\n        ? window.innerHeight\n        : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n    const windowBottom = Math.ceil(windowHeight + window.pageYOffset);\n    console.log(docHeight, windowBottom);\n    if (windowBottom >= docHeight) {\n      if (this.props.user.recommendedPostSize == this.state.limit) {\n        console.log(\"bottom reachhhhhhhhhhhhhhhh\");\n        this.setState({ isloading: true }, () => {\n          this.LoadmoreCards();\n        });\n      }\n    }\n  }\n\n  LoadmoreCards = () => {\n    let skip = this.state.skip + this.state.limit;\n    this.props\n      .dispatch(\n        getRecommendPost(\n          this.state.limit,\n          skip,\n          this.props.user.recommendedPost\n        )\n      )\n      .then(() => {\n        this.setState({\n          skip,\n          isloading: false,\n        });\n      });\n  };\n\n  render() {\n    const posts = this.props.user.recommendedPost;\n    return (\n      <Layout>\n        <div className=\"Profile\" onScroll={(event) => this.handleScroll(event)}>\n          <div className=\"profile_container\">\n            <div className=\"profile_wrapper\">\n              <div className=\"row body\">\n                {posts\n                  ? posts.map((post) => {\n                      return post.hidden ? null : (\n                        <div\n                          className=\"col-xl-4 col-lg-4 col-md-6 col-sm-6 col-12 image_contain\"\n                          onClick={() =>\n                            this.props.history.push(`/postDetail/${post._id}`)\n                          }\n                        >\n                          <div className=\"img_overlay\">\n                            <div className=\"overlay_info\">\n                              <div className=\"hearts\">\n                                {\" \"}\n                                <Heart\n                                  size={24}\n                                  strokeWidth={1}\n                                  color=\"white\"\n                                  fill=\"white\"\n                                ></Heart>\n                                <h2>{post.likes.length}</h2>{\" \"}\n                              </div>\n                              <div className=\"comments\">\n                                {\" \"}\n                                <Message2\n                                  size={24}\n                                  strokeWidth={1}\n                                  color=\"white\"\n                                  fill=\"white\"\n                                ></Message2>\n                                <h2>{post.comments.length} </h2>\n                              </div>\n                            </div>\n                          </div>\n                          <img src={post.images[0].url}></img>\n                        </div>\n                      );\n                    })\n                  : \"\"}\n                {this.props.user.recommendedPostSize > 0 &&\n                this.props.user.recommendedPostSize >= this.state.limit &&\n                this.state.isloading ? (\n                  <div className=\"load_more_container\">\n                    <CircularProgress\n                      style={{ color: \"#5477D5\" }}\n                      thickness={7}\n                    />\n                  </div>\n                ) : null}\n              </div>\n            </div>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user,\n  };\n};\nexport default connect(mapStateToProps)(withRouter(Explore));\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\Product\\\\PostDetailCard.js\";\nimport React, { Component } from \"react\";\nimport MyButton from \"../ultils/button\";\nimport \"./postDetailCard.scss\";\nimport ImageLightBox from \"../ultils/ImageLightBox\";\nimport { connect } from \"react-redux\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport faEllipsisH from \"@fortawesome/fontawesome-free-solid/faEllipsisH\";\nimport { likePost, unlikePost, makeComment, hidePost, likeComment, unLikeComment, deleteComment, deletePost, clearPostDetail, unSavePost, savePost } from \"../../actions/product_actions\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { getTagId } from \"../../actions/tag_actions\";\nimport AvatarGroup from \"@material-ui/lab/AvatarGroup\";\nimport NativeClickListener from \"../ultils/NativeClickListener\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Slide from \"@material-ui/core/Slide\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport Report from \"../Report/Report\";\nimport { getPolicy } from \"../../actions/policy_actions\";\nimport PostEdit from \"../PostEdit/index\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport moment from \"moment\";\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return /*#__PURE__*/React.createElement(Slide, Object.assign({\n    direction: \"up\",\n    ref: ref\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 10\n    }\n  }));\n});\n\nclass PostDetailCard extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      buttons: [{\n        name: \"Like\",\n        linkTo: \"/\"\n      }, {\n        name: \"Comment\",\n        linkTo: \"/postDetail\"\n      }, {\n        name: \"Pin\",\n        linkTo: \"\"\n      }],\n      lightbox: false,\n      lightboxImages: [],\n      dropdown: false,\n      commentAdvancedBtn: false,\n      limit: 3,\n      skip: 0,\n      isReportFormShow: false,\n      reportData: {},\n      DialogShowing: false,\n      dialogType: \"\",\n      commentSelected: \"\",\n      showEditor: false,\n      setSnack: false,\n      SnackMess: \"\",\n      reportSuccess: false,\n      tags: [],\n      setfollowerDiaglog: false,\n      alertFunctionIsRestricted: false,\n      restrictedFunction: {}\n    };\n\n    this.handlelightBox = () => {\n      if (this.props.post.images) {\n        this.setState({\n          lightbox: true\n        });\n      }\n    };\n\n    this.handlelightBoxClose = () => {\n      this.setState({\n        lightbox: false\n      });\n    };\n\n    this.showUser = users => {\n      return users.map((item, i) => /*#__PURE__*/React.createElement(Avatar, {\n        className: \"userlike_avt\",\n        alt: item.userName,\n        src: item.avt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 7\n        }\n      }));\n    };\n\n    this.showComments = comments => {\n      let commentsToShow = [];\n\n      if (comments[0].content) {\n        for (let i = 0; i < this.state.limit; i++) {\n          if (this.props.post.comments[i] && this.props.post.comments[i].content) {\n            commentsToShow.push(this.props.post.comments[i]);\n          } else {\n            break;\n          }\n        }\n      }\n\n      return commentsToShow.map((item, i) => item ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"comment\",\n        onMouseEnter: () => this.setState({\n          commentAdvancedBtn: item._id\n        }),\n        onMouseLeave: () => this.setState({\n          commentAdvancedBtn: \"\"\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"user_avt\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: item.postedBy[0].avt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        onClick: () => {\n          this.props.history.push(`/user/${item.postedBy[0]._id}`);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }\n      }, item.postedBy[0].userName), \" \", item.content, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }\n      }, item.likes.length, \" l\\u01B0\\u1EE3t th\\xEDch\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"like_button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }\n      }, item.likes[0] ? /*#__PURE__*/React.createElement(\"img\", {\n        onClick: () => this.props.dispatch(unLikeComment(this.props.post._id, item._id)),\n        src: require(\"../../asset/newfeed_page/active_like_icon2x.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 15\n        }\n      }) : /*#__PURE__*/React.createElement(\"img\", {\n        onClick: () => this.props.dispatch(likeComment(this.props.post._id, item._id)),\n        src: require(\"../../asset/newfeed_page/like_icon2x.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }\n      }, this.state.commentAdvancedBtn == item._id ? /*#__PURE__*/React.createElement(\"img\", {\n        onClick: () => {\n          this.setState({\n            DialogShowing: true,\n            dialogType: \"commentHandle\",\n            commentSelected: item._id\n          });\n        },\n        src: require(\"../../asset/headerIcon/advance_button2x.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 17\n        }\n      }) : \"\"))) : null);\n    };\n\n    this.makeComment = (postId, event) => {\n      event.preventDefault();\n      event.persist();\n      console.log(postId, event.target[0].value);\n      this.props.dispatch(makeComment(postId, event.target[0].value, \"detail\")).then(response => {\n        if (response.payload.restricted) {\n          console.log(response.payload);\n          this.setState({\n            alertFunctionIsRestricted: true,\n            restrictedFunction: response.payload.restrictedFunction\n          });\n        } else {\n          console.log(event.target[0].value);\n          event.target[0].value = \"\";\n        }\n      }); // event.preventDefault();\n      // event.persist();\n      // console.log(postId, event.target[0].value);\n      // this.props.dispatch(makeComment(postId, event.target[0].value,)).then(\n      //     event.target[0].value = \"\"\n      // )\n    };\n\n    this.defaultLink = (item, i) => {\n      switch (item.name) {\n        case \"Like\":\n          const liked = this.props.post.likes.filter(item => item._id === this.props.user.userData._id);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 11\n            }\n          }, liked[0] ? /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(unlikePost(this.props.post._id, \"detail\")).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require(\"../../asset/newfeed_page/active_like_icon2x.png\"),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }\n          }) : /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(likePost(this.props.post._id, \"detail\")).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require(\"../../asset/newfeed_page/like_icon2x.png\"),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }\n          }));\n\n        case \"Pin\":\n          const saved = this.props.user.userData.saved.filter(item => item == this.props.post._id);\n          return /*#__PURE__*/React.createElement(\"div\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 11\n            }\n          }, saved[0] ? /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(unSavePost(this.props.post._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require(\"../../asset/newfeed_page/stored_icon2x.png\"),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }\n          }) : /*#__PURE__*/React.createElement(\"img\", {\n            onClick: () => this.props.dispatch(savePost(this.props.post._id)).then(response => {\n              if (response.payload.restricted) {\n                console.log(response.payload);\n                this.setState({\n                  alertFunctionIsRestricted: true,\n                  restrictedFunction: response.payload.restrictedFunction\n                });\n              }\n            }),\n            src: require(\"../../asset/newfeed_page/store_icon2x.png\"),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }\n          }));\n      }\n    };\n\n    this.showLinks = () => {\n      let list = [];\n      return this.state.buttons.map((item, i) => {\n        return this.defaultLink(item, i);\n      });\n    };\n\n    this.toggleDropdown = syntheticEvent => {\n      console.log(\"toggle dropdown\");\n      this.setState(prevState => ({\n        dropdown: !prevState.dropdown\n      }));\n    };\n\n    this.handleBodyClick = syntheticEvent => {\n      console.log(\"body click\");\n    };\n\n    this.closeReportForm = () => {\n      this.setState({\n        isReportFormShow: false,\n        reportData: {},\n        DialogShowing: false\n      });\n    };\n\n    this.closeEditor = () => {\n      this.setState({\n        showEditor: !this.state.showEditor\n      });\n    };\n\n    this.handleSnackBar = (mess, res) => {\n      this.setState({\n        setSnack: true,\n        SnackMess: mess,\n        reportSuccess: res\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.post.images) {\n      let lightboxImages = [];\n      this.props.post.images.forEach(item => {\n        lightboxImages.push(item.url);\n      });\n      this.setState({\n        lightboxImages\n      });\n    }\n\n    let hashtag = this.findHashtags(this.props.post.description);\n    getTagId(hashtag).then(response => {\n      this.setState({\n        tags: [...response]\n      });\n    });\n    this.props.dispatch(getPolicy());\n  }\n\n  componentDidUpdate() {\n    if (this.props.post.images) {\n      let lightboxImages = [];\n      this.props.post.images.forEach(item => {\n        lightboxImages.push(item.url);\n      });\n      this.state.lightboxImages = lightboxImages;\n    }\n\n    let hashtag = this.findHashtags(this.props.post.description);\n    getTagId(hashtag).then(response => {\n      this.state.tags = [...response];\n    });\n  }\n\n  renderCardImage(images) {\n    if (images.length > 0) {\n      return images[0].url;\n    } else {\n      return \"https://cdn.shopify.com/s/files/1/0013/3529/6118/products/Terracotta-Pot-6_Sansevieria-Zeylanica-6.jpg?v=1544979697\";\n    }\n  }\n\n  postedDate(day) {\n    console.log(day);\n    day = parseInt(day);\n    console.log(typeof day);\n\n    if (day < 30) {\n      return day + \" ngày\";\n    } else if (day <= 1 && day > 0.0417) {\n      console.log(day);\n      return day * 24 + \" giờ\";\n    } else if (day <= 0.0417) {\n      console.log(day);\n      return day * 24 * 60 + \" phút\";\n    }\n  }\n\n  findHashtags(Text) {\n    var regexp = /\\B\\#\\w\\w+\\b/g;\n    let result = Text.match(regexp);\n\n    if (result) {\n      let tags = [];\n      result.forEach(item => {\n        tags.push(item.slice(1));\n      });\n      return tags;\n    } else {\n      return false;\n    }\n  }\n\n  handleDescription(description, userTag, locationName) {\n    //let hashtag = this.findHashtags(description)\n    this.state.tags.forEach(item => description = description.replace(\"#\" + item.name, `<a href=\"/tag/${item._id}\">${\"#\" + item.name}</a>`));\n\n    if (userTag.length > 0) {\n      description = description + \"<b>- cùng với </b>\";\n    }\n\n    userTag.forEach(item => {\n      description += `<a href=\"/user/${item._id}\"}>@${item.userName}</a> `;\n    });\n\n    if (locationName) {\n      description += ` <b>- tại <b> <a href=\"/location/${locationName}\"> ${locationName} </a>`;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: description\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 12\n      }\n    });\n  }\n\n  confirmDialog(type) {\n    let template = \"\";\n\n    switch (type) {\n      case \"commentHandle\":\n        template = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"commentHandle\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 11\n          }\n        }, this.props.post.postedBy[0]._id === this.props.user.userData._id ? /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"delete_button\",\n          onClick: () => {\n            this.props.dispatch(deleteComment(this.props.post._id, this.state.commentSelected)).then(() => {\n              this.setState({\n                DialogShowing: false,\n                commentSelected: \"\"\n              });\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 17\n          }\n        }, \"X\\xF3a\"), /*#__PURE__*/React.createElement(\"hr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 17\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"report_button\",\n          onClick: () => {\n            this.setState({\n              isReportFormShow: true,\n              reportData: {\n                reportType: \"comment\",\n                post: this.props.post._id,\n                comment: this.state.commentSelected\n              }\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 17\n          }\n        }, \"B\\xE1o c\\xE1o\")) : /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"report_button\",\n          onClick: () => {\n            this.setState({\n              isReportFormShow: true,\n              reportData: {\n                reportType: \"comment\",\n                post: this.props.post._id,\n                comment: this.state.commentSelected\n              }\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 17\n          }\n        }, \"B\\xE1o c\\xE1o\")));\n        break;\n\n      case \"deleteConfirm\":\n        template = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"deleteConfirm\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"h5\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 13\n          }\n        }, \" B\\u1EA1n ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a b\\xE0i vi\\u1EBFt n\\xE0y?\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"btn_wrapper\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"cancel_btn\",\n          onClick: () => this.setState({\n            DialogShowing: false\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }\n        }, \"H\\u1EE7y\"), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"confirm_btn\",\n          onClick: () => this.props.dispatch(deletePost(this.props.post._id)).then(() => {\n            this.props.history.push(\"/newfeed\");\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 15\n          }\n        }, \"X\\xF3a\")));\n        break;\n\n      default:\n        template = /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 20\n          }\n        });\n        break;\n    }\n\n    return /*#__PURE__*/React.createElement(Dialog, {\n      open: this.state.DialogShowing,\n      TransitionComponent: Transition,\n      keepMounted: true,\n      onClose: () => {\n        this.setState({\n          DialogShowing: false\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 7\n      }\n    }, template);\n  }\n\n  showReportForm(type) {\n    return /*#__PURE__*/React.createElement(Report, {\n      isReportFormShow: this.state.isReportFormShow,\n      reportData: this.state.reportData,\n      handleSnackBar: (mess, res) => {\n        this.handleSnackBar(mess, res);\n      },\n      list: this.props.policies.policyList,\n      closeReportForm: () => this.closeReportForm(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 7\n      }\n    });\n  }\n\n  deletePost() {}\n\n  render() {\n    const props = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"detail_card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_item_wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: () => this.handlelightBox(),\n      className: \"item_image\",\n      src: this.renderCardImage(props.post.images),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user_info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: props.post.postedBy[0].avt,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"userName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/user/${props.post.postedBy[0]._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 19\n      }\n    }, props.post.postedBy[0].userName), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 19\n      }\n    }, this.postedDate(props.post.dateDifference)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: `advance_button ${this.state.dropdown ? \"active_dropbox\" : \"\"}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      onClick: this.toggleDropdown,\n      src: require(\"../../asset/headerIcon/advance_button2x.png\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 17\n      }\n    }), this.state.dropdown ? /*#__PURE__*/React.createElement(NativeClickListener, {\n      onClick: () => this.setState({\n        dropdown: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown\",\n      onClick: this.handleBodyClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: () => this.props.dispatch(hidePost(this.props.post._id, \"detail\")).then(() => {\n        this.props.history.push(\"/newfeed\");\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 25\n      }\n    }, \"\\u1EA8n\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 23\n      }\n    }), props.post.postedBy[0]._id === this.props.user.userData._id ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"delete_button\",\n      onClick: () => {\n        this.setState({\n          DialogShowing: true,\n          dialogType: \"deleteConfirm\"\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 29\n      }\n    }, \"X\\xF3a\")), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 27\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"edit_button\",\n      onClick: () => {\n        this.setState({\n          showEditor: true,\n          dropdown: false\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 29\n      }\n    }, \"S\\u1EEDa\"))) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"report_button\",\n      onClick: () => {\n        this.setState({\n          isReportFormShow: true,\n          reportData: {\n            reportType: \"post\",\n            post: props.post._id\n          }\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 648,\n        columnNumber: 27\n      }\n    }, \"B\\xE1o c\\xE1o\")))) : null)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 13\n      }\n    }, this.state.showEditor ? /*#__PURE__*/React.createElement(PostEdit, {\n      description: props.post.description,\n      close: this.closeEditor,\n      handleSnackBar: (mess, res) => {\n        this.handleSnackBar(mess, res);\n      },\n      ActionType: \"detail\",\n      userTag: props.post.userTag,\n      locationName: props.post.locationName,\n      postId: props.post._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 17\n      }\n    }) : this.handleDescription(props.post.description, props.post.userTag, props.post.locationName)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment_list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 691,\n        columnNumber: 13\n      }\n    }, this.showComments(props.post.comments), this.state.limit < props.post.comments.length ? /*#__PURE__*/React.createElement(\"h6\", {\n      onClick: () => {\n        this.setState({\n          limit: this.state.limit + 3\n        });\n      },\n      className: \"view_more_cmt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 694,\n        columnNumber: 17\n      }\n    }, `Xem thêm`) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card_function\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 702,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button_wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 15\n      }\n    }, this.showLinks()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"likes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 704,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(AvatarGroup, {\n      max: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 705,\n        columnNumber: 17\n      }\n    }, this.showUser(props.post.likes)), props.post.likes.length ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 44\n      }\n    }, \" \\u0110\\xE3 th\\xEDch b\\xE0i vi\\u1EBFt \") : null), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"comment_form\",\n      onSubmit: event => this.makeComment(props.post._id, event, \"Detail\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 710,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment_input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Nh\\u1EADp h\\xECnh lu\\u1EADn....\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 717,\n        columnNumber: 19\n      }\n    })))))), this.state.lightbox ? /*#__PURE__*/React.createElement(ImageLightBox, {\n      id: props.post._id,\n      images: this.state.lightboxImages,\n      open: this.state.lightbox,\n      pos: 0,\n      onclose: () => this.handlelightBoxClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 724,\n        columnNumber: 11\n      }\n    }) : null, this.confirmDialog(this.state.dialogType), this.showReportForm(), /*#__PURE__*/React.createElement(Dialog, {\n      className: \"dialog_cont\",\n      onClose: () => {\n        this.setState({\n          alertFunctionIsRestricted: false\n        });\n      },\n      open: this.state.alertFunctionIsRestricted,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 735,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dialog_header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 743,\n        columnNumber: 15\n      }\n    }, \"Ba\\u0323n \\u0111a\\u0303 bi\\u0323 ha\\u0323n ch\\xEA\\u0301 ch\\u01B0\\u0301c n\\u0103ng na\\u0300y cho \\u0111\\xEA\\u0301n\", \" \", moment(this.state.restrictedFunction.amountOfTime).format(\"L\")))), /*#__PURE__*/React.createElement(Snackbar, {\n      anchorOrigin: {\n        vertical: \"bottom\",\n        horizontal: \"left\"\n      },\n      open: this.state.setSnack,\n      onClose: () => this.setState({\n        setSnack: false\n      }),\n      autoHideDuration: 3000,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 750,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(MuiAlert, {\n      elevation: 6,\n      variant: \"filled\",\n      severity: this.state.reportSuccess ? \"success\" : \"warning\",\n      message: this.state.SnackMess,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 759,\n        columnNumber: 11\n      }\n    }, this.state.SnackMess)));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    policies: state.policies\n  };\n};\n\nexport default connect(mapStateToProps)(withRouter(PostDetailCard));","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/Product/PostDetailCard.js"],"names":["React","Component","MyButton","ImageLightBox","connect","FontAwesomeIcon","faEllipsisH","likePost","unlikePost","makeComment","hidePost","likeComment","unLikeComment","deleteComment","deletePost","clearPostDetail","unSavePost","savePost","Avatar","getTagId","AvatarGroup","NativeClickListener","Link","withRouter","Slide","Dialog","Report","getPolicy","PostEdit","Snackbar","MuiAlert","moment","Transition","forwardRef","props","ref","PostDetailCard","state","buttons","name","linkTo","lightbox","lightboxImages","dropdown","commentAdvancedBtn","limit","skip","isReportFormShow","reportData","DialogShowing","dialogType","commentSelected","showEditor","setSnack","SnackMess","reportSuccess","tags","setfollowerDiaglog","alertFunctionIsRestricted","restrictedFunction","handlelightBox","post","images","setState","handlelightBoxClose","showUser","users","map","item","i","userName","avt","showComments","comments","commentsToShow","content","push","_id","postedBy","history","likes","length","dispatch","require","postId","event","preventDefault","persist","console","log","target","value","then","response","payload","restricted","defaultLink","liked","filter","user","userData","saved","showLinks","list","toggleDropdown","syntheticEvent","prevState","handleBodyClick","closeReportForm","closeEditor","handleSnackBar","mess","res","componentDidMount","forEach","url","hashtag","findHashtags","description","componentDidUpdate","renderCardImage","postedDate","day","parseInt","Text","regexp","result","match","slice","handleDescription","userTag","locationName","replace","__html","confirmDialog","type","template","reportType","comment","showReportForm","policies","policyList","render","dateDifference","amountOfTime","format","vertical","horizontal","mapStateToProps"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAO,uBAAP;AACA,OAAOC,aAAP,MAA0B,yBAA1B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,OAAOC,WAAP,MAAwB,iDAAxB;AACA,SACEC,QADF,EAEEC,UAFF,EAGEC,WAHF,EAIEC,QAJF,EAKEC,WALF,EAMEC,aANF,EAOEC,aAPF,EAQEC,UARF,EASEC,eATF,EAUEC,UAVF,EAWEC,QAXF,QAYO,+BAZP;AAaA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,QAAT,QAAyB,2BAAzB;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,mBAAP,MAAgC,+BAAhC;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,SAASC,SAAT,QAA0B,8BAA1B;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,MAAMC,UAAU,GAAGhC,KAAK,CAACiC,UAAN,CAAiB,SAASD,UAAT,CAAoBE,KAApB,EAA2BC,GAA3B,EAAgC;AAClE,sBAAO,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAC,IAAjB;AAAsB,IAAA,GAAG,EAAEA;AAA3B,KAAoCD,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AACD,CAFkB,CAAnB;;AAIA,MAAME,cAAN,SAA6BnC,SAA7B,CAAuC;AAAA;AAAA;AAAA,SACrCoC,KADqC,GAC7B;AACNC,MAAAA,OAAO,EAAE,CACP;AACEC,QAAAA,IAAI,EAAE,MADR;AAEEC,QAAAA,MAAM,EAAE;AAFV,OADO,EAKP;AACED,QAAAA,IAAI,EAAE,SADR;AAEEC,QAAAA,MAAM,EAAE;AAFV,OALO,EASP;AACED,QAAAA,IAAI,EAAE,KADR;AAEEC,QAAAA,MAAM,EAAE;AAFV,OATO,CADH;AAgBNC,MAAAA,QAAQ,EAAE,KAhBJ;AAiBNC,MAAAA,cAAc,EAAE,EAjBV;AAmBNC,MAAAA,QAAQ,EAAE,KAnBJ;AAoBNC,MAAAA,kBAAkB,EAAE,KApBd;AAsBNC,MAAAA,KAAK,EAAE,CAtBD;AAuBNC,MAAAA,IAAI,EAAE,CAvBA;AAyBNC,MAAAA,gBAAgB,EAAE,KAzBZ;AA0BNC,MAAAA,UAAU,EAAE,EA1BN;AA4BNC,MAAAA,aAAa,EAAE,KA5BT;AA6BNC,MAAAA,UAAU,EAAE,EA7BN;AA+BNC,MAAAA,eAAe,EAAE,EA/BX;AAiCNC,MAAAA,UAAU,EAAE,KAjCN;AAkCNC,MAAAA,QAAQ,EAAE,KAlCJ;AAmCNC,MAAAA,SAAS,EAAE,EAnCL;AAoCNC,MAAAA,aAAa,EAAE,KApCT;AAsCNC,MAAAA,IAAI,EAAE,EAtCA;AAwCNC,MAAAA,kBAAkB,EAAE,KAxCd;AAyCNC,MAAAA,yBAAyB,EAAE,KAzCrB;AA2CNC,MAAAA,kBAAkB,EAAE;AA3Cd,KAD6B;;AAAA,SAqFrCC,cArFqC,GAqFpB,MAAM;AACrB,UAAI,KAAK1B,KAAL,CAAW2B,IAAX,CAAgBC,MAApB,EAA4B;AAC1B,aAAKC,QAAL,CAAc;AACZtB,UAAAA,QAAQ,EAAE;AADE,SAAd;AAGD;AACF,KA3FoC;;AAAA,SA6FrCuB,mBA7FqC,GA6Ff,MAAM;AAC1B,WAAKD,QAAL,CAAc;AACZtB,QAAAA,QAAQ,EAAE;AADE,OAAd;AAGD,KAjGoC;;AAAA,SA2GrCwB,QA3GqC,GA2GzBC,KAAD,IAAW;AACpB,aAAOA,KAAK,CAACC,GAAN,CAAU,CAACC,IAAD,EAAOC,CAAP,kBACf,oBAAC,MAAD;AAAQ,QAAA,SAAS,EAAC,cAAlB;AAAiC,QAAA,GAAG,EAAED,IAAI,CAACE,QAA3C;AAAqD,QAAA,GAAG,EAAEF,IAAI,CAACG,GAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADK,CAAP;AAGD,KA/GoC;;AAAA,SAiHrCC,YAjHqC,GAiHrBC,QAAD,IAAc;AAC3B,UAAIC,cAAc,GAAG,EAArB;;AACA,UAAID,QAAQ,CAAC,CAAD,CAAR,CAAYE,OAAhB,EAAyB;AACvB,aAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKhC,KAAL,CAAWQ,KAA/B,EAAsCwB,CAAC,EAAvC,EAA2C;AACzC,cACE,KAAKnC,KAAL,CAAW2B,IAAX,CAAgBY,QAAhB,CAAyBJ,CAAzB,KACA,KAAKnC,KAAL,CAAW2B,IAAX,CAAgBY,QAAhB,CAAyBJ,CAAzB,EAA4BM,OAF9B,EAGE;AACAD,YAAAA,cAAc,CAACE,IAAf,CAAoB,KAAK1C,KAAL,CAAW2B,IAAX,CAAgBY,QAAhB,CAAyBJ,CAAzB,CAApB;AACD,WALD,MAKO;AACL;AACD;AACF;AACF;;AACD,aAAOK,cAAc,CAACP,GAAf,CAAmB,CAACC,IAAD,EAAOC,CAAP,KACxBD,IAAI,gBACF;AACE,QAAA,SAAS,EAAC,SADZ;AAEE,QAAA,YAAY,EAAE,MAAM,KAAKL,QAAL,CAAc;AAAEnB,UAAAA,kBAAkB,EAAEwB,IAAI,CAACS;AAA3B,SAAd,CAFtB;AAGE,QAAA,YAAY,EAAE,MAAM,KAAKd,QAAL,CAAc;AAAEnB,UAAAA,kBAAkB,EAAE;AAAtB,SAAd,CAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,GAAG,EAAEwB,IAAI,CAACU,QAAL,CAAc,CAAd,EAAiBP,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CALF,eAQE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,OAAO,EAAE,MAAM;AACb,eAAKrC,KAAL,CAAW6C,OAAX,CAAmBH,IAAnB,CAAyB,SAAQR,IAAI,CAACU,QAAL,CAAc,CAAd,EAAiBD,GAAI,EAAtD;AACD,SAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKGT,IAAI,CAACU,QAAL,CAAc,CAAd,EAAiBR,QALpB,CADF,EAOO,GAPP,EAQGF,IAAI,CAACO,OARR,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAIP,IAAI,CAACY,KAAL,CAAWC,MAAf,6BATF,CARF,eAmBE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGb,IAAI,CAACY,KAAL,CAAW,CAAX,iBACC;AACE,QAAA,OAAO,EAAE,MACP,KAAK9C,KAAL,CAAWgD,QAAX,CACEtE,aAAa,CAAC,KAAKsB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAsBT,IAAI,CAACS,GAA3B,CADf,CAFJ;AAME,QAAA,GAAG,EAAEM,OAAO,CAAC,iDAAD,CANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,gBAUC;AACE,QAAA,OAAO,EAAE,MACP,KAAKjD,KAAL,CAAWgD,QAAX,CACEvE,WAAW,CAAC,KAAKuB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAsBT,IAAI,CAACS,GAA3B,CADb,CAFJ;AAME,QAAA,GAAG,EAAEM,OAAO,CAAC,0CAAD,CANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAXJ,eAoBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAK9C,KAAL,CAAWO,kBAAX,IAAiCwB,IAAI,CAACS,GAAtC,gBACC;AACE,QAAA,OAAO,EAAE,MAAM;AACb,eAAKd,QAAL,CAAc;AACZd,YAAAA,aAAa,EAAE,IADH;AAEZC,YAAAA,UAAU,EAAE,eAFA;AAGZC,YAAAA,eAAe,EAAEiB,IAAI,CAACS;AAHV,WAAd;AAKD,SAPH;AAQE,QAAA,GAAG,EAAEM,OAAO,CAAC,6CAAD,CARd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,GAYC,EAbJ,CApBF,CAnBF,CADE,GA0DA,IA3DC,CAAP;AA6DD,KA5LoC;;AAAA,SA8LrC1E,WA9LqC,GA8LvB,CAAC2E,MAAD,EAASC,KAAT,KAAmB;AAC/BA,MAAAA,KAAK,CAACC,cAAN;AACAD,MAAAA,KAAK,CAACE,OAAN;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,MAAZ,EAAoBC,KAAK,CAACK,MAAN,CAAa,CAAb,EAAgBC,KAApC;AACA,WAAKzD,KAAL,CACGgD,QADH,CACYzE,WAAW,CAAC2E,MAAD,EAASC,KAAK,CAACK,MAAN,CAAa,CAAb,EAAgBC,KAAzB,EAAgC,QAAhC,CADvB,EAEGC,IAFH,CAESC,QAAD,IAAc;AAClB,YAAIA,QAAQ,CAACC,OAAT,CAAiBC,UAArB,EAAiC;AAC/BP,UAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,OAArB;AACA,eAAK/B,QAAL,CAAc;AACZL,YAAAA,yBAAyB,EAAE,IADf;AAEZC,YAAAA,kBAAkB,EAAEkC,QAAQ,CAACC,OAAT,CAAiBnC;AAFzB,WAAd;AAID,SAND,MAMO;AACL6B,UAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAK,CAACK,MAAN,CAAa,CAAb,EAAgBC,KAA5B;AACAN,UAAAA,KAAK,CAACK,MAAN,CAAa,CAAb,EAAgBC,KAAhB,GAAwB,EAAxB;AACD;AACF,OAbH,EAJ+B,CAkB/B;AACA;AACA;AACA;AACA;AACA;AACD,KAtNoC;;AAAA,SAwNrCK,WAxNqC,GAwNvB,CAAC5B,IAAD,EAAOC,CAAP,KAAa;AACzB,cAAQD,IAAI,CAAC7B,IAAb;AACE,aAAK,MAAL;AACE,gBAAM0D,KAAK,GAAG,KAAK/D,KAAL,CAAW2B,IAAX,CAAgBmB,KAAhB,CAAsBkB,MAAtB,CACX9B,IAAD,IAAUA,IAAI,CAACS,GAAL,KAAa,KAAK3C,KAAL,CAAWiE,IAAX,CAAgBC,QAAhB,CAAyBvB,GADpC,CAAd;AAGA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACGoB,KAAK,CAAC,CAAD,CAAL,gBACC;AACE,YAAA,OAAO,EAAE,MACP,KAAK/D,KAAL,CACGgD,QADH,CACY1E,UAAU,CAAC,KAAK0B,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAsB,QAAtB,CADtB,EAEGe,IAFH,CAESC,QAAD,IAAc;AAClB,kBAAIA,QAAQ,CAACC,OAAT,CAAiBC,UAArB,EAAiC;AAC/BP,gBAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,OAArB;AACA,qBAAK/B,QAAL,CAAc;AACZL,kBAAAA,yBAAyB,EAAE,IADf;AAEZC,kBAAAA,kBAAkB,EAChBkC,QAAQ,CAACC,OAAT,CAAiBnC;AAHP,iBAAd;AAKD;AACF,aAXH,CAFJ;AAeE,YAAA,GAAG,EAAEwB,OAAO,CAAC,iDAAD,CAfd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,gBAmBC;AACE,YAAA,OAAO,EAAE,MACP,KAAKjD,KAAL,CACGgD,QADH,CACY3E,QAAQ,CAAC,KAAK2B,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAsB,QAAtB,CADpB,EAEGe,IAFH,CAESC,QAAD,IAAc;AAClB,kBAAIA,QAAQ,CAACC,OAAT,CAAiBC,UAArB,EAAiC;AAC/BP,gBAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,OAArB;AACA,qBAAK/B,QAAL,CAAc;AACZL,kBAAAA,yBAAyB,EAAE,IADf;AAEZC,kBAAAA,kBAAkB,EAChBkC,QAAQ,CAACC,OAAT,CAAiBnC;AAHP,iBAAd;AAKD;AACF,aAXH,CAFJ;AAeE,YAAA,GAAG,EAAEwB,OAAO,CAAC,0CAAD,CAfd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YApBJ,CADF;;AAyCF,aAAK,KAAL;AACE,gBAAMkB,KAAK,GAAG,KAAKnE,KAAL,CAAWiE,IAAX,CAAgBC,QAAhB,CAAyBC,KAAzB,CAA+BH,MAA/B,CACX9B,IAAD,IAAUA,IAAI,IAAI,KAAKlC,KAAL,CAAW2B,IAAX,CAAgBgB,GADtB,CAAd;AAGA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACGwB,KAAK,CAAC,CAAD,CAAL,gBACC;AACE,YAAA,OAAO,EAAE,MACP,KAAKnE,KAAL,CACGgD,QADH,CACYlE,UAAU,CAAC,KAAKkB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,CADtB,EAEGe,IAFH,CAESC,QAAD,IAAc;AAClB,kBAAIA,QAAQ,CAACC,OAAT,CAAiBC,UAArB,EAAiC;AAC/BP,gBAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,OAArB;AACA,qBAAK/B,QAAL,CAAc;AACZL,kBAAAA,yBAAyB,EAAE,IADf;AAEZC,kBAAAA,kBAAkB,EAChBkC,QAAQ,CAACC,OAAT,CAAiBnC;AAHP,iBAAd;AAKD;AACF,aAXH,CAFJ;AAeE,YAAA,GAAG,EAAEwB,OAAO,CAAC,4CAAD,CAfd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,gBAmBC;AACE,YAAA,OAAO,EAAE,MACP,KAAKjD,KAAL,CACGgD,QADH,CACYjE,QAAQ,CAAC,KAAKiB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,CADpB,EAEGe,IAFH,CAESC,QAAD,IAAc;AAClB,kBAAIA,QAAQ,CAACC,OAAT,CAAiBC,UAArB,EAAiC;AAC/BP,gBAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,OAArB;AACA,qBAAK/B,QAAL,CAAc;AACZL,kBAAAA,yBAAyB,EAAE,IADf;AAEZC,kBAAAA,kBAAkB,EAChBkC,QAAQ,CAACC,OAAT,CAAiBnC;AAHP,iBAAd;AAKD;AACF,aAXH,CAFJ;AAeE,YAAA,GAAG,EAAEwB,OAAO,CAAC,2CAAD,CAfd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YApBJ,CADF;AAlDJ;AA4FD,KArToC;;AAAA,SAuTrCmB,SAvTqC,GAuTzB,MAAM;AAChB,UAAIC,IAAI,GAAG,EAAX;AACA,aAAO,KAAKlE,KAAL,CAAWC,OAAX,CAAmB6B,GAAnB,CAAuB,CAACC,IAAD,EAAOC,CAAP,KAAa;AACzC,eAAO,KAAK2B,WAAL,CAAiB5B,IAAjB,EAAuBC,CAAvB,CAAP;AACD,OAFM,CAAP;AAGD,KA5ToC;;AAAA,SA8TrCmC,cA9TqC,GA8TnBC,cAAD,IAAoB;AACnCjB,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,WAAK1B,QAAL,CAAe2C,SAAD,KAAgB;AAAE/D,QAAAA,QAAQ,EAAE,CAAC+D,SAAS,CAAC/D;AAAvB,OAAhB,CAAd;AACD,KAjUoC;;AAAA,SAmUrCgE,eAnUqC,GAmUlBF,cAAD,IAAoB;AACpCjB,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACD,KArUoC;;AAAA,SA2erCmB,eA3eqC,GA2enB,MAAM;AACtB,WAAK7C,QAAL,CAAc;AACZhB,QAAAA,gBAAgB,EAAE,KADN;AAEZC,QAAAA,UAAU,EAAE,EAFA;AAGZC,QAAAA,aAAa,EAAE;AAHH,OAAd;AAKD,KAjfoC;;AAAA,SAmgBrC4D,WAngBqC,GAmgBvB,MAAM;AAClB,WAAK9C,QAAL,CAAc;AAAEX,QAAAA,UAAU,EAAE,CAAC,KAAKf,KAAL,CAAWe;AAA1B,OAAd;AACD,KArgBoC;;AAAA,SAugBrC0D,cAvgBqC,GAugBpB,CAACC,IAAD,EAAOC,GAAP,KAAe;AAC9B,WAAKjD,QAAL,CAAc;AAAEV,QAAAA,QAAQ,EAAE,IAAZ;AAAkBC,QAAAA,SAAS,EAAEyD,IAA7B;AAAmCxD,QAAAA,aAAa,EAAEyD;AAAlD,OAAd;AACD,KAzgBoC;AAAA;;AA+CrCC,EAAAA,iBAAiB,GAAG;AAClB,QAAI,KAAK/E,KAAL,CAAW2B,IAAX,CAAgBC,MAApB,EAA4B;AAC1B,UAAIpB,cAAc,GAAG,EAArB;AAEA,WAAKR,KAAL,CAAW2B,IAAX,CAAgBC,MAAhB,CAAuBoD,OAAvB,CAAgC9C,IAAD,IAAU;AACvC1B,QAAAA,cAAc,CAACkC,IAAf,CAAoBR,IAAI,CAAC+C,GAAzB;AACD,OAFD;AAIA,WAAKpD,QAAL,CAAc;AACZrB,QAAAA;AADY,OAAd;AAGD;;AAED,QAAI0E,OAAO,GAAG,KAAKC,YAAL,CAAkB,KAAKnF,KAAL,CAAW2B,IAAX,CAAgByD,WAAlC,CAAd;AACAnG,IAAAA,QAAQ,CAACiG,OAAD,CAAR,CAAkBxB,IAAlB,CAAwBC,QAAD,IAAc;AACnC,WAAK9B,QAAL,CAAc;AAAEP,QAAAA,IAAI,EAAE,CAAC,GAAGqC,QAAJ;AAAR,OAAd;AACD,KAFD;AAIA,SAAK3D,KAAL,CAAWgD,QAAX,CAAoBvD,SAAS,EAA7B;AACD;;AAED4F,EAAAA,kBAAkB,GAAG;AACnB,QAAI,KAAKrF,KAAL,CAAW2B,IAAX,CAAgBC,MAApB,EAA4B;AAC1B,UAAIpB,cAAc,GAAG,EAArB;AAEA,WAAKR,KAAL,CAAW2B,IAAX,CAAgBC,MAAhB,CAAuBoD,OAAvB,CAAgC9C,IAAD,IAAU;AACvC1B,QAAAA,cAAc,CAACkC,IAAf,CAAoBR,IAAI,CAAC+C,GAAzB;AACD,OAFD;AAIA,WAAK9E,KAAL,CAAWK,cAAX,GAA4BA,cAA5B;AACD;;AAED,QAAI0E,OAAO,GAAG,KAAKC,YAAL,CAAkB,KAAKnF,KAAL,CAAW2B,IAAX,CAAgByD,WAAlC,CAAd;AACAnG,IAAAA,QAAQ,CAACiG,OAAD,CAAR,CAAkBxB,IAAlB,CAAwBC,QAAD,IAAc;AACnC,WAAKxD,KAAL,CAAWmB,IAAX,GAAkB,CAAC,GAAGqC,QAAJ,CAAlB;AACD,KAFD;AAGD;;AAgBD2B,EAAAA,eAAe,CAAC1D,MAAD,EAAS;AACtB,QAAIA,MAAM,CAACmB,MAAP,GAAgB,CAApB,EAAuB;AACrB,aAAOnB,MAAM,CAAC,CAAD,CAAN,CAAUqD,GAAjB;AACD,KAFD,MAEO;AACL,aAAO,qHAAP;AACD;AACF;;AA8NDM,EAAAA,UAAU,CAACC,GAAD,EAAM;AACdlC,IAAAA,OAAO,CAACC,GAAR,CAAYiC,GAAZ;AACAA,IAAAA,GAAG,GAAGC,QAAQ,CAACD,GAAD,CAAd;AACAlC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAOiC,GAAnB;;AACA,QAAIA,GAAG,GAAG,EAAV,EAAc;AACZ,aAAOA,GAAG,GAAG,OAAb;AACD,KAFD,MAEO,IAAIA,GAAG,IAAI,CAAP,IAAYA,GAAG,GAAG,MAAtB,EAA8B;AACnClC,MAAAA,OAAO,CAACC,GAAR,CAAYiC,GAAZ;AACA,aAAOA,GAAG,GAAG,EAAN,GAAW,MAAlB;AACD,KAHM,MAGA,IAAIA,GAAG,IAAI,MAAX,EAAmB;AACxBlC,MAAAA,OAAO,CAACC,GAAR,CAAYiC,GAAZ;AACA,aAAOA,GAAG,GAAG,EAAN,GAAW,EAAX,GAAgB,OAAvB;AACD;AACF;;AAEDL,EAAAA,YAAY,CAACO,IAAD,EAAO;AACjB,QAAIC,MAAM,GAAG,cAAb;AACA,QAAIC,MAAM,GAAGF,IAAI,CAACG,KAAL,CAAWF,MAAX,CAAb;;AACA,QAAIC,MAAJ,EAAY;AACV,UAAItE,IAAI,GAAG,EAAX;AACAsE,MAAAA,MAAM,CAACZ,OAAP,CAAgB9C,IAAD,IAAU;AACvBZ,QAAAA,IAAI,CAACoB,IAAL,CAAUR,IAAI,CAAC4D,KAAL,CAAW,CAAX,CAAV;AACD,OAFD;AAGA,aAAOxE,IAAP;AACD,KAND,MAMO;AACL,aAAO,KAAP;AACD;AACF;;AAEDyE,EAAAA,iBAAiB,CAACX,WAAD,EAAcY,OAAd,EAAuBC,YAAvB,EAAqC;AACpD;AAEA,SAAK9F,KAAL,CAAWmB,IAAX,CAAgB0D,OAAhB,CACG9C,IAAD,IACGkD,WAAW,GAAGA,WAAW,CAACc,OAAZ,CACb,MAAMhE,IAAI,CAAC7B,IADE,EAEZ,iBAAgB6B,IAAI,CAACS,GAAI,KAAI,MAAMT,IAAI,CAAC7B,IAAK,MAFjC,CAFnB;;AAOA,QAAI2F,OAAO,CAACjD,MAAR,GAAiB,CAArB,EAAwB;AACtBqC,MAAAA,WAAW,GAAGA,WAAW,GAAG,oBAA5B;AACD;;AACDY,IAAAA,OAAO,CAAChB,OAAR,CAAiB9C,IAAD,IAAU;AACxBkD,MAAAA,WAAW,IAAK,kBAAiBlD,IAAI,CAACS,GAAI,OAAMT,IAAI,CAACE,QAAS,OAA9D;AACD,KAFD;;AAGA,QAAI6D,YAAJ,EAAkB;AAChBb,MAAAA,WAAW,IAAK,oCAAmCa,YAAa,MAAKA,YAAa,OAAlF;AACD;;AACD,wBAAO;AAAK,MAAA,uBAAuB,EAAE;AAAEE,QAAAA,MAAM,EAAEf;AAAV,OAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAEDgB,EAAAA,aAAa,CAACC,IAAD,EAAO;AAClB,QAAIC,QAAQ,GAAG,EAAf;;AACA,YAAQD,IAAR;AACE,WAAK,eAAL;AACEC,QAAAA,QAAQ,gBACN;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,KAAKtG,KAAL,CAAW2B,IAAX,CAAgBiB,QAAhB,CAAyB,CAAzB,EAA4BD,GAA5B,KACD,KAAK3C,KAAL,CAAWiE,IAAX,CAAgBC,QAAhB,CAAyBvB,GADxB,gBAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AACE,UAAA,SAAS,EAAC,eADZ;AAEE,UAAA,OAAO,EAAE,MAAM;AACb,iBAAK3C,KAAL,CACGgD,QADH,CAEIrE,aAAa,CACX,KAAKqB,KAAL,CAAW2B,IAAX,CAAgBgB,GADL,EAEX,KAAKxC,KAAL,CAAWc,eAFA,CAFjB,EAOGyC,IAPH,CAOQ,MAAM;AACV,mBAAK7B,QAAL,CAAc;AACZd,gBAAAA,aAAa,EAAE,KADH;AAEZE,gBAAAA,eAAe,EAAE;AAFL,eAAd;AAID,aAZH;AAaD,WAhBH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UArBF,eAsBE;AACE,UAAA,SAAS,EAAC,eADZ;AAEE,UAAA,OAAO,EAAE,MAAM;AACb,iBAAKY,QAAL,CAAc;AACZhB,cAAAA,gBAAgB,EAAE,IADN;AAEZC,cAAAA,UAAU,EAAE;AACVyF,gBAAAA,UAAU,EAAE,SADF;AAEV5E,gBAAAA,IAAI,EAAE,KAAK3B,KAAL,CAAW2B,IAAX,CAAgBgB,GAFZ;AAGV6D,gBAAAA,OAAO,EAAE,KAAKrG,KAAL,CAAWc;AAHV;AAFA,aAAd;AAQD,WAXH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAtBF,CAFD,gBAyCC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AACE,UAAA,SAAS,EAAC,eADZ;AAEE,UAAA,OAAO,EAAE,MAAM;AACb,iBAAKY,QAAL,CAAc;AACZhB,cAAAA,gBAAgB,EAAE,IADN;AAEZC,cAAAA,UAAU,EAAE;AACVyF,gBAAAA,UAAU,EAAE,SADF;AAEV5E,gBAAAA,IAAI,EAAE,KAAK3B,KAAL,CAAW2B,IAAX,CAAgBgB,GAFZ;AAGV6D,gBAAAA,OAAO,EAAE,KAAKrG,KAAL,CAAWc;AAHV;AAFA,aAAd;AAQD,WAXH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,CA1CJ,CADF;AA+DA;;AACF,WAAK,eAAL;AACEqF,QAAAA,QAAQ,gBACN;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qFADF,eAEE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AACE,UAAA,SAAS,EAAC,YADZ;AAEE,UAAA,OAAO,EAAE,MAAM,KAAKzE,QAAL,CAAc;AAAEd,YAAAA,aAAa,EAAE;AAAjB,WAAd,CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAOE;AACE,UAAA,SAAS,EAAC,aADZ;AAEE,UAAA,OAAO,EAAE,MACP,KAAKf,KAAL,CACGgD,QADH,CACYpE,UAAU,CAAC,KAAKoB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,CADtB,EAEGe,IAFH,CAEQ,MAAM;AACV,iBAAK1D,KAAL,CAAW6C,OAAX,CAAmBH,IAAnB,CAAwB,UAAxB;AACD,WAJH,CAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPF,CAFF,CADF;AAyBA;;AACF;AACE4D,QAAAA,QAAQ,gBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAX;AACA;AA/FJ;;AAiGA,wBACE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAE,KAAKnG,KAAL,CAAWY,aADnB;AAEE,MAAA,mBAAmB,EAAEjB,UAFvB;AAGE,MAAA,WAAW,MAHb;AAIE,MAAA,OAAO,EAAE,MAAM;AACb,aAAK+B,QAAL,CAAc;AAAEd,UAAAA,aAAa,EAAE;AAAjB,SAAd;AACD,OANH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQGuF,QARH,CADF;AAYD;;AAUDG,EAAAA,cAAc,CAACJ,IAAD,EAAO;AACnB,wBACE,oBAAC,MAAD;AACE,MAAA,gBAAgB,EAAE,KAAKlG,KAAL,CAAWU,gBAD/B;AAEE,MAAA,UAAU,EAAE,KAAKV,KAAL,CAAWW,UAFzB;AAGE,MAAA,cAAc,EAAE,CAAC+D,IAAD,EAAOC,GAAP,KAAe;AAC7B,aAAKF,cAAL,CAAoBC,IAApB,EAA0BC,GAA1B;AACD,OALH;AAME,MAAA,IAAI,EAAE,KAAK9E,KAAL,CAAW0G,QAAX,CAAoBC,UAN5B;AAOE,MAAA,eAAe,EAAE,MAAM,KAAKjC,eAAL,EAPzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAWD;;AAED9F,EAAAA,UAAU,GAAG,CAAE;;AAUfgI,EAAAA,MAAM,GAAG;AACP,UAAM5G,KAAK,GAAG,KAAKA,KAAnB;AACA,wBACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,OAAO,EAAE,MAAM,KAAK0B,cAAL,EADjB;AAEE,MAAA,SAAS,EAAC,YAFZ;AAGE,MAAA,GAAG,EAAE,KAAK4D,eAAL,CAAqBtF,KAAK,CAAC2B,IAAN,CAAWC,MAAhC,CAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,eAQE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,GAAG,EAAE5B,KAAK,CAAC2B,IAAN,CAAWiB,QAAX,CAAoB,CAApB,EAAuBP,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,eAIE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAG,SAAQrC,KAAK,CAAC2B,IAAN,CAAWiB,QAAX,CAAoB,CAApB,EAAuBD,GAAI,EAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG3C,KAAK,CAAC2B,IAAN,CAAWiB,QAAX,CAAoB,CAApB,EAAuBR,QAD1B,CADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI,KAAKmD,UAAL,CAAgBvF,KAAK,CAAC2B,IAAN,CAAWkF,cAA3B,CAAJ,CAJF,CAJF,CADF,eAYE;AACE,MAAA,SAAS,EAAG,kBACV,KAAK1G,KAAL,CAAWM,QAAX,GAAsB,gBAAtB,GAAyC,EAC1C,EAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AACE,MAAA,OAAO,EAAE,KAAK6D,cADhB;AAEE,MAAA,GAAG,EAAErB,OAAO,CAAC,6CAAD,CAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,EASG,KAAK9C,KAAL,CAAWM,QAAX,gBACC,oBAAC,mBAAD;AACE,MAAA,OAAO,EAAE,MAAM,KAAKoB,QAAL,CAAc;AAAEpB,QAAAA,QAAQ,EAAE;AAAZ,OAAd,CADjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGE;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,OAAO,EAAE,KAAKgE,eAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,OAAO,EAAE,MACP,KAAKzE,KAAL,CACGgD,QADH,CACYxE,QAAQ,CAAC,KAAKwB,KAAL,CAAW2B,IAAX,CAAgBgB,GAAjB,EAAsB,QAAtB,CADpB,EAEGe,IAFH,CAEQ,MAAM;AACV,aAAK1D,KAAL,CAAW6C,OAAX,CAAmBH,IAAnB,CAAwB,UAAxB;AACD,OAJH,CAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CADF,eAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAdF,EAeG1C,KAAK,CAAC2B,IAAN,CAAWiB,QAAX,CAAoB,CAApB,EAAuBD,GAAvB,KACD,KAAK3C,KAAL,CAAWiE,IAAX,CAAgBC,QAAhB,CAAyBvB,GADxB,gBAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,eADZ;AAEE,MAAA,OAAO,EAAE,MAAM;AACb,aAAKd,QAAL,CAAc;AACZd,UAAAA,aAAa,EAAE,IADH;AAEZC,UAAAA,UAAU,EAAE;AAFA,SAAd;AAID,OAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CADF,eAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAdF,eAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,aADZ;AAEE,MAAA,OAAO,EAAE,MAAM;AACb,aAAKa,QAAL,CAAc;AACZX,UAAAA,UAAU,EAAE,IADA;AAEZT,UAAAA,QAAQ,EAAE;AAFE,SAAd;AAID,OAPH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CAfF,CAFD,gBAgCC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,eADZ;AAEE,MAAA,OAAO,EAAE,MAAM;AACb,aAAKoB,QAAL,CAAc;AACZhB,UAAAA,gBAAgB,EAAE,IADN;AAEZC,UAAAA,UAAU,EAAE;AACVyF,YAAAA,UAAU,EAAE,MADF;AAEV5E,YAAAA,IAAI,EAAE3B,KAAK,CAAC2B,IAAN,CAAWgB;AAFP;AAFA,SAAd;AAOD,OAVH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,CA/CJ,CAHF,CADD,GAsEG,IA/EN,CAZF,CADF,eA+FE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKxC,KAAL,CAAWe,UAAX,gBACC,oBAAC,QAAD;AACE,MAAA,WAAW,EAAElB,KAAK,CAAC2B,IAAN,CAAWyD,WAD1B;AAEE,MAAA,KAAK,EAAE,KAAKT,WAFd;AAGE,MAAA,cAAc,EAAE,CAACE,IAAD,EAAOC,GAAP,KAAe;AAC7B,aAAKF,cAAL,CAAoBC,IAApB,EAA0BC,GAA1B;AACD,OALH;AAME,MAAA,UAAU,EAAC,QANb;AAOE,MAAA,OAAO,EAAE9E,KAAK,CAAC2B,IAAN,CAAWqE,OAPtB;AAQE,MAAA,YAAY,EAAEhG,KAAK,CAAC2B,IAAN,CAAWsE,YAR3B;AASE,MAAA,MAAM,EAAEjG,KAAK,CAAC2B,IAAN,CAAWgB,GATrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAaC,KAAKoD,iBAAL,CACE/F,KAAK,CAAC2B,IAAN,CAAWyD,WADb,EAEEpF,KAAK,CAAC2B,IAAN,CAAWqE,OAFb,EAGEhG,KAAK,CAAC2B,IAAN,CAAWsE,YAHb,CAdJ,CA/FF,eAqHE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAK3D,YAAL,CAAkBtC,KAAK,CAAC2B,IAAN,CAAWY,QAA7B,CADH,EAEG,KAAKpC,KAAL,CAAWQ,KAAX,GAAmBX,KAAK,CAAC2B,IAAN,CAAWY,QAAX,CAAoBQ,MAAvC,gBACC;AACE,MAAA,OAAO,EAAE,MAAM;AACb,aAAKlB,QAAL,CAAc;AAAElB,UAAAA,KAAK,EAAE,KAAKR,KAAL,CAAWQ,KAAX,GAAmB;AAA5B,SAAd;AACD,OAHH;AAIE,MAAA,SAAS,EAAC,eAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKG,UALH,CADD,GAOG,IATN,CArHF,eAgIE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiC,KAAKyD,SAAL,EAAjC,CADF,eAEE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,WAAD;AAAa,MAAA,GAAG,EAAE,CAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKrC,QAAL,CAAc/B,KAAK,CAAC2B,IAAN,CAAWmB,KAAzB,CADH,CADF,EAIG9C,KAAK,CAAC2B,IAAN,CAAWmB,KAAX,CAAiBC,MAAjB,gBAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAA1B,GAAuD,IAJ1D,CAFF,eAQE;AACE,MAAA,SAAS,EAAC,cADZ;AAEE,MAAA,QAAQ,EAAGI,KAAD,IACR,KAAK5E,WAAL,CAAiByB,KAAK,CAAC2B,IAAN,CAAWgB,GAA5B,EAAiCQ,KAAjC,EAAwC,QAAxC,CAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAME;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,WAAW,EAAC,iCAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CANF,CARF,CAhIF,CARF,CADF,EA8JG,KAAKhD,KAAL,CAAWI,QAAX,gBACC,oBAAC,aAAD;AACE,MAAA,EAAE,EAAEP,KAAK,CAAC2B,IAAN,CAAWgB,GADjB;AAEE,MAAA,MAAM,EAAE,KAAKxC,KAAL,CAAWK,cAFrB;AAGE,MAAA,IAAI,EAAE,KAAKL,KAAL,CAAWI,QAHnB;AAIE,MAAA,GAAG,EAAE,CAJP;AAKE,MAAA,OAAO,EAAE,MAAM,KAAKuB,mBAAL,EALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAQG,IAtKN,EAuKG,KAAKsE,aAAL,CAAmB,KAAKjG,KAAL,CAAWa,UAA9B,CAvKH,EAwKG,KAAKyF,cAAL,EAxKH,eA0KI,oBAAC,MAAD;AACE,MAAA,SAAS,EAAC,aADZ;AAEE,MAAA,OAAO,EAAE,MAAM;AACb,aAAK5E,QAAL,CAAc;AAAEL,UAAAA,yBAAyB,EAAE;AAA7B,SAAd;AACD,OAJH;AAKE,MAAA,IAAI,EAAE,KAAKrB,KAAL,CAAWqB,yBALnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAOE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4HACkD,GADlD,EAEG3B,MAAM,CAAC,KAAKM,KAAL,CAAWsB,kBAAX,CAA8BqF,YAA/B,CAAN,CAAmDC,MAAnD,CAA0D,GAA1D,CAFH,CADF,CAPF,CA1KJ,eAyLE,oBAAC,QAAD;AACE,MAAA,YAAY,EAAE;AACZC,QAAAA,QAAQ,EAAE,QADE;AAEZC,QAAAA,UAAU,EAAE;AAFA,OADhB;AAKE,MAAA,IAAI,EAAE,KAAK9G,KAAL,CAAWgB,QALnB;AAME,MAAA,OAAO,EAAE,MAAM,KAAKU,QAAL,CAAc;AAAEV,QAAAA,QAAQ,EAAE;AAAZ,OAAd,CANjB;AAOE,MAAA,gBAAgB,EAAE,IAPpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBASE,oBAAC,QAAD;AACE,MAAA,SAAS,EAAE,CADb;AAEE,MAAA,OAAO,EAAC,QAFV;AAGE,MAAA,QAAQ,EAAE,KAAKhB,KAAL,CAAWkB,aAAX,GAA2B,SAA3B,GAAuC,SAHnD;AAIE,MAAA,OAAO,EAAE,KAAKlB,KAAL,CAAWiB,SAJtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMG,KAAKjB,KAAL,CAAWiB,SANd,CATF,CAzLF,CADF;AA8MD;;AA3tBoC;;AA8tBvC,MAAM8F,eAAe,GAAI/G,KAAD,IAAW;AACjC,SAAO;AACL8D,IAAAA,IAAI,EAAE9D,KAAK,CAAC8D,IADP;AAELyC,IAAAA,QAAQ,EAAEvG,KAAK,CAACuG;AAFX,GAAP;AAID,CALD;;AAOA,eAAexI,OAAO,CAACgJ,eAAD,CAAP,CAAyB7H,UAAU,CAACa,cAAD,CAAnC,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport MyButton from \"../ultils/button\";\nimport \"./postDetailCard.scss\";\nimport ImageLightBox from \"../ultils/ImageLightBox\";\nimport { connect } from \"react-redux\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport faEllipsisH from \"@fortawesome/fontawesome-free-solid/faEllipsisH\";\nimport {\n  likePost,\n  unlikePost,\n  makeComment,\n  hidePost,\n  likeComment,\n  unLikeComment,\n  deleteComment,\n  deletePost,\n  clearPostDetail,\n  unSavePost,\n  savePost,\n} from \"../../actions/product_actions\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { getTagId } from \"../../actions/tag_actions\";\nimport AvatarGroup from \"@material-ui/lab/AvatarGroup\";\nimport NativeClickListener from \"../ultils/NativeClickListener\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport Slide from \"@material-ui/core/Slide\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport Report from \"../Report/Report\";\nimport { getPolicy } from \"../../actions/policy_actions\";\nimport PostEdit from \"../PostEdit/index\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport moment from \"moment\";\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nclass PostDetailCard extends Component {\n  state = {\n    buttons: [\n      {\n        name: \"Like\",\n        linkTo: \"/\",\n      },\n      {\n        name: \"Comment\",\n        linkTo: \"/postDetail\",\n      },\n      {\n        name: \"Pin\",\n        linkTo: \"\",\n      },\n    ],\n\n    lightbox: false,\n    lightboxImages: [],\n\n    dropdown: false,\n    commentAdvancedBtn: false,\n\n    limit: 3,\n    skip: 0,\n\n    isReportFormShow: false,\n    reportData: {},\n\n    DialogShowing: false,\n    dialogType: \"\",\n\n    commentSelected: \"\",\n\n    showEditor: false,\n    setSnack: false,\n    SnackMess: \"\",\n    reportSuccess: false,\n\n    tags: [],\n\n    setfollowerDiaglog: false,\n    alertFunctionIsRestricted: false,\n\n    restrictedFunction: {},\n  };\n\n  componentDidMount() {\n    if (this.props.post.images) {\n      let lightboxImages = [];\n\n      this.props.post.images.forEach((item) => {\n        lightboxImages.push(item.url);\n      });\n\n      this.setState({\n        lightboxImages,\n      });\n    }\n\n    let hashtag = this.findHashtags(this.props.post.description);\n    getTagId(hashtag).then((response) => {\n      this.setState({ tags: [...response] });\n    });\n\n    this.props.dispatch(getPolicy());\n  }\n\n  componentDidUpdate() {\n    if (this.props.post.images) {\n      let lightboxImages = [];\n\n      this.props.post.images.forEach((item) => {\n        lightboxImages.push(item.url);\n      });\n\n      this.state.lightboxImages = lightboxImages;\n    }\n\n    let hashtag = this.findHashtags(this.props.post.description);\n    getTagId(hashtag).then((response) => {\n      this.state.tags = [...response];\n    });\n  }\n\n  handlelightBox = () => {\n    if (this.props.post.images) {\n      this.setState({\n        lightbox: true,\n      });\n    }\n  };\n\n  handlelightBoxClose = () => {\n    this.setState({\n      lightbox: false,\n    });\n  };\n\n  renderCardImage(images) {\n    if (images.length > 0) {\n      return images[0].url;\n    } else {\n      return \"https://cdn.shopify.com/s/files/1/0013/3529/6118/products/Terracotta-Pot-6_Sansevieria-Zeylanica-6.jpg?v=1544979697\";\n    }\n  }\n\n  showUser = (users) => {\n    return users.map((item, i) => (\n      <Avatar className=\"userlike_avt\" alt={item.userName} src={item.avt} />\n    ));\n  };\n\n  showComments = (comments) => {\n    let commentsToShow = [];\n    if (comments[0].content) {\n      for (let i = 0; i < this.state.limit; i++) {\n        if (\n          this.props.post.comments[i] &&\n          this.props.post.comments[i].content\n        ) {\n          commentsToShow.push(this.props.post.comments[i]);\n        } else {\n          break;\n        }\n      }\n    }\n    return commentsToShow.map((item, i) =>\n      item ? (\n        <div\n          className=\"comment\"\n          onMouseEnter={() => this.setState({ commentAdvancedBtn: item._id })}\n          onMouseLeave={() => this.setState({ commentAdvancedBtn: \"\" })}\n        >\n          <div className=\"user_avt\">\n            <img src={item.postedBy[0].avt} />\n          </div>\n          <div className=\"content\">\n            <b\n              onClick={() => {\n                this.props.history.push(`/user/${item.postedBy[0]._id}`);\n              }}\n            >\n              {item.postedBy[0].userName}\n            </b>{\" \"}\n            {item.content}\n            <p>{item.likes.length} lượt thích</p>\n          </div>\n          <div className=\"like_button\">\n            {item.likes[0] ? (\n              <img\n                onClick={() =>\n                  this.props.dispatch(\n                    unLikeComment(this.props.post._id, item._id)\n                  )\n                }\n                src={require(\"../../asset/newfeed_page/active_like_icon2x.png\")}\n              />\n            ) : (\n              <img\n                onClick={() =>\n                  this.props.dispatch(\n                    likeComment(this.props.post._id, item._id)\n                  )\n                }\n                src={require(\"../../asset/newfeed_page/like_icon2x.png\")}\n              />\n            )}\n            <div>\n              {this.state.commentAdvancedBtn == item._id ? (\n                <img\n                  onClick={() => {\n                    this.setState({\n                      DialogShowing: true,\n                      dialogType: \"commentHandle\",\n                      commentSelected: item._id,\n                    });\n                  }}\n                  src={require(\"../../asset/headerIcon/advance_button2x.png\")}\n                />\n              ) : (\n                \"\"\n              )}\n            </div>\n          </div>\n        </div>\n      ) : null\n    );\n  };\n\n  makeComment = (postId, event) => {\n    event.preventDefault();\n    event.persist();\n    console.log(postId, event.target[0].value);\n    this.props\n      .dispatch(makeComment(postId, event.target[0].value, \"detail\"))\n      .then((response) => {\n        if (response.payload.restricted) {\n          console.log(response.payload);\n          this.setState({\n            alertFunctionIsRestricted: true,\n            restrictedFunction: response.payload.restrictedFunction,\n          });\n        } else {\n          console.log(event.target[0].value);\n          event.target[0].value = \"\";\n        }\n      });\n    // event.preventDefault();\n    // event.persist();\n    // console.log(postId, event.target[0].value);\n    // this.props.dispatch(makeComment(postId, event.target[0].value,)).then(\n    //     event.target[0].value = \"\"\n    // )\n  };\n\n  defaultLink = (item, i) => {\n    switch (item.name) {\n      case \"Like\":\n        const liked = this.props.post.likes.filter(\n          (item) => item._id === this.props.user.userData._id\n        );\n        return (\n          <div>\n            {liked[0] ? (\n              <img\n                onClick={() =>\n                  this.props\n                    .dispatch(unlikePost(this.props.post._id, \"detail\"))\n                    .then((response) => {\n                      if (response.payload.restricted) {\n                        console.log(response.payload);\n                        this.setState({\n                          alertFunctionIsRestricted: true,\n                          restrictedFunction:\n                            response.payload.restrictedFunction,\n                        });\n                      }\n                    })\n                }\n                src={require(\"../../asset/newfeed_page/active_like_icon2x.png\")}\n              />\n            ) : (\n              <img\n                onClick={() =>\n                  this.props\n                    .dispatch(likePost(this.props.post._id, \"detail\"))\n                    .then((response) => {\n                      if (response.payload.restricted) {\n                        console.log(response.payload);\n                        this.setState({\n                          alertFunctionIsRestricted: true,\n                          restrictedFunction:\n                            response.payload.restrictedFunction,\n                        });\n                      }\n                    })\n                }\n                src={require(\"../../asset/newfeed_page/like_icon2x.png\")}\n              />\n            )}\n          </div>\n        );\n      case \"Pin\":\n        const saved = this.props.user.userData.saved.filter(\n          (item) => item == this.props.post._id\n        );\n        return (\n          <div>\n            {saved[0] ? (\n              <img\n                onClick={() =>\n                  this.props\n                    .dispatch(unSavePost(this.props.post._id))\n                    .then((response) => {\n                      if (response.payload.restricted) {\n                        console.log(response.payload);\n                        this.setState({\n                          alertFunctionIsRestricted: true,\n                          restrictedFunction:\n                            response.payload.restrictedFunction,\n                        });\n                      }\n                    })\n                }\n                src={require(\"../../asset/newfeed_page/stored_icon2x.png\")}\n              />\n            ) : (\n              <img\n                onClick={() =>\n                  this.props\n                    .dispatch(savePost(this.props.post._id))\n                    .then((response) => {\n                      if (response.payload.restricted) {\n                        console.log(response.payload);\n                        this.setState({\n                          alertFunctionIsRestricted: true,\n                          restrictedFunction:\n                            response.payload.restrictedFunction,\n                        });\n                      }\n                    })\n                }\n                src={require(\"../../asset/newfeed_page/store_icon2x.png\")}\n              />\n            )}\n          </div>\n        );\n    }\n  };\n\n  showLinks = () => {\n    let list = [];\n    return this.state.buttons.map((item, i) => {\n      return this.defaultLink(item, i);\n    });\n  };\n\n  toggleDropdown = (syntheticEvent) => {\n    console.log(\"toggle dropdown\");\n    this.setState((prevState) => ({ dropdown: !prevState.dropdown }));\n  };\n\n  handleBodyClick = (syntheticEvent) => {\n    console.log(\"body click\");\n  };\n\n  postedDate(day) {\n    console.log(day);\n    day = parseInt(day);\n    console.log(typeof day);\n    if (day < 30) {\n      return day + \" ngày\";\n    } else if (day <= 1 && day > 0.0417) {\n      console.log(day);\n      return day * 24 + \" giờ\";\n    } else if (day <= 0.0417) {\n      console.log(day);\n      return day * 24 * 60 + \" phút\";\n    }\n  }\n\n  findHashtags(Text) {\n    var regexp = /\\B\\#\\w\\w+\\b/g;\n    let result = Text.match(regexp);\n    if (result) {\n      let tags = [];\n      result.forEach((item) => {\n        tags.push(item.slice(1));\n      });\n      return tags;\n    } else {\n      return false;\n    }\n  }\n\n  handleDescription(description, userTag, locationName) {\n    //let hashtag = this.findHashtags(description)\n\n    this.state.tags.forEach(\n      (item) =>\n        (description = description.replace(\n          \"#\" + item.name,\n          `<a href=\"/tag/${item._id}\">${\"#\" + item.name}</a>`\n        ))\n    );\n    if (userTag.length > 0) {\n      description = description + \"<b>- cùng với </b>\";\n    }\n    userTag.forEach((item) => {\n      description += `<a href=\"/user/${item._id}\"}>@${item.userName}</a> `;\n    });\n    if (locationName) {\n      description += ` <b>- tại <b> <a href=\"/location/${locationName}\"> ${locationName} </a>`;\n    }\n    return <div dangerouslySetInnerHTML={{ __html: description }} />;\n  }\n\n  confirmDialog(type) {\n    let template = \"\";\n    switch (type) {\n      case \"commentHandle\":\n        template = (\n          <div className=\"commentHandle\">\n            {this.props.post.postedBy[0]._id ===\n            this.props.user.userData._id ? (\n              <div>\n                <p\n                  className=\"delete_button\"\n                  onClick={() => {\n                    this.props\n                      .dispatch(\n                        deleteComment(\n                          this.props.post._id,\n                          this.state.commentSelected\n                        )\n                      )\n                      .then(() => {\n                        this.setState({\n                          DialogShowing: false,\n                          commentSelected: \"\",\n                        });\n                      });\n                  }}\n                >\n                  Xóa\n                </p>\n                <hr />\n                <p\n                  className=\"report_button\"\n                  onClick={() => {\n                    this.setState({\n                      isReportFormShow: true,\n                      reportData: {\n                        reportType: \"comment\",\n                        post: this.props.post._id,\n                        comment: this.state.commentSelected,\n                      },\n                    });\n                  }}\n                >\n                  Báo cáo\n                </p>\n              </div>\n            ) : (\n              <div>\n                <p\n                  className=\"report_button\"\n                  onClick={() => {\n                    this.setState({\n                      isReportFormShow: true,\n                      reportData: {\n                        reportType: \"comment\",\n                        post: this.props.post._id,\n                        comment: this.state.commentSelected,\n                      },\n                    });\n                  }}\n                >\n                  Báo cáo\n                </p>\n              </div>\n            )}\n          </div>\n        );\n        break;\n      case \"deleteConfirm\":\n        template = (\n          <div className=\"deleteConfirm\">\n            <h5> Bạn chắc chắn muốn xóa bài viết này?</h5>\n            <div className=\"btn_wrapper\">\n              <p\n                className=\"cancel_btn\"\n                onClick={() => this.setState({ DialogShowing: false })}\n              >\n                Hủy\n              </p>\n              <p\n                className=\"confirm_btn\"\n                onClick={() =>\n                  this.props\n                    .dispatch(deletePost(this.props.post._id))\n                    .then(() => {\n                      this.props.history.push(\"/newfeed\");\n                    })\n                }\n              >\n                Xóa\n              </p>\n            </div>\n          </div>\n        );\n        break;\n      default:\n        template = <div></div>;\n        break;\n    }\n    return (\n      <Dialog\n        open={this.state.DialogShowing}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={() => {\n          this.setState({ DialogShowing: false });\n        }}\n      >\n        {template}\n      </Dialog>\n    );\n  }\n\n  closeReportForm = () => {\n    this.setState({\n      isReportFormShow: false,\n      reportData: {},\n      DialogShowing: false,\n    });\n  };\n\n  showReportForm(type) {\n    return (\n      <Report\n        isReportFormShow={this.state.isReportFormShow}\n        reportData={this.state.reportData}\n        handleSnackBar={(mess, res) => {\n          this.handleSnackBar(mess, res);\n        }}\n        list={this.props.policies.policyList}\n        closeReportForm={() => this.closeReportForm()}\n      />\n    );\n  }\n\n  deletePost() {}\n\n  closeEditor = () => {\n    this.setState({ showEditor: !this.state.showEditor });\n  };\n\n  handleSnackBar = (mess, res) => {\n    this.setState({ setSnack: true, SnackMess: mess, reportSuccess: res });\n  };\n\n  render() {\n    const props = this.props;\n    return (\n      <div className=\"detail_card\">\n        <div className=\"card_item_wrapper\">\n          <div className=\"left\">\n            <img\n              onClick={() => this.handlelightBox()}\n              className=\"item_image\"\n              src={this.renderCardImage(props.post.images)}\n            />\n          </div>\n          <div className=\"right\">\n            <div className=\"card_row\">\n              <div className=\"user_info\">\n                <div className=\"avt\">\n                  <img src={props.post.postedBy[0].avt} />\n                </div>\n                <div className=\"userName\">\n                  <Link to={`/user/${props.post.postedBy[0]._id}`}>\n                    {props.post.postedBy[0].userName}\n                  </Link>\n                  <p>{this.postedDate(props.post.dateDifference)}</p>\n                </div>\n              </div>\n              <div\n                className={`advance_button ${\n                  this.state.dropdown ? \"active_dropbox\" : \"\"\n                }`}\n              >\n                <img\n                  onClick={this.toggleDropdown}\n                  src={require(\"../../asset/headerIcon/advance_button2x.png\")}\n                />\n                {this.state.dropdown ? (\n                  <NativeClickListener\n                    onClick={() => this.setState({ dropdown: false })}\n                  >\n                    <div className=\"dropdown\" onClick={this.handleBodyClick}>\n                      <div>\n                        <p\n                          onClick={() =>\n                            this.props\n                              .dispatch(hidePost(this.props.post._id, \"detail\"))\n                              .then(() => {\n                                this.props.history.push(\"/newfeed\");\n                              })\n                          }\n                        >\n                          Ẩn\n                        </p>\n                      </div>\n                      <hr />\n                      {props.post.postedBy[0]._id ===\n                      this.props.user.userData._id ? (\n                        <div>\n                          <div>\n                            <p\n                              className=\"delete_button\"\n                              onClick={() => {\n                                this.setState({\n                                  DialogShowing: true,\n                                  dialogType: \"deleteConfirm\",\n                                });\n                              }}\n                            >\n                              Xóa\n                            </p>\n                          </div>\n                          <hr />\n                          <div>\n                            <p\n                              className=\"edit_button\"\n                              onClick={() => {\n                                this.setState({\n                                  showEditor: true,\n                                  dropdown: false,\n                                });\n                              }}\n                            >\n                              Sửa\n                            </p>\n                          </div>\n                        </div>\n                      ) : (\n                        <div>\n                          <p\n                            className=\"report_button\"\n                            onClick={() => {\n                              this.setState({\n                                isReportFormShow: true,\n                                reportData: {\n                                  reportType: \"post\",\n                                  post: props.post._id,\n                                },\n                              });\n                            }}\n                          >\n                            Báo cáo\n                          </p>\n                        </div>\n                      )}\n                    </div>\n                  </NativeClickListener>\n                ) : null}\n              </div>\n            </div>\n            <div className=\"description\">\n              {this.state.showEditor ? (\n                <PostEdit\n                  description={props.post.description}\n                  close={this.closeEditor}\n                  handleSnackBar={(mess, res) => {\n                    this.handleSnackBar(mess, res);\n                  }}\n                  ActionType=\"detail\"\n                  userTag={props.post.userTag}\n                  locationName={props.post.locationName}\n                  postId={props.post._id}\n                />\n              ) : (\n                this.handleDescription(\n                  props.post.description,\n                  props.post.userTag,\n                  props.post.locationName\n                )\n              )}\n            </div>\n\n            <div className=\"comment_list\">\n              {this.showComments(props.post.comments)}\n              {this.state.limit < props.post.comments.length ? (\n                <h6\n                  onClick={() => {\n                    this.setState({ limit: this.state.limit + 3 });\n                  }}\n                  className=\"view_more_cmt\"\n                >{`Xem thêm`}</h6>\n              ) : null}\n            </div>\n            <div className=\"card_function\">\n              <div className=\"button_wrapper\">{this.showLinks()}</div>\n              <div className=\"likes\">\n                <AvatarGroup max={3}>\n                  {this.showUser(props.post.likes)}\n                </AvatarGroup>\n                {props.post.likes.length ? <p> Đã thích bài viết </p> : null}\n              </div>\n              <form\n                className=\"comment_form\"\n                onSubmit={(event) =>\n                  this.makeComment(props.post._id, event, \"Detail\")\n                }\n              >\n                <div className=\"comment_input\">\n                  <input placeholder=\"Nhập hình luận....\" />\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n        {this.state.lightbox ? (\n          <ImageLightBox\n            id={props.post._id}\n            images={this.state.lightboxImages}\n            open={this.state.lightbox}\n            pos={0}\n            onclose={() => this.handlelightBoxClose()}\n          />\n        ) : null}\n        {this.confirmDialog(this.state.dialogType)}\n        {this.showReportForm()}\n        {\n          <Dialog\n            className=\"dialog_cont\"\n            onClose={() => {\n              this.setState({ alertFunctionIsRestricted: false });\n            }}\n            open={this.state.alertFunctionIsRestricted}\n          >\n            <div className=\"dialog_header\">\n              <h5>\n                Bạn đã bị hạn chế chức năng này cho đến{\" \"}\n                {moment(this.state.restrictedFunction.amountOfTime).format(\"L\")}\n              </h5>\n            </div>\n          </Dialog>\n        }\n        <Snackbar\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"left\",\n          }}\n          open={this.state.setSnack}\n          onClose={() => this.setState({ setSnack: false })}\n          autoHideDuration={3000}\n        >\n          <MuiAlert\n            elevation={6}\n            variant=\"filled\"\n            severity={this.state.reportSuccess ? \"success\" : \"warning\"}\n            message={this.state.SnackMess}\n          >\n            {this.state.SnackMess}\n          </MuiAlert>\n        </Snackbar>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.user,\n    policies: state.policies,\n  };\n};\n\nexport default connect(mapStateToProps)(withRouter(PostDetailCard));\n"]},"metadata":{},"sourceType":"module"}
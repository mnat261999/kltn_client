{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\Location\\\\index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport './location.scss';\nimport Layout from '../../hoc/layout';\nimport { findLocation } from '../../actions/product_actions';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { Link, withRouter } from 'react-router-dom';\nimport Geocode from \"react-geocode\"; // import {\n//     StaticGoogleMap,\n//     Marker,\n//     Path,\n//   } from 'react-static-google-map';\n\nGeocode.setApiKey(\"AIzaSyC2UANhvpqKx54aeIVGQk8q0FBCJThlVm4\");\n\nclass Location extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      name: \"\",\n      isLoading: false,\n      lat: '',\n      long: ''\n    };\n  }\n\n  componentDidMount() {\n    const name = this.props.match.params.name;\n    this.setState({\n      name: name\n    });\n    this.props.dispatch(findLocation(name));\n  } // followTag(id,previousState) {\n  //     this.props.dispatch(followTag(id, previousState));\n  // }\n  // unfollowTag(id, previousState) {\n  //     this.props.dispatch(unfollowTag(id, previousState));\n  // }\n  // LoadmoreCards = () => {\n  //     let skip = this.state.skip + this.state.limit;\n  //     this.props.dispatch(getTag(\n  //         this.state.id,\n  //         this.state.skip,\n  //         this.state.limit\n  //     ))\n  //     .then(() => {\n  //         this.setState({\n  //             isLoading: false,\n  //             skip\n  //         })\n  //     })\n  // }\n  // handleScroll() {\n  //     const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n  //     const body = document.body;\n  //     const html = document.documentElement;\n  //     const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n  //     const windowBottom = Math.ceil(windowHeight + window.pageYOffset);\n  //     console.log(windowBottom, docHeight, windowHeight)\n  //     if (windowBottom >= docHeight) {\n  //         this.setState({ isLoading: true }, () => { this.LoadmoreCards()});\n  //         console.log('bottom reached');\n  //     }\n  // }\n\n\n  render() {\n    Geocode.fromAddress(this.state.name).then(response => {\n      const {\n        lat,\n        lng\n      } = response.results[0].geometry.location;\n      this.setState({\n        lat: lat,\n        long: lng\n      });\n      console.log(lat, lng);\n    }, error => {\n      console.error(error);\n    });\n    console.log(this.props.products);\n    return this.props.products.matchlocation ? /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"TagPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tag_info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tag_name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 29\n      }\n    }, this.state.name), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 29\n      }\n    }, this.props.products.matchlocation.length, \" B\\xE0i vi\\u1EBFt\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"posts\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, this.props.products ? this.props.products.matchlocation.map(item => {\n      return item.hidden ? null : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-4 col-md-4  pb-3 pt-3 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"image-wrapper\",\n        onClick: () => {\n          this.props.history.push(`/postDetail/${item._id}`);\n        },\n        style: {\n          backgroundImage: `url(${item.images[0].url})`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 33\n        }\n      }));\n    }) : '')), this.state.isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main_loader\",\n      style: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translateX(-50 %) translateY(- 50 %)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        color: '#5477D5'\n      },\n      thickness: 7,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    })) : \"\")) : \"\";\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    products: state.products\n  };\n}\n\nexport default connect(mapStateToProps)(withRouter(Location));","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/Location/index.js"],"names":["React","Component","connect","Layout","findLocation","CircularProgress","Link","withRouter","Geocode","setApiKey","Location","state","name","isLoading","lat","long","componentDidMount","props","match","params","setState","dispatch","render","fromAddress","then","response","lng","results","geometry","location","console","log","error","products","matchlocation","length","map","item","hidden","history","push","_id","backgroundImage","images","url","position","top","left","transform","color","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './location.scss'\r\nimport Layout from '../../hoc/layout';\r\nimport { findLocation } from '../../actions/product_actions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport Geocode from \"react-geocode\";\r\n\r\n\r\n// import {\r\n//     StaticGoogleMap,\r\n//     Marker,\r\n//     Path,\r\n//   } from 'react-static-google-map';\r\nGeocode.setApiKey(\"AIzaSyC2UANhvpqKx54aeIVGQk8q0FBCJThlVm4\");\r\nclass Location extends Component {\r\n\r\n    state = {\r\n        name: \"\",\r\n        isLoading: false,\r\n        lat:'',\r\n        long:''\r\n    }\r\n\r\n    componentDidMount() {\r\n        const name = this.props.match.params.name;\r\n        this.setState({\r\n            name: name\r\n        })\r\n        this.props.dispatch(findLocation(name))\r\n    }\r\n\r\n    // followTag(id,previousState) {\r\n    //     this.props.dispatch(followTag(id, previousState));\r\n    // }\r\n\r\n    // unfollowTag(id, previousState) {\r\n    //     this.props.dispatch(unfollowTag(id, previousState));\r\n    // }\r\n\r\n    // LoadmoreCards = () => {\r\n    //     let skip = this.state.skip + this.state.limit;\r\n    //     this.props.dispatch(getTag(\r\n    //         this.state.id,\r\n    //         this.state.skip,\r\n    //         this.state.limit\r\n    //     ))\r\n    //     .then(() => {\r\n    //         this.setState({\r\n    //             isLoading: false,\r\n    //             skip\r\n    //         })\r\n    //     })\r\n    // }\r\n\r\n    // handleScroll() {\r\n    //     const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\r\n    //     const body = document.body;\r\n    //     const html = document.documentElement;\r\n    //     const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\r\n    //     const windowBottom = Math.ceil(windowHeight + window.pageYOffset);\r\n    //     console.log(windowBottom, docHeight, windowHeight)\r\n    //     if (windowBottom >= docHeight) {\r\n    //         this.setState({ isLoading: true }, () => { this.LoadmoreCards()});\r\n    //         console.log('bottom reached');\r\n    //     }\r\n    // }\r\n    \r\n    render() {\r\n        Geocode.fromAddress(this.state.name).then(\r\n            (response) => {\r\n              const { lat, lng } = response.results[0].geometry.location;\r\n              this.setState({lat:lat,long:lng})\r\n              console.log(lat, lng);\r\n            },\r\n            (error) => {\r\n              console.error(error);\r\n            }\r\n          );\r\n        console.log(this.props.products);\r\n        return (\r\n\r\n            this.props.products.matchlocation?\r\n            <Layout>\r\n            <div className=\"TagPage\">\r\n                <div className=\"tag_info\">\r\n                {/* <StaticGoogleMap size=\"600x300\" apiKey=\"AIzaSyC2UANhvpqKx54aeIVGQk8q0FBCJThlVm4\">\r\n  <Marker\r\n    location={{ lat: this.state.lat, lng: this.state.long }}\r\n    color=\"blue\"\r\n    label=\"P\"\r\n  />\r\n  <Path\r\n    points={[\r\n        this.state.lat, this.state.long,\r\n        this.state.lat, this.state.long,\r\n        this.state.lat, this.state.long,\r\n        this.state.lat, this.state.long,\r\n    ]}\r\n  />\r\n</StaticGoogleMap> */}\r\n                  \r\n                        <div className=\"tag_name\">\r\n                            <h3>{this.state.name}</h3>\r\n                            <h6>{this.props.products.matchlocation.length} Bài viết</h6>\r\n                        </div>\r\n                       \r\n                   \r\n                </div>\r\n                <div className=\"posts\">\r\n                    <div className=\"row\">\r\n                        {\r\n                        this.props.products? this.props.products.matchlocation.map((item)=>{\r\n                            return item.hidden ? null :\r\n                            (\r\n                                <div className=\"col-xl-4 col-md-4  pb-3 pt-3 \">\r\n                                <div className=\"image-wrapper\" onClick={()=>{\r\n                                        this.props.history.push(`/postDetail/${item._id}`)\r\n                                }} style={{backgroundImage: `url(${item.images[0].url})`}}>\r\n                                    \r\n                                </div>\r\n                            </div>)\r\n                        }):''\r\n                        }\r\n                    </div>\r\n                </div>\r\n                {\r\n                    this.state.isLoading ?\r\n                    <div className=\"main_loader\" style={{\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        left: '50%',\r\n                        transform: 'translateX(-50 %) translateY(- 50 %)'\r\n                    }}>\r\n                        <CircularProgress style={{ color: '#5477D5' }} thickness={7} />\r\n                    </div>\r\n                    :\"\"\r\n                }\r\n            </div>\r\n            </Layout>\r\n            : \"\"\r\n        );\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        products: state.products\r\n    };\r\n}\r\nexport default connect(mapStateToProps)(withRouter(Location));"]},"metadata":{},"sourceType":"module"}
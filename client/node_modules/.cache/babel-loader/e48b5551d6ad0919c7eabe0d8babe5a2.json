{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kltn\\\\test\\\\social-media\\\\client\\\\src\\\\components\\\\SearchResult\\\\index.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { search, loadmoreUser, loadmoreTag } from \"../../actions/search_action\";\nimport Layout from \"../../hoc/layout\";\nimport \"./searchPage.scss\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nclass SearchPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showUser: true,\n      isLoading: false,\n      userSkip: 0,\n      userLimit: 3,\n      userLoadmore: true,\n      tagSkip: 0,\n      tagLimit: 3,\n      tagLoadmore: true\n    };\n\n    this.switch = () => {\n      this.setState({\n        showUser: !this.state.showUser\n      });\n    };\n\n    this.loadmoreUser = () => {\n      let skip = this.state.userSkip + this.state.userLimit;\n      this.props.dispatch(loadmoreUser(this.props.match.params.keyword, skip, this.state.userLimit, this.props.search)).then(response => {\n        if (response.payload.userSize < this.state.userLimit) {\n          this.setState({\n            userLoadmore: false\n          });\n        }\n\n        this.setState({\n          isLoading: false,\n          userSkip: skip\n        });\n      });\n    };\n\n    this.loadmoreTag = () => {\n      let skip = this.state.tagSkip + this.state.tagLimit;\n      this.props.dispatch(loadmoreTag(this.props.match.params.keyword, skip, this.state.tagLimit, this.props.search)).then(response => {\n        if (response.payload.tagSize < this.state.tagLimit) {\n          this.setState({\n            tagLoadmore: false\n          });\n        }\n\n        this.setState({\n          isLoading: false,\n          tagSkip: skip\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    const keyword = this.props.match.params.keyword;\n    this.props.dispatch(search(keyword, this.state.userSkip, this.state.userLimit, {\n      users: [],\n      tags: []\n    })).then(response => {\n      if (response.payload.userSize < this.state.limit) {\n        this.setState({\n          userLoadmore: false\n        });\n      }\n    });\n  }\n\n  handleScroll() {\n    const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n    const windowBottom = Math.ceil(windowHeight + window.pageYOffset);\n    console.log(windowBottom, docHeight, windowHeight);\n\n    if (windowBottom >= docHeight) {\n      this.setState({\n        isLoading: true\n      });\n      this.Loadmore();\n      console.log(\"bottom reached\");\n    }\n  }\n\n  render() {\n    const search = this.props.search;\n    return /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-3 col-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter_button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: this.state.showUser ? \"actived\" : \"\",\n      onClick: this.switch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, \"T\\xE0i kho\\u1EA3n\"), /*#__PURE__*/React.createElement(\"li\", {\n      className: this.state.showUser ? \"\" : \"actived\",\n      onClick: this.switch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }, \"Th\\u1EBB\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-9 col-9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, this.props.search.users && this.props.search.tags ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"result\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 19\n      }\n    }, this.state.showUser ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 23\n      }\n    }, search.users.map((item, idx) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item\",\n        key: idx,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"user_infor_wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: item.avt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 33\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 33\n        }\n      }, item.userName)));\n    }), this.state.userLoadmore ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"loadMoreButton\",\n      onClick: () => this.loadmoreUser(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 27\n      }\n    }, \"Loadmore\") : \"\") : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 23\n      }\n    }, search.tags.map((tag, idx) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"item\",\n        key: idx,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tag_infor_wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 33\n        }\n      }, \"#\", tag.name), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 33\n        }\n      }, tag.posts.length, \" B\\xE0i vi\\u1EBFt\")));\n    }), this.state.tagLoadmore ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"loadMoreButton\",\n      onClick: () => this.loadmoreTag(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 27\n      }\n    }, \"Loadmore\") : \"\")) : \"loading\"))), this.state.isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main_loader\",\n      style: {\n        position: \"absolute\",\n        top: \"50%\",\n        left: \"50%\",\n        transform: \"translateX(-50 %) translateY(- 50 %)\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      style: {\n        color: \"#5477D5\"\n      },\n      thickness: 7,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 15\n      }\n    })) : \"\"));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    search: state.search\n  };\n}\n\nexport default connect(mapStateToProps)(SearchPage);","map":{"version":3,"sources":["D:/Kltn/test/social-media/client/src/components/SearchResult/index.js"],"names":["React","Component","connect","search","loadmoreUser","loadmoreTag","Layout","CircularProgress","SearchPage","state","showUser","isLoading","userSkip","userLimit","userLoadmore","tagSkip","tagLimit","tagLoadmore","switch","setState","skip","props","dispatch","match","params","keyword","then","response","payload","userSize","tagSize","componentDidMount","users","tags","limit","handleScroll","windowHeight","window","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","ceil","pageYOffset","console","log","Loadmore","render","map","item","idx","avt","userName","tag","name","posts","length","position","top","left","transform","color","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { search, loadmoreUser, loadmoreTag } from \"../../actions/search_action\";\r\nimport Layout from \"../../hoc/layout\";\r\nimport \"./searchPage.scss\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nclass SearchPage extends Component {\r\n  state = {\r\n    showUser: true,\r\n    isLoading: false,\r\n\r\n    userSkip: 0,\r\n    userLimit: 3,\r\n    userLoadmore: true,\r\n\r\n    tagSkip: 0,\r\n    tagLimit: 3,\r\n    tagLoadmore: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const keyword = this.props.match.params.keyword;\r\n    this.props\r\n      .dispatch(\r\n        search(keyword, this.state.userSkip, this.state.userLimit, {\r\n          users: [],\r\n          tags: [],\r\n        })\r\n      )\r\n      .then((response) => {\r\n        if (response.payload.userSize < this.state.limit) {\r\n          this.setState({ userLoadmore: false });\r\n        }\r\n      });\r\n  }\r\n\r\n  switch = () => {\r\n    this.setState({ showUser: !this.state.showUser });\r\n  };\r\n\r\n  loadmoreUser = () => {\r\n    let skip = this.state.userSkip + this.state.userLimit;\r\n    this.props\r\n      .dispatch(\r\n        loadmoreUser(\r\n          this.props.match.params.keyword,\r\n          skip,\r\n          this.state.userLimit,\r\n          this.props.search\r\n        )\r\n      )\r\n      .then((response) => {\r\n        if (response.payload.userSize < this.state.userLimit) {\r\n          this.setState({ userLoadmore: false });\r\n        }\r\n        this.setState({\r\n          isLoading: false,\r\n          userSkip: skip,\r\n        });\r\n      });\r\n  };\r\n\r\n  loadmoreTag = () => {\r\n    let skip = this.state.tagSkip + this.state.tagLimit;\r\n    this.props\r\n      .dispatch(\r\n        loadmoreTag(\r\n          this.props.match.params.keyword,\r\n          skip,\r\n          this.state.tagLimit,\r\n          this.props.search\r\n        )\r\n      )\r\n      .then((response) => {\r\n        if (response.payload.tagSize < this.state.tagLimit) {\r\n          this.setState({ tagLoadmore: false });\r\n        }\r\n        this.setState({\r\n          isLoading: false,\r\n          tagSkip: skip,\r\n        });\r\n      });\r\n  };\r\n\r\n  handleScroll() {\r\n    const windowHeight =\r\n      \"innerHeight\" in window\r\n        ? window.innerHeight\r\n        : document.documentElement.offsetHeight;\r\n    const body = document.body;\r\n    const html = document.documentElement;\r\n    const docHeight = Math.max(\r\n      body.scrollHeight,\r\n      body.offsetHeight,\r\n      html.clientHeight,\r\n      html.scrollHeight,\r\n      html.offsetHeight\r\n    );\r\n    const windowBottom = Math.ceil(windowHeight + window.pageYOffset);\r\n    console.log(windowBottom, docHeight, windowHeight);\r\n    if (windowBottom >= docHeight) {\r\n      this.setState({ isLoading: true });\r\n      this.Loadmore();\r\n      console.log(\"bottom reached\");\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const search = this.props.search;\r\n    return (\r\n      <Layout>\r\n        <div className=\"searchPage\">\r\n          <div className=\"wrapper\">\r\n            <div className=\"row\">\r\n              <div className=\"col-xl-3 col-3\">\r\n                <div className=\"filter_button\">\r\n                  <ul>\r\n                    <li\r\n                      className={this.state.showUser ? \"actived\" : \"\"}\r\n                      onClick={this.switch}\r\n                    >\r\n                      Tài khoản\r\n                    </li>\r\n                    <li\r\n                      className={this.state.showUser ? \"\" : \"actived\"}\r\n                      onClick={this.switch}\r\n                    >\r\n                      Thẻ\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-xl-9 col-9\">\r\n                {this.props.search.users && this.props.search.tags ? (\r\n                  <div className=\"result\">\r\n                    {this.state.showUser ? (\r\n                      <div>\r\n                        {search.users.map((item, idx) => {\r\n                          return (\r\n                            <div className=\"item\" key={idx}>\r\n                              <div className=\"user_infor_wrapper\">\r\n                                <img src={item.avt} />\r\n                                <p>{item.userName}</p>\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                        {this.state.userLoadmore ? (\r\n                          <button\r\n                            className=\"loadMoreButton\"\r\n                            onClick={() => this.loadmoreUser()}\r\n                          >\r\n                            Loadmore\r\n                          </button>\r\n                        ) : (\r\n                          \"\"\r\n                        )}\r\n                      </div>\r\n                    ) : (\r\n                      <div>\r\n                        {search.tags.map((tag, idx) => {\r\n                          return (\r\n                            <div className=\"item\" key={idx}>\r\n                              <div className=\"tag_infor_wrapper\">\r\n                                <h6>#{tag.name}</h6>\r\n                                <p>{tag.posts.length} Bài viết</p>\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                        {this.state.tagLoadmore ? (\r\n                          <button\r\n                            className=\"loadMoreButton\"\r\n                            onClick={() => this.loadmoreTag()}\r\n                          >\r\n                            Loadmore\r\n                          </button>\r\n                        ) : (\r\n                          \"\"\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  \"loading\"\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {this.state.isLoading ? (\r\n            <div\r\n              className=\"main_loader\"\r\n              style={{\r\n                position: \"absolute\",\r\n                top: \"50%\",\r\n                left: \"50%\",\r\n                transform: \"translateX(-50 %) translateY(- 50 %)\",\r\n              }}\r\n            >\r\n              <CircularProgress style={{ color: \"#5477D5\" }} thickness={7} />\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.user,\r\n    search: state.search,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(SearchPage);\r\n"]},"metadata":{},"sourceType":"module"}